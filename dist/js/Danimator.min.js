/*! danimator v0.0.1 2017-06-17 */

var pi2=2*Math.PI;Ease={linear:function(a){return a},cubicIn:function(a){return Math.pow(a,3)},cubicOut:function(a){return 1-Math.pow(1-a,3)},cubicInOut:function(a){return(a*=2)<1?.5*Math.pow(a,3):1-.5*Math.abs(Math.pow(2-a,3))},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},elasticIn:function(a){if(0==a||1==a)return a;var b=.3/pi2*Math.asin(1);return-1*Math.pow(2,10*(a-=1))*Math.sin((a-b)*pi2/.3)},elasticOut:function(a){if(0==a||1==a)return a;var b=.3/pi2*Math.asin(1);return 1*Math.pow(2,-10*a)*Math.sin((a-b)*pi2/.3)+1},elasticInOut:function(a){var b=.3*1.5/pi2*Math.asin(1);return(a*=2)<1?1*Math.pow(2,10*(a-=1))*Math.sin((a-b)*pi2/.3*1.5)*-.5:1*Math.pow(2,-10*(a-=1))*Math.sin((a-b)*pi2/.3*1.5)*.5+1}},function(){"use strict";var a=function(){this.init()};a.prototype={init:function(){var a=this||b;return a._counter=0,a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.mobileAutoEnable=!0,a._setup(),a},volume:function(a){var c=this||b;if(a=parseFloat(a),c.ctx||j(),void 0!==a&&a>=0&&a<=1){if(c._volume=a,c._muted)return c;c.usingWebAudio&&(c.masterGain.gain.value=a);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var e=c._howls[d]._getSoundIds(),f=0;f<e.length;f++){var g=c._howls[d]._soundById(e[f]);g&&g._node&&(g._node.volume=g._volume*a)}return c}return c._volume},mute:function(a){var c=this||b;c.ctx||j(),c._muted=a,c.usingWebAudio&&(c.masterGain.gain.value=a?0:c._volume);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var e=c._howls[d]._getSoundIds(),f=0;f<e.length;f++){var g=c._howls[d]._soundById(e[f]);g&&g._node&&(g._node.muted=!!a||g._muted)}return c},unload:function(){for(var a=this||b,c=a._howls.length-1;c>=0;c--)a._howls[c].unload();return a.usingWebAudio&&a.ctx&&void 0!==a.ctx.close&&(a.ctx.close(),a.ctx=null,j()),a},codecs:function(a){return(this||b)._codecs[a.replace(/^x-/,"")]},_setup:function(){var a=this||b;if(a.state=a.ctx?a.ctx.state||"running":"running",a._autoSuspend(),!a.usingWebAudio)if("undefined"!=typeof Audio)try{var c=new Audio;void 0===c.oncanplaythrough&&(a._canPlayEvent="canplay")}catch(b){a.noAudio=!0}else a.noAudio=!0;try{var c=new Audio;c.muted&&(a.noAudio=!0)}catch(a){}return a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var a=this||b,c=null;try{c="undefined"!=typeof Audio?new Audio:null}catch(b){return a}if(!c||"function"!=typeof c.canPlayType)return a;var d=c.canPlayType("audio/mpeg;").replace(/^no$/,""),e=a._navigator&&a._navigator.userAgent.match(/OPR\/([0-6].)/g),f=e&&parseInt(e[0].split("/")[1],10)<33;return a._codecs={mp3:!(f||!d&&!c.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!d,opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!c.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!c.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!c.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(c.canPlayType("audio/x-flac;")||c.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_enableMobileAudio:function(){var a=this||b,c=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(a._navigator&&a._navigator.userAgent),d=!!("ontouchend"in window||a._navigator&&a._navigator.maxTouchPoints>0||a._navigator&&a._navigator.msMaxTouchPoints>0);if(!a._mobileEnabled&&a.ctx&&(c||d)){a._mobileEnabled=!1,a._mobileUnloaded||44100===a.ctx.sampleRate||(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var e=function(){var b=a.ctx.createBufferSource();b.buffer=a._scratchBuffer,b.connect(a.ctx.destination),void 0===b.start?b.noteOn(0):b.start(0),b.onended=function(){b.disconnect(0),a._mobileEnabled=!0,a.mobileAutoEnable=!1,document.removeEventListener("touchend",e,!0)}};return document.addEventListener("touchend",e,!0),a}},_autoSuspend:function(){var a=this;if(a.autoSuspend&&a.ctx&&void 0!==a.ctx.suspend&&b.usingWebAudio){for(var c=0;c<a._howls.length;c++)if(a._howls[c]._webAudio)for(var d=0;d<a._howls[c]._sounds.length;d++)if(!a._howls[c]._sounds[d]._paused)return a;return a._suspendTimer&&clearTimeout(a._suspendTimer),a._suspendTimer=setTimeout(function(){a.autoSuspend&&(a._suspendTimer=null,a.state="suspending",a.ctx.suspend().then(function(){a.state="suspended",a._resumeAfterSuspend&&(delete a._resumeAfterSuspend,a._autoResume())}))},3e4),a}},_autoResume:function(){var a=this;if(a.ctx&&void 0!==a.ctx.resume&&b.usingWebAudio)return"running"===a.state&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):"suspended"===a.state?(a.state="resuming",a.ctx.resume().then(function(){a.state="running";for(var b=0;b<a._howls.length;b++)a._howls[b]._emit("resume")}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):"suspending"===a.state&&(a._resumeAfterSuspend=!0),a}};var b=new a,c=function(a){var b=this;if(!a.src||0===a.src.length)return void console.error("An array of source files must be passed with any new Howl.");b.init(a)};c.prototype={init:function(a){var c=this;return b.ctx||j(),c._autoplay=a.autoplay||!1,c._format="string"!=typeof a.format?a.format:[a.format],c._html5=a.html5||!1,c._muted=a.mute||!1,c._loop=a.loop||!1,c._pool=a.pool||5,c._preload="boolean"!=typeof a.preload||a.preload,c._rate=a.rate||1,c._sprite=a.sprite||{},c._src="string"!=typeof a.src?a.src:[a.src],c._volume=void 0!==a.volume?a.volume:1,c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],c._onend=a.onend?[{fn:a.onend}]:[],c._onfade=a.onfade?[{fn:a.onfade}]:[],c._onload=a.onload?[{fn:a.onload}]:[],c._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],c._onpause=a.onpause?[{fn:a.onpause}]:[],c._onplay=a.onplay?[{fn:a.onplay}]:[],c._onstop=a.onstop?[{fn:a.onstop}]:[],c._onmute=a.onmute?[{fn:a.onmute}]:[],c._onvolume=a.onvolume?[{fn:a.onvolume}]:[],c._onrate=a.onrate?[{fn:a.onrate}]:[],c._onseek=a.onseek?[{fn:a.onseek}]:[],c._onresume=[],c._webAudio=b.usingWebAudio&&!c._html5,void 0!==b.ctx&&b.ctx&&b.mobileAutoEnable&&b._enableMobileAudio(),b._howls.push(c),c._autoplay&&c._queue.push({event:"play",action:function(){c.play()}}),c._preload&&c.load(),c},load:function(){var a=this,c=null;if(b.noAudio)return void a._emit("loaderror",null,"No audio support.");"string"==typeof a._src&&(a._src=[a._src]);for(var e=0;e<a._src.length;e++){var g,h;if(a._format&&a._format[e])g=a._format[e];else{if("string"!=typeof(h=a._src[e])){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(h),g||(g=/\.([^.]+)$/.exec(h.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&b.codecs(g)){c=a._src[e];break}}return c?(a._src=c,a._state="loading","https:"===window.location.protocol&&"http:"===c.slice(0,5)&&(a._html5=!0,a._webAudio=!1),new d(a),a._webAudio&&f(a),a):void a._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(a,c){var d=this,e=null;if("number"==typeof a)e=a,a=null;else{if("string"==typeof a&&"loaded"===d._state&&!d._sprite[a])return null;if(void 0===a){a="__default";for(var f=0,g=0;g<d._sounds.length;g++)d._sounds[g]._paused&&!d._sounds[g]._ended&&(f++,e=d._sounds[g]._id);1===f?a=null:e=null}}var h=e?d._soundById(e):d._inactiveSound();if(!h)return null;if(e&&!a&&(a=h._sprite||"__default"),"loaded"!==d._state&&!d._sprite[a])return d._queue.push({event:"play",action:function(){d.play(d._soundById(h._id)?h._id:void 0)}}),h._id;if(e&&!h._paused)return c||setTimeout(function(){d._emit("play",h._id)},0),h._id;d._webAudio&&b._autoResume();var i=Math.max(0,h._seek>0?h._seek:d._sprite[a][0]/1e3),j=Math.max(0,(d._sprite[a][0]+d._sprite[a][1])/1e3-i),k=1e3*j/Math.abs(h._rate);h._paused=!1,h._ended=!1,h._sprite=a,h._seek=i,h._start=d._sprite[a][0]/1e3,h._stop=(d._sprite[a][0]+d._sprite[a][1])/1e3,h._loop=!(!h._loop&&!d._sprite[a][2]);var l=h._node;if(d._webAudio){var m=function(){d._refreshBuffer(h);var a=h._muted||d._muted?0:h._volume;l.gain.setValueAtTime(a,b.ctx.currentTime),h._playStart=b.ctx.currentTime,void 0===l.bufferSource.start?h._loop?l.bufferSource.noteGrainOn(0,i,86400):l.bufferSource.noteGrainOn(0,i,j):h._loop?l.bufferSource.start(0,i,86400):l.bufferSource.start(0,i,j),k!==1/0&&(d._endTimers[h._id]=setTimeout(d._ended.bind(d,h),k)),c||setTimeout(function(){d._emit("play",h._id)},0)},n="running"===b.state;if("loaded"===d._state&&n)m();else{var o=n||"loaded"!==d._state?"load":"resume";d.once(o,m,n?h._id:null),d._clearTimer(h._id)}}else{var p=function(){l.currentTime=i,l.muted=h._muted||d._muted||b._muted||l.muted,l.volume=h._volume*b.volume(),l.playbackRate=h._rate,l.play(),k!==1/0&&(d._endTimers[h._id]=setTimeout(d._ended.bind(d,h),k)),c||d._emit("play",h._id)},q="loaded"===d._state&&(window&&window.ejecta||!l.readyState&&b._navigator.isCocoonJS);if(4===l.readyState||q)p();else{var r=function(){p(),l.removeEventListener(b._canPlayEvent,r,!1)};l.addEventListener(b._canPlayEvent,r,!1),d._clearTimer(h._id)}}return h._id},pause:function(a){var b=this;if("loaded"!==b._state)return b._queue.push({event:"pause",action:function(){b.pause(a)}}),b;for(var c=b._getSoundIds(a),d=0;d<c.length;d++){b._clearTimer(c[d]);var e=b._soundById(c[d]);if(e&&!e._paused&&(e._seek=b.seek(c[d]),e._rateSeek=0,e._paused=!0,b._stopFade(c[d]),e._node))if(b._webAudio){if(!e._node.bufferSource)return b;void 0===e._node.bufferSource.stop?e._node.bufferSource.noteOff(0):e._node.bufferSource.stop(0),b._cleanBuffer(e._node)}else isNaN(e._node.duration)&&e._node.duration!==1/0||e._node.pause();arguments[1]||b._emit("pause",e?e._id:null)}return b},stop:function(a,b){var c=this;if("loaded"!==c._state)return c._queue.push({event:"stop",action:function(){c.stop(a)}}),c;for(var d=c._getSoundIds(a),e=0;e<d.length;e++){c._clearTimer(d[e]);var f=c._soundById(d[e]);if(f&&(f._seek=f._start||0,f._rateSeek=0,f._paused=!0,f._ended=!0,c._stopFade(d[e]),f._node))if(c._webAudio){if(!f._node.bufferSource)return b||c._emit("stop",f._id),c;void 0===f._node.bufferSource.stop?f._node.bufferSource.noteOff(0):f._node.bufferSource.stop(0),c._cleanBuffer(f._node)}else isNaN(f._node.duration)&&f._node.duration!==1/0||(f._node.currentTime=f._start||0,f._node.pause());f&&!b&&c._emit("stop",f._id)}return c},mute:function(a,c){var d=this;if("loaded"!==d._state)return d._queue.push({event:"mute",action:function(){d.mute(a,c)}}),d;if(void 0===c){if("boolean"!=typeof a)return d._muted;d._muted=a}for(var e=d._getSoundIds(c),f=0;f<e.length;f++){var g=d._soundById(e[f]);g&&(g._muted=a,d._webAudio&&g._node?g._node.gain.setValueAtTime(a?0:g._volume,b.ctx.currentTime):g._node&&(g._node.muted=!!b._muted||a),d._emit("mute",g._id))}return d},volume:function(){var a,c,d=this,e=arguments;if(0===e.length)return d._volume;1===e.length||2===e.length&&void 0===e[1]?d._getSoundIds().indexOf(e[0])>=0?c=parseInt(e[0],10):a=parseFloat(e[0]):e.length>=2&&(a=parseFloat(e[0]),c=parseInt(e[1],10));var f;if(!(void 0!==a&&a>=0&&a<=1))return f=c?d._soundById(c):d._sounds[0],f?f._volume:0;if("loaded"!==d._state)return d._queue.push({event:"volume",action:function(){d.volume.apply(d,e)}}),d;void 0===c&&(d._volume=a),c=d._getSoundIds(c);for(var g=0;g<c.length;g++)(f=d._soundById(c[g]))&&(f._volume=a,e[2]||d._stopFade(c[g]),d._webAudio&&f._node&&!f._muted?f._node.gain.setValueAtTime(a,b.ctx.currentTime):f._node&&!f._muted&&(f._node.volume=a*b.volume()),d._emit("volume",f._id));return d},fade:function(a,c,d,e){var f=this,g=Math.abs(a-c),h=a>c?"out":"in",i=g/.01,j=i>0?d/i:d;if(j<4&&(i=Math.ceil(i/(4/j)),j=4),"loaded"!==f._state)return f._queue.push({event:"fade",action:function(){f.fade(a,c,d,e)}}),f;f.volume(a,e);for(var k=f._getSoundIds(e),l=0;l<k.length;l++){var m=f._soundById(k[l]);if(m){if(e||f._stopFade(k[l]),f._webAudio&&!m._muted){var n=b.ctx.currentTime,o=n+d/1e3;m._volume=a,m._node.gain.setValueAtTime(a,n),m._node.gain.linearRampToValueAtTime(c,o)}var p=a;m._interval=setInterval(function(b,d){i>0&&(p+="in"===h?.01:-.01),p=Math.max(0,p),p=Math.min(1,p),p=Math.round(100*p)/100,f._webAudio?(void 0===e&&(f._volume=p),d._volume=p):f.volume(p,b,!0),(c<a&&p<=c||c>a&&p>=c)&&(clearInterval(d._interval),d._interval=null,f.volume(c,b),f._emit("fade",b))}.bind(f,k[l],m),j)}}return f},_stopFade:function(a){var c=this,d=c._soundById(a);return d&&d._interval&&(c._webAudio&&d._node.gain.cancelScheduledValues(b.ctx.currentTime),clearInterval(d._interval),d._interval=null,c._emit("fade",a)),c},loop:function(){var a,b,c,d=this,e=arguments;if(0===e.length)return d._loop;if(1===e.length){if("boolean"!=typeof e[0])return!!(c=d._soundById(parseInt(e[0],10)))&&c._loop;a=e[0],d._loop=a}else 2===e.length&&(a=e[0],b=parseInt(e[1],10));for(var f=d._getSoundIds(b),g=0;g<f.length;g++)(c=d._soundById(f[g]))&&(c._loop=a,d._webAudio&&c._node&&c._node.bufferSource&&(c._node.bufferSource.loop=a,a&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop)));return d},rate:function(){var a,c,d=this,e=arguments;if(0===e.length)c=d._sounds[0]._id;else if(1===e.length){var f=d._getSoundIds(),g=f.indexOf(e[0]);g>=0?c=parseInt(e[0],10):a=parseFloat(e[0])}else 2===e.length&&(a=parseFloat(e[0]),c=parseInt(e[1],10));var h;if("number"!=typeof a)return h=d._soundById(c),h?h._rate:d._rate;if("loaded"!==d._state)return d._queue.push({event:"rate",action:function(){d.rate.apply(d,e)}}),d;void 0===c&&(d._rate=a),c=d._getSoundIds(c);for(var i=0;i<c.length;i++)if(h=d._soundById(c[i])){h._rateSeek=d.seek(c[i]),h._playStart=d._webAudio?b.ctx.currentTime:h._playStart,h._rate=a,d._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.value=a:h._node&&(h._node.playbackRate=a);var j=d.seek(c[i]),k=(d._sprite[h._sprite][0]+d._sprite[h._sprite][1])/1e3-j,l=1e3*k/Math.abs(h._rate);!d._endTimers[c[i]]&&h._paused||(d._clearTimer(c[i]),d._endTimers[c[i]]=setTimeout(d._ended.bind(d,h),l)),d._emit("rate",h._id)}return d},seek:function(){var a,c,d=this,e=arguments;if(0===e.length)c=d._sounds[0]._id;else if(1===e.length){var f=d._getSoundIds(),g=f.indexOf(e[0]);g>=0?c=parseInt(e[0],10):(c=d._sounds[0]._id,a=parseFloat(e[0]))}else 2===e.length&&(a=parseFloat(e[0]),c=parseInt(e[1],10));if(void 0===c)return d;if("loaded"!==d._state)return d._queue.push({event:"seek",action:function(){d.seek.apply(d,e)}}),d;var h=d._soundById(c);if(h){if(!("number"==typeof a&&a>=0)){if(d._webAudio){var i=d.playing(c)?b.ctx.currentTime-h._playStart:0,j=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(j+i*Math.abs(h._rate))}return h._node.currentTime}var k=d.playing(c);k&&d.pause(c,!0),h._seek=a,h._ended=!1,d._clearTimer(c),k&&d.play(c,!0),!d._webAudio&&h._node&&(h._node.currentTime=a),d._emit("seek",c)}return d},playing:function(a){var b=this;if("number"==typeof a){var c=b._soundById(a);return!!c&&!c._paused}for(var d=0;d<b._sounds.length;d++)if(!b._sounds[d]._paused)return!0;return!1},duration:function(a){var b=this,c=b._duration,d=b._soundById(a);return d&&(c=b._sprite[d._sprite][1]/1e3),c},state:function(){return this._state},unload:function(){for(var a=this,c=a._sounds,d=0;d<c.length;d++){c[d]._paused||a.stop(c[d]._id),a._webAudio||(c[d]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",c[d]._node.removeEventListener("error",c[d]._errorFn,!1),c[d]._node.removeEventListener(b._canPlayEvent,c[d]._loadFn,!1)),delete c[d]._node,a._clearTimer(c[d]._id);var f=b._howls.indexOf(a);f>=0&&b._howls.splice(f,1)}var g=!0;for(d=0;d<b._howls.length;d++)if(b._howls[d]._src===a._src){g=!1;break}return e&&g&&delete e[a._src],b.noAudio=!1,a._state="unloaded",a._sounds=[],a=null,null},on:function(a,b,c,d){var e=this,f=e["_on"+a];return"function"==typeof b&&f.push(d?{id:c,fn:b,once:d}:{id:c,fn:b}),e},off:function(a,b,c){var d=this,e=d["_on"+a],f=0;if(b){for(f=0;f<e.length;f++)if(b===e[f].fn&&c===e[f].id){e.splice(f,1);break}}else if(a)d["_on"+a]=[];else{var g=Object.keys(d);for(f=0;f<g.length;f++)0===g[f].indexOf("_on")&&Array.isArray(d[g[f]])&&(d[g[f]]=[])}return d},once:function(a,b,c){var d=this;return d.on(a,b,c,1),d},_emit:function(a,b,c){for(var d=this,e=d["_on"+a],f=e.length-1;f>=0;f--)e[f].id&&e[f].id!==b&&"load"!==a||(setTimeout(function(a){a.call(this,b,c)}.bind(d,e[f].fn),0),e[f].once&&d.off(a,e[f].fn,e[f].id));return d},_loadQueue:function(){var a=this;if(a._queue.length>0){var b=a._queue[0];a.once(b.event,function(){a._queue.shift(),a._loadQueue()}),b.action()}return a},_ended:function(a){var c=this,d=a._sprite,e=!(!a._loop&&!c._sprite[d][2]);if(c._emit("end",a._id),!c._webAudio&&e&&c.stop(a._id,!0).play(a._id),c._webAudio&&e){c._emit("play",a._id),a._seek=a._start||0,a._rateSeek=0,a._playStart=b.ctx.currentTime;var f=1e3*(a._stop-a._start)/Math.abs(a._rate);c._endTimers[a._id]=setTimeout(c._ended.bind(c,a),f)}return c._webAudio&&!e&&(a._paused=!0,a._ended=!0,a._seek=a._start||0,a._rateSeek=0,c._clearTimer(a._id),c._cleanBuffer(a._node),b._autoSuspend()),c._webAudio||e||c.stop(a._id),c},_clearTimer:function(a){var b=this;return b._endTimers[a]&&(clearTimeout(b._endTimers[a]),delete b._endTimers[a]),b},_soundById:function(a){for(var b=this,c=0;c<b._sounds.length;c++)if(a===b._sounds[c]._id)return b._sounds[c];return null},_inactiveSound:function(){var a=this;a._drain();for(var b=0;b<a._sounds.length;b++)if(a._sounds[b]._ended)return a._sounds[b].reset();return new d(a)},_drain:function(){var a=this,b=a._pool,c=0,d=0;if(!(a._sounds.length<b)){for(d=0;d<a._sounds.length;d++)a._sounds[d]._ended&&c++;for(d=a._sounds.length-1;d>=0;d--){if(c<=b)return;a._sounds[d]._ended&&(a._webAudio&&a._sounds[d]._node&&a._sounds[d]._node.disconnect(0),a._sounds.splice(d,1),c--)}}},_getSoundIds:function(a){var b=this;if(void 0===a){for(var c=[],d=0;d<b._sounds.length;d++)c.push(b._sounds[d]._id);return c}return[a]},_refreshBuffer:function(a){var c=this;return a._node.bufferSource=b.ctx.createBufferSource(),a._node.bufferSource.buffer=e[c._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop),a._node.bufferSource.playbackRate.value=a._rate,c},_cleanBuffer:function(a){var b=this;if(b._scratchBuffer){a.bufferSource.onended=null,a.bufferSource.disconnect(0);try{a.bufferSource.buffer=b._scratchBuffer}catch(a){}}return a.bufferSource=null,b}};var d=function(a){this._parent=a,this.init()};d.prototype={init:function(){var a=this,c=a._parent;return a._muted=c._muted,a._loop=c._loop,a._volume=c._volume,a._muted=c._muted,a._rate=c._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++b._counter,c._sounds.push(a),a.create(),a},create:function(){var a=this,c=a._parent,d=b._muted||a._muted||a._parent._muted?0:a._volume;return c._webAudio?(a._node=void 0===b.ctx.createGain?b.ctx.createGainNode():b.ctx.createGain(),a._node.gain.setValueAtTime(d,b.ctx.currentTime),a._node.paused=!0,a._node.connect(b.masterGain)):(a._node=new Audio,a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener(b._canPlayEvent,a._loadFn,!1),a._node.src=c._src,a._node.preload="auto",a._node.volume=d*b.volume(),a._node.load()),a},reset:function(){var a=this,c=a._parent;return a._muted=c._muted,a._loop=c._loop,a._volume=c._volume,a._muted=c._muted,a._rate=c._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++b._counter,a},_errorListener:function(){var a=this;a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorListener,!1)},_loadListener:function(){var a=this,c=a._parent;c._duration=Math.ceil(10*a._node.duration)/10,0===Object.keys(c._sprite).length&&(c._sprite={__default:[0,1e3*c._duration]}),"loaded"!==c._state&&(c._state="loaded",c._emit("load"),c._loadQueue()),a._node.removeEventListener(b._canPlayEvent,a._loadFn,!1)}};var e={},f=function(a){var b=a._src;if(e[b])return a._duration=e[b].duration,void i(a);if(/^data:[^;]+;base64,/.test(b)){for(var c=atob(b.split(",")[1]),d=new Uint8Array(c.length),f=0;f<c.length;++f)d[f]=c.charCodeAt(f);h(d.buffer,a)}else{var j=new XMLHttpRequest;j.open("GET",b,!0),j.responseType="arraybuffer",j.onload=function(){var b=(j.status+"")[0];if("0"!==b&&"2"!==b&&"3"!==b)return void a._emit("loaderror",null,"Failed loading audio file with status: "+j.status+".");h(j.response,a)},j.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete e[b],a.load())},g(j)}},g=function(a){try{a.send()}catch(b){a.onerror()}},h=function(a,c){b.ctx.decodeAudioData(a,function(a){a&&c._sounds.length>0&&(e[c._src]=a,i(c,a))},function(){c._emit("loaderror",null,"Decoding audio data failed.")})},i=function(a,b){b&&!a._duration&&(a._duration=b.duration),0===Object.keys(a._sprite).length&&(a._sprite={__default:[0,1e3*a._duration]}),"loaded"!==a._state&&(a._state="loaded",a._emit("load"),a._loadQueue())},j=function(){try{"undefined"!=typeof AudioContext?b.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?b.ctx=new webkitAudioContext:b.usingWebAudio=!1}catch(a){b.usingWebAudio=!1}var a=/iP(hone|od|ad)/.test(b._navigator&&b._navigator.platform),c=b._navigator&&b._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),d=c?parseInt(c[1],10):null;if(a&&d&&d<9){var e=/safari/.test(b._navigator&&b._navigator.userAgent.toLowerCase());(b._navigator&&b._navigator.standalone&&!e||b._navigator&&!b._navigator.standalone&&!e)&&(b.usingWebAudio=!1)}b.usingWebAudio&&(b.masterGain=void 0===b.ctx.createGain?b.ctx.createGainNode():b.ctx.createGain(),b.masterGain.gain.value=1,b.masterGain.connect(b.ctx.destination)),b._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:b,Howl:c}}),"undefined"!=typeof exports&&(exports.Howler=b,exports.Howl=c),"undefined"!=typeof window?(window.HowlerGlobal=a,window.Howler=b,window.Howl=c,window.Sound=d):"undefined"!=typeof global&&(global.HowlerGlobal=a,global.Howler=b,global.Howl=c,global.Sound=d)}(),function(){function a(a,b){return a.set(b[0],b[1]),a}function b(a,b){return a.add(b),a}function c(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function d(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function e(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&!1!==b(a[c],c,a););return a}function f(a,b){for(var c=null==a?0:a.length;c--&&!1!==b(a[c],c,a););return a}function g(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function h(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function i(a,b){return!!(null==a?0:a.length)&&t(a,b,0)>-1}function j(a,b,c){for(var d=-1,e=null==a?0:a.length;++d<e;)if(c(b,a[d]))return!0;return!1}function k(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function l(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function m(a,b,c,d){var e=-1,f=null==a?0:a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function n(a,b,c,d){var e=null==a?0:a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function o(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function p(a){return a.split("")}function q(a){return a.match(Mb)||[]}function r(a,b,c){var d;return c(a,function(a,c,e){if(b(a,c,e))return d=c,!1}),d}function s(a,b,c,d){for(var e=a.length,f=c+(d?1:-1);d?f--:++f<e;)if(b(a[f],f,a))return f;return-1}function t(a,b,c){return b===b?U(a,b,c):s(a,v,c)}function u(a,b,c,d){for(var e=c-1,f=a.length;++e<f;)if(d(a[e],b))return e;return-1}function v(a){return a!==a}function w(a,b){var c=null==a?0:a.length;return c?B(a,b)/c:Ga}function x(a){return function(b){return null==b?_:b[a]}}function y(a){return function(b){return null==a?_:a[b]}}function z(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function A(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function B(a,b){for(var c,d=-1,e=a.length;++d<e;){var f=b(a[d]);f!==_&&(c=c===_?f:c+f)}return c}function C(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function D(a,b){return k(b,function(b){return[b,a[b]]})}function E(a){return function(b){return a(b)}}function F(a,b){return k(b,function(b){return a[b]})}function G(a,b){return a.has(b)}function H(a,b){for(var c=-1,d=a.length;++c<d&&t(b,a[c],0)>-1;);return c}function I(a,b){for(var c=a.length;c--&&t(b,a[c],0)>-1;);return c}function J(a,b){for(var c=a.length,d=0;c--;)a[c]===b&&++d;return d}function K(a){return"\\"+Yc[a]}function L(a,b){return null==a?_:a[b]}function M(a){return Pc.test(a)}function N(a){return Qc.test(a)}function O(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function P(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function Q(a,b){return function(c){return a(b(c))}}function R(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];g!==b&&g!==ga||(a[c]=ga,f[e++]=c)}return f}function S(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function T(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=[a,a]}),c}function U(a,b,c){for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function V(a,b,c){for(var d=c+1;d--;)if(a[d]===b)return d;return d}function W(a){return M(a)?Y(a):nd(a)}function X(a){return M(a)?Z(a):p(a)}function Y(a){for(var b=Nc.lastIndex=0;Nc.test(a);)++b;return b}function Z(a){return a.match(Nc)||[]}function $(a){return a.match(Oc)||[]}var _,aa="4.17.4",ba=200,ca="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",da="Expected a function",ea="__lodash_hash_undefined__",fa=500,ga="__lodash_placeholder__",ha=1,ia=2,ja=4,ka=1,la=2,ma=1,na=2,oa=4,pa=8,qa=16,ra=32,sa=64,ta=128,ua=256,va=512,wa=30,xa="...",ya=800,za=16,Aa=1,Ba=2,Ca=3,Da=1/0,Ea=9007199254740991,Fa=1.7976931348623157e308,Ga=NaN,Ha=4294967295,Ia=Ha-1,Ja=Ha>>>1,Ka=[["ary",ta],["bind",ma],["bindKey",na],["curry",pa],["curryRight",qa],["flip",va],["partial",ra],["partialRight",sa],["rearg",ua]],La="[object Arguments]",Ma="[object Array]",Na="[object AsyncFunction]",Oa="[object Boolean]",Pa="[object Date]",Qa="[object DOMException]",Ra="[object Error]",Sa="[object Function]",Ta="[object GeneratorFunction]",Ua="[object Map]",Va="[object Number]",Wa="[object Null]",Xa="[object Object]",Ya="[object Promise]",Za="[object Proxy]",$a="[object RegExp]",_a="[object Set]",ab="[object String]",bb="[object Symbol]",cb="[object Undefined]",db="[object WeakMap]",eb="[object WeakSet]",fb="[object ArrayBuffer]",gb="[object DataView]",hb="[object Float32Array]",ib="[object Float64Array]",jb="[object Int8Array]",kb="[object Int16Array]",lb="[object Int32Array]",mb="[object Uint8Array]",nb="[object Uint8ClampedArray]",ob="[object Uint16Array]",pb="[object Uint32Array]",qb=/\b__p \+= '';/g,rb=/\b(__p \+=) '' \+/g,sb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,tb=/&(?:amp|lt|gt|quot|#39);/g,ub=/[&<>"']/g,vb=RegExp(tb.source),wb=RegExp(ub.source),xb=/<%-([\s\S]+?)%>/g,yb=/<%([\s\S]+?)%>/g,zb=/<%=([\s\S]+?)%>/g,Ab=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bb=/^\w*$/,Cb=/^\./,Db=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Eb=/[\\^$.*+?()[\]{}|]/g,Fb=RegExp(Eb.source),Gb=/^\s+|\s+$/g,Hb=/^\s+/,Ib=/\s+$/,Jb=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Kb=/\{\n\/\* \[wrapped with (.+)\] \*/,Lb=/,? & /,Mb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nb=/\\(\\)?/g,Ob=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pb=/\w*$/,Qb=/^[-+]0x[0-9a-f]+$/i,Rb=/^0b[01]+$/i,Sb=/^\[object .+?Constructor\]$/,Tb=/^0o[0-7]+$/i,Ub=/^(?:0|[1-9]\d*)$/,Vb=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wb=/($^)/,Xb=/['\n\r\u2028\u2029\\]/g,Yb="\\ud800-\\udfff",Zb="\\u0300-\\u036f",$b="\\ufe20-\\ufe2f",_b="\\u20d0-\\u20ff",ac=Zb+$b+_b,bc="\\u2700-\\u27bf",cc="a-z\\xdf-\\xf6\\xf8-\\xff",dc="\\xac\\xb1\\xd7\\xf7",ec="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fc="\\u2000-\\u206f",gc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hc="A-Z\\xc0-\\xd6\\xd8-\\xde",ic="\\ufe0e\\ufe0f",jc=dc+ec+fc+gc,kc="['’]",lc="["+Yb+"]",mc="["+jc+"]",nc="["+ac+"]",oc="\\d+",pc="["+bc+"]",qc="["+cc+"]",rc="[^"+Yb+jc+oc+bc+cc+hc+"]",sc="\\ud83c[\\udffb-\\udfff]",tc="(?:"+nc+"|"+sc+")",uc="[^"+Yb+"]",vc="(?:\\ud83c[\\udde6-\\uddff]){2}",wc="[\\ud800-\\udbff][\\udc00-\\udfff]",xc="["+hc+"]",yc="\\u200d",zc="(?:"+qc+"|"+rc+")",Ac="(?:"+xc+"|"+rc+")",Bc="(?:"+kc+"(?:d|ll|m|re|s|t|ve))?",Cc="(?:"+kc+"(?:D|LL|M|RE|S|T|VE))?",Dc=tc+"?",Ec="["+ic+"]?",Fc="(?:"+yc+"(?:"+[uc,vc,wc].join("|")+")"+Ec+Dc+")*",Gc="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Hc="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Ic=Ec+Dc+Fc,Jc="(?:"+[pc,vc,wc].join("|")+")"+Ic,Kc="(?:"+[uc+nc+"?",nc,vc,wc,lc].join("|")+")",Lc=RegExp(kc,"g"),Mc=RegExp(nc,"g"),Nc=RegExp(sc+"(?="+sc+")|"+Kc+Ic,"g"),Oc=RegExp([xc+"?"+qc+"+"+Bc+"(?="+[mc,xc,"$"].join("|")+")",Ac+"+"+Cc+"(?="+[mc,xc+zc,"$"].join("|")+")",xc+"?"+zc+"+"+Bc,xc+"+"+Cc,Hc,Gc,oc,Jc].join("|"),"g"),Pc=RegExp("["+yc+Yb+ac+ic+"]"),Qc=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Rc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Sc=-1,Tc={};Tc[hb]=Tc[ib]=Tc[jb]=Tc[kb]=Tc[lb]=Tc[mb]=Tc[nb]=Tc[ob]=Tc[pb]=!0,Tc[La]=Tc[Ma]=Tc[fb]=Tc[Oa]=Tc[gb]=Tc[Pa]=Tc[Ra]=Tc[Sa]=Tc[Ua]=Tc[Va]=Tc[Xa]=Tc[$a]=Tc[_a]=Tc[ab]=Tc[db]=!1;var Uc={};Uc[La]=Uc[Ma]=Uc[fb]=Uc[gb]=Uc[Oa]=Uc[Pa]=Uc[hb]=Uc[ib]=Uc[jb]=Uc[kb]=Uc[lb]=Uc[Ua]=Uc[Va]=Uc[Xa]=Uc[$a]=Uc[_a]=Uc[ab]=Uc[bb]=Uc[mb]=Uc[nb]=Uc[ob]=Uc[pb]=!0,Uc[Ra]=Uc[Sa]=Uc[db]=!1;var Vc={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R",
"ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Wc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Yc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zc=parseFloat,$c=parseInt,_c="object"==typeof global&&global&&global.Object===Object&&global,ad="object"==typeof self&&self&&self.Object===Object&&self,bd=_c||ad||Function("return this")(),cd="object"==typeof exports&&exports&&!exports.nodeType&&exports,dd=cd&&"object"==typeof module&&module&&!module.nodeType&&module,ed=dd&&dd.exports===cd,fd=ed&&_c.process,gd=function(){try{return fd&&fd.binding&&fd.binding("util")}catch(a){}}(),hd=gd&&gd.isArrayBuffer,id=gd&&gd.isDate,jd=gd&&gd.isMap,kd=gd&&gd.isRegExp,ld=gd&&gd.isSet,md=gd&&gd.isTypedArray,nd=x("length"),od=y(Vc),pd=y(Wc),qd=y(Xc),rd=function p(y){function U(a){if(ii(a)&&!tm(a)&&!(a instanceof Mb)){if(a instanceof Z)return a;if(tk.call(a,"__wrapped__"))return fg(a)}return new Z(a)}function Y(){}function Z(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=_}function Mb(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ha,this.__views__=[]}function Yb(){var a=new Mb(this.__wrapped__);return a.__actions__=Ne(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Ne(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Ne(this.__views__),a}function Zb(){if(this.__filtered__){var a=new Mb(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function $b(){var a=this.__wrapped__.value(),b=this.__dir__,c=tm(a),d=b<0,e=c?a.length:0,f=Df(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=Xk(i,this.__takeCount__);if(!c||!d&&e==i&&n==i)return ue(a,this.__actions__);var o=[];a:for(;i--&&m<n;){j+=b;for(var p=-1,q=a[j];++p<l;){var r=k[p],s=r.iteratee,t=r.type,u=s(q);if(t==Ba)q=u;else if(!u){if(t==Aa)continue a;break a}}o[m++]=q}return o}function _b(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function ac(){this.__data__=fl?fl(null):{},this.size=0}function bc(a){var b=this.has(a)&&delete this.__data__[a];return this.size-=b?1:0,b}function cc(a){var b=this.__data__;if(fl){var c=b[a];return c===ea?_:c}return tk.call(b,a)?b[a]:_}function dc(a){var b=this.__data__;return fl?b[a]!==_:tk.call(b,a)}function ec(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=fl&&b===_?ea:b,this}function fc(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function gc(){this.__data__=[],this.size=0}function hc(a){var b=this.__data__,c=Gc(b,a);return!(c<0)&&(c==b.length-1?b.pop():Hk.call(b,c,1),--this.size,!0)}function ic(a){var b=this.__data__,c=Gc(b,a);return c<0?_:b[c][1]}function jc(a){return Gc(this.__data__,a)>-1}function kc(a,b){var c=this.__data__,d=Gc(c,a);return d<0?(++this.size,c.push([a,b])):c[d][1]=b,this}function lc(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function mc(){this.size=0,this.__data__={hash:new _b,map:new(bl||fc),string:new _b}}function nc(a){var b=zf(this,a).delete(a);return this.size-=b?1:0,b}function oc(a){return zf(this,a).get(a)}function pc(a){return zf(this,a).has(a)}function qc(a,b){var c=zf(this,a),d=c.size;return c.set(a,b),this.size+=c.size==d?0:1,this}function rc(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new lc;++b<c;)this.add(a[b])}function sc(a){return this.__data__.set(a,ea),this}function tc(a){return this.__data__.has(a)}function uc(a){var b=this.__data__=new fc(a);this.size=b.size}function vc(){this.__data__=new fc,this.size=0}function wc(a){var b=this.__data__,c=b.delete(a);return this.size=b.size,c}function xc(a){return this.__data__.get(a)}function yc(a){return this.__data__.has(a)}function zc(a,b){var c=this.__data__;if(c instanceof fc){var d=c.__data__;if(!bl||d.length<ba-1)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new lc(d)}return c.set(a,b),this.size=c.size,this}function Ac(a,b){var c=tm(a),d=!c&&sm(a),e=!c&&!d&&vm(a),f=!c&&!d&&!e&&Am(a),g=c||d||e||f,h=g?C(a.length,mk):[],i=h.length;for(var j in a)!b&&!tk.call(a,j)||g&&("length"==j||e&&("offset"==j||"parent"==j)||f&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||Lf(j,i))||h.push(j);return h}function Bc(a){var b=a.length;return b?a[be(0,b-1)]:_}function Cc(a,b){return bg(Ne(a),Oc(b,0,a.length))}function Dc(a){return bg(Ne(a))}function Ec(a,b,c){(c===_||Wh(a[b],c))&&(c!==_||b in a)||Kc(a,b,c)}function Fc(a,b,c){var d=a[b];tk.call(a,b)&&Wh(d,c)&&(c!==_||b in a)||Kc(a,b,c)}function Gc(a,b){for(var c=a.length;c--;)if(Wh(a[c][0],b))return c;return-1}function Hc(a,b,c,d){return rl(a,function(a,e,f){b(d,a,c(a),f)}),d}function Ic(a,b){return a&&Oe(b,Ri(b),a)}function Jc(a,b){return a&&Oe(b,Si(b),a)}function Kc(a,b,c){"__proto__"==b&&Lk?Lk(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}function Nc(a,b){for(var c=-1,d=b.length,e=fk(d),f=null==a;++c<d;)e[c]=f?_:Oi(a,b[c]);return e}function Oc(a,b,c){return a===a&&(c!==_&&(a=a<=c?a:c),b!==_&&(a=a>=b?a:b)),a}function Pc(a,b,c,d,f,g){var h,i=b&ha,j=b&ia,k=b&ja;if(c&&(h=f?c(a,d,f,g):c(a)),h!==_)return h;if(!hi(a))return a;var l=tm(a);if(l){if(h=Gf(a),!i)return Ne(a,h)}else{var m=Dl(a),n=m==Sa||m==Ta;if(vm(a))return Be(a,i);if(m==Xa||m==La||n&&!f){if(h=j||n?{}:Hf(a),!i)return j?Qe(a,Jc(h,a)):Pe(a,Ic(h,a))}else{if(!Uc[m])return f?a:{};h=If(a,m,Pc,i)}}g||(g=new uc);var o=g.get(a);if(o)return o;g.set(a,h);var p=k?j?vf:uf:j?Si:Ri,q=l?_:p(a);return e(q||a,function(d,e){q&&(e=d,d=a[e]),Fc(h,e,Pc(d,b,c,e,a,g))}),h}function Qc(a){var b=Ri(a);return function(c){return Vc(c,a,b)}}function Vc(a,b,c){var d=c.length;if(null==a)return!d;for(a=kk(a);d--;){var e=c[d],f=b[e],g=a[e];if(g===_&&!(e in a)||!f(g))return!1}return!0}function Wc(a,b,c){if("function"!=typeof a)throw new nk(da);return Gl(function(){a.apply(_,c)},b)}function Xc(a,b,c,d){var e=-1,f=i,g=!0,h=a.length,l=[],m=b.length;if(!h)return l;c&&(b=k(b,E(c))),d?(f=j,g=!1):b.length>=ba&&(f=G,g=!1,b=new rc(b));a:for(;++e<h;){var n=a[e],o=null==c?n:c(n);if(n=d||0!==n?n:0,g&&o===o){for(var p=m;p--;)if(b[p]===o)continue a;l.push(n)}else f(b,o,d)||l.push(n)}return l}function Yc(a,b){var c=!0;return rl(a,function(a,d,e){return c=!!b(a,d,e)}),c}function _c(a,b,c){for(var d=-1,e=a.length;++d<e;){var f=a[d],g=b(f);if(null!=g&&(h===_?g===g&&!ti(g):c(g,h)))var h=g,i=f}return i}function ad(a,b,c,d){var e=a.length;for(c=zi(c),c<0&&(c=-c>e?0:e+c),d=d===_||d>e?e:zi(d),d<0&&(d+=e),d=c>d?0:Ai(d);c<d;)a[c++]=b;return a}function cd(a,b){var c=[];return rl(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function dd(a,b,c,d,e){var f=-1,g=a.length;for(c||(c=Kf),e||(e=[]);++f<g;){var h=a[f];b>0&&c(h)?b>1?dd(h,b-1,c,d,e):l(e,h):d||(e[e.length]=h)}return e}function fd(a,b){return a&&tl(a,b,Ri)}function gd(a,b){return a&&ul(a,b,Ri)}function nd(a,b){return h(b,function(b){return ei(a[b])})}function rd(a,b){b=ze(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[cg(b[c++])];return c&&c==d?a:_}function td(a,b,c){var d=b(a);return tm(a)?d:l(d,c(a))}function ud(a){return null==a?a===_?cb:Wa:Kk&&Kk in kk(a)?Cf(a):Xf(a)}function vd(a,b){return a>b}function wd(a,b){return null!=a&&tk.call(a,b)}function xd(a,b){return null!=a&&b in kk(a)}function yd(a,b,c){return a>=Xk(b,c)&&a<Wk(b,c)}function zd(a,b,c){for(var d=c?j:i,e=a[0].length,f=a.length,g=f,h=fk(f),l=1/0,m=[];g--;){var n=a[g];g&&b&&(n=k(n,E(b))),l=Xk(n.length,l),h[g]=!c&&(b||e>=120&&n.length>=120)?new rc(g&&n):_}n=a[0];var o=-1,p=h[0];a:for(;++o<e&&m.length<l;){var q=n[o],r=b?b(q):q;if(q=c||0!==q?q:0,!(p?G(p,r):d(m,r,c))){for(g=f;--g;){var s=h[g];if(!(s?G(s,r):d(a[g],r,c)))continue a}p&&p.push(r),m.push(q)}}return m}function Ad(a,b,c,d){return fd(a,function(a,e,f){b(d,c(a),e,f)}),d}function Bd(a,b,d){b=ze(b,a),a=Zf(a,b);var e=null==a?a:a[cg(yg(b))];return null==e?_:c(e,a,d)}function Cd(a){return ii(a)&&ud(a)==La}function Dd(a){return ii(a)&&ud(a)==fb}function Ed(a){return ii(a)&&ud(a)==Pa}function Fd(a,b,c,d,e){return a===b||(null==a||null==b||!ii(a)&&!ii(b)?a!==a&&b!==b:Gd(a,b,c,d,Fd,e))}function Gd(a,b,c,d,e,f){var g=tm(a),h=tm(b),i=g?Ma:Dl(a),j=h?Ma:Dl(b);i=i==La?Xa:i,j=j==La?Xa:j;var k=i==Xa,l=j==Xa,m=i==j;if(m&&vm(a)){if(!vm(b))return!1;g=!0,k=!1}if(m&&!k)return f||(f=new uc),g||Am(a)?qf(a,b,c,d,e,f):rf(a,b,i,c,d,e,f);if(!(c&ka)){var n=k&&tk.call(a,"__wrapped__"),o=l&&tk.call(b,"__wrapped__");if(n||o){var p=n?a.value():a,q=o?b.value():b;return f||(f=new uc),e(p,q,c,d,f)}}return!!m&&(f||(f=new uc),sf(a,b,c,d,e,f))}function Hd(a){return ii(a)&&Dl(a)==Ua}function Id(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=kk(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){h=c[e];var i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(j===_&&!(i in a))return!1}else{var l=new uc;if(d)var m=d(j,k,i,a,b,l);if(!(m===_?Fd(k,j,ka|la,d,l):m))return!1}}return!0}function Jd(a){return!(!hi(a)||Qf(a))&&(ei(a)?zk:Sb).test(dg(a))}function Kd(a){return ii(a)&&ud(a)==$a}function Ld(a){return ii(a)&&Dl(a)==_a}function Md(a){return ii(a)&&gi(a.length)&&!!Tc[ud(a)]}function Nd(a){return"function"==typeof a?a:null==a?Hj:"object"==typeof a?tm(a)?Td(a[0],a[1]):Sd(a):Pj(a)}function Od(a){if(!Rf(a))return Vk(a);var b=[];for(var c in kk(a))tk.call(a,c)&&"constructor"!=c&&b.push(c);return b}function Pd(a){if(!hi(a))return Wf(a);var b=Rf(a),c=[];for(var d in a)("constructor"!=d||!b&&tk.call(a,d))&&c.push(d);return c}function Qd(a,b){return a<b}function Rd(a,b){var c=-1,d=Xh(a)?fk(a.length):[];return rl(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Sd(a){var b=Af(a);return 1==b.length&&b[0][2]?Tf(b[0][0],b[0][1]):function(c){return c===a||Id(c,a,b)}}function Td(a,b){return Nf(a)&&Sf(b)?Tf(cg(a),b):function(c){var d=Oi(c,a);return d===_&&d===b?Qi(c,a):Fd(b,d,ka|la)}}function Ud(a,b,c,d,e){a!==b&&tl(b,function(f,g){if(hi(f))e||(e=new uc),Vd(a,b,g,c,Ud,d,e);else{var h=d?d(a[g],f,g+"",a,b,e):_;h===_&&(h=f),Ec(a,g,h)}},Si)}function Vd(a,b,c,d,e,f,g){var h=a[c],i=b[c],j=g.get(i);if(j)return void Ec(a,c,j);var k=f?f(h,i,c+"",a,b,g):_,l=k===_;if(l){var m=tm(i),n=!m&&vm(i),o=!m&&!n&&Am(i);k=i,m||n||o?tm(h)?k=h:Yh(h)?k=Ne(h):n?(l=!1,k=Be(i,!0)):o?(l=!1,k=Ie(i,!0)):k=[]:qi(i)||sm(i)?(k=h,sm(h)?k=Ci(h):(!hi(h)||d&&ei(h))&&(k=Hf(i))):l=!1}l&&(g.set(i,k),e(k,i,d,f,g),g.delete(i)),Ec(a,c,k)}function Wd(a,b){var c=a.length;if(c)return b+=b<0?c:0,Lf(b,c)?a[b]:_}function Xd(a,b,c){var d=-1;return b=k(b.length?b:[Hj],E(yf())),A(Rd(a,function(a,c,e){return{criteria:k(b,function(b){return b(a)}),index:++d,value:a}}),function(a,b){return Ke(a,b,c)})}function Yd(a,b){return Zd(a,b,function(b,c){return Qi(a,c)})}function Zd(a,b,c){for(var d=-1,e=b.length,f={};++d<e;){var g=b[d],h=rd(a,g);c(h,g)&&he(f,ze(g,a),h)}return f}function $d(a){return function(b){return rd(b,a)}}function _d(a,b,c,d){var e=d?u:t,f=-1,g=b.length,h=a;for(a===b&&(b=Ne(b)),c&&(h=k(a,E(c)));++f<g;)for(var i=0,j=b[f],l=c?c(j):j;(i=e(h,l,i,d))>-1;)h!==a&&Hk.call(h,i,1),Hk.call(a,i,1);return a}function ae(a,b){for(var c=a?b.length:0,d=c-1;c--;){var e=b[c];if(c==d||e!==f){var f=e;Lf(e)?Hk.call(a,e,1):re(a,e)}}return a}function be(a,b){return a+Qk($k()*(b-a+1))}function ce(a,b,c,d){for(var e=-1,f=Wk(Pk((b-a)/(c||1)),0),g=fk(f);f--;)g[d?f:++e]=a,a+=c;return g}function de(a,b){var c="";if(!a||b<1||b>Ea)return c;do{b%2&&(c+=a),(b=Qk(b/2))&&(a+=a)}while(b);return c}function ee(a,b){return Hl(Yf(a,b,Hj),a+"")}function fe(a){return Bc(cj(a))}function ge(a,b){var c=cj(a);return bg(c,Oc(b,0,c.length))}function he(a,b,c,d){if(!hi(a))return a;b=ze(b,a);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=cg(b[e]),j=c;if(e!=g){var k=h[i];j=d?d(k,i,h):_,j===_&&(j=hi(k)?k:Lf(b[e+1])?[]:{})}Fc(h,i,j),h=h[i]}return a}function ie(a){return bg(cj(a))}function je(a,b,c){var d=-1,e=a.length;b<0&&(b=-b>e?0:e+b),c=c>e?e:c,c<0&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=fk(e);++d<e;)f[d]=a[d+b];return f}function ke(a,b){var c;return rl(a,function(a,d,e){return!(c=b(a,d,e))}),!!c}function le(a,b,c){var d=0,e=null==a?d:a.length;if("number"==typeof b&&b===b&&e<=Ja){for(;d<e;){var f=d+e>>>1,g=a[f];null!==g&&!ti(g)&&(c?g<=b:g<b)?d=f+1:e=f}return e}return me(a,b,Hj,c)}function me(a,b,c,d){b=c(b);for(var e=0,f=null==a?0:a.length,g=b!==b,h=null===b,i=ti(b),j=b===_;e<f;){var k=Qk((e+f)/2),l=c(a[k]),m=l!==_,n=null===l,o=l===l,p=ti(l);if(g)var q=d||o;else q=j?o&&(d||m):h?o&&m&&(d||!n):i?o&&m&&!n&&(d||!p):!n&&!p&&(d?l<=b:l<b);q?e=k+1:f=k}return Xk(f,Ia)}function ne(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c],h=b?b(g):g;if(!c||!Wh(h,i)){var i=h;f[e++]=0===g?0:g}}return f}function oe(a){return"number"==typeof a?a:ti(a)?Ga:+a}function pe(a){if("string"==typeof a)return a;if(tm(a))return k(a,pe)+"";if(ti(a))return pl?pl.call(a):"";var b=a+"";return"0"==b&&1/a==-Da?"-0":b}function qe(a,b,c){var d=-1,e=i,f=a.length,g=!0,h=[],k=h;if(c)g=!1,e=j;else if(f>=ba){var l=b?null:zl(a);if(l)return S(l);g=!1,e=G,k=new rc}else k=b?[]:h;a:for(;++d<f;){var m=a[d],n=b?b(m):m;if(m=c||0!==m?m:0,g&&n===n){for(var o=k.length;o--;)if(k[o]===n)continue a;b&&k.push(n),h.push(m)}else e(k,n,c)||(k!==h&&k.push(n),h.push(m))}return h}function re(a,b){return b=ze(b,a),null==(a=Zf(a,b))||delete a[cg(yg(b))]}function se(a,b,c,d){return he(a,b,c(rd(a,b)),d)}function te(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?je(a,d?0:f,d?f+1:e):je(a,d?f+1:0,d?e:f)}function ue(a,b){var c=a;return c instanceof Mb&&(c=c.value()),m(b,function(a,b){return b.func.apply(b.thisArg,l([a],b.args))},c)}function ve(a,b,c){var d=a.length;if(d<2)return d?qe(a[0]):[];for(var e=-1,f=fk(d);++e<d;)for(var g=a[e],h=-1;++h<d;)h!=e&&(f[e]=Xc(f[e]||g,a[h],b,c));return qe(dd(f,1),b,c)}function we(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;){var h=d<f?b[d]:_;c(g,a[d],h)}return g}function xe(a){return Yh(a)?a:[]}function ye(a){return"function"==typeof a?a:Hj}function ze(a,b){return tm(a)?a:Nf(a,b)?[a]:Il(Ei(a))}function Ae(a,b,c){var d=a.length;return c=c===_?d:c,!b&&c>=d?a:je(a,b,c)}function Be(a,b){if(b)return a.slice();var c=a.length,d=Dk?Dk(c):new a.constructor(c);return a.copy(d),d}function Ce(a){var b=new a.constructor(a.byteLength);return new Ck(b).set(new Ck(a)),b}function De(a,b){var c=b?Ce(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}function Ee(b,c,d){return m(c?d(P(b),ha):P(b),a,new b.constructor)}function Fe(a){var b=new a.constructor(a.source,Pb.exec(a));return b.lastIndex=a.lastIndex,b}function Ge(a,c,d){return m(c?d(S(a),ha):S(a),b,new a.constructor)}function He(a){return ol?kk(ol.call(a)):{}}function Ie(a,b){var c=b?Ce(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}function Je(a,b){if(a!==b){var c=a!==_,d=null===a,e=a===a,f=ti(a),g=b!==_,h=null===b,i=b===b,j=ti(b);if(!h&&!j&&!f&&a>b||f&&g&&i&&!h&&!j||d&&g&&i||!c&&i||!e)return 1;if(!d&&!f&&!j&&a<b||j&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!i)return-1}return 0}function Ke(a,b,c){for(var d=-1,e=a.criteria,f=b.criteria,g=e.length,h=c.length;++d<g;){var i=Je(e[d],f[d]);if(i){if(d>=h)return i;return i*("desc"==c[d]?-1:1)}}return a.index-b.index}function Le(a,b,c,d){for(var e=-1,f=a.length,g=c.length,h=-1,i=b.length,j=Wk(f-g,0),k=fk(i+j),l=!d;++h<i;)k[h]=b[h];for(;++e<g;)(l||e<f)&&(k[c[e]]=a[e]);for(;j--;)k[h++]=a[e++];return k}function Me(a,b,c,d){for(var e=-1,f=a.length,g=-1,h=c.length,i=-1,j=b.length,k=Wk(f-h,0),l=fk(k+j),m=!d;++e<k;)l[e]=a[e];for(var n=e;++i<j;)l[n+i]=b[i];for(;++g<h;)(m||e<f)&&(l[n+c[g]]=a[e++]);return l}function Ne(a,b){var c=-1,d=a.length;for(b||(b=fk(d));++c<d;)b[c]=a[c];return b}function Oe(a,b,c,d){var e=!c;c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],i=d?d(c[h],a[h],h,c,a):_;i===_&&(i=a[h]),e?Kc(c,h,i):Fc(c,h,i)}return c}function Pe(a,b){return Oe(a,Bl(a),b)}function Qe(a,b){return Oe(a,Cl(a),b)}function Re(a,b){return function(c,e){var f=tm(c)?d:Hc,g=b?b():{};return f(c,a,yf(e,2),g)}}function Se(a){return ee(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:_,g=e>2?c[2]:_;for(f=a.length>3&&"function"==typeof f?(e--,f):_,g&&Mf(c[0],c[1],g)&&(f=e<3?_:f,e=1),b=kk(b);++d<e;){var h=c[d];h&&a(b,h,d,f)}return b})}function Te(a,b){return function(c,d){if(null==c)return c;if(!Xh(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=kk(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function Ue(a){return function(b,c,d){for(var e=-1,f=kk(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(!1===c(f[i],i,f))break}return b}}function Ve(a,b,c){function d(){return(this&&this!==bd&&this instanceof d?f:a).apply(e?c:this,arguments)}var e=b&ma,f=Ye(a);return d}function We(a){return function(b){b=Ei(b);var c=M(b)?X(b):_,d=c?c[0]:b.charAt(0),e=c?Ae(c,1).join(""):b.slice(1);return d[a]()+e}}function Xe(a){return function(b){return m(Cj(ij(b).replace(Lc,"")),a,"")}}function Ye(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=ql(a.prototype),d=a.apply(c,b);return hi(d)?d:c}}function Ze(a,b,d){function e(){for(var g=arguments.length,h=fk(g),i=g,j=xf(e);i--;)h[i]=arguments[i];var k=g<3&&h[0]!==j&&h[g-1]!==j?[]:R(h,j);return(g-=k.length)<d?jf(a,b,af,e.placeholder,_,h,k,_,_,d-g):c(this&&this!==bd&&this instanceof e?f:a,this,h)}var f=Ye(a);return e}function $e(a){return function(b,c,d){var e=kk(b);if(!Xh(b)){var f=yf(c,3);b=Ri(b),c=function(a){return f(e[a],a,e)}}var g=a(b,c,d);return g>-1?e[f?b[g]:g]:_}}function _e(a){return tf(function(b){var c=b.length,d=c,e=Z.prototype.thru;for(a&&b.reverse();d--;){var f=b[d];if("function"!=typeof f)throw new nk(da);if(e&&!g&&"wrapper"==wf(f))var g=new Z([],!0)}for(d=g?d:c;++d<c;){f=b[d];var h=wf(f),i="wrapper"==h?Al(f):_;g=i&&Pf(i[0])&&i[1]==(ta|pa|ra|ua)&&!i[4].length&&1==i[9]?g[wf(i[0])].apply(g,i[3]):1==f.length&&Pf(f)?g[h]():g.thru(f)}return function(){var a=arguments,d=a[0];if(g&&1==a.length&&tm(d))return g.plant(d).value();for(var e=0,f=c?b[e].apply(this,a):d;++e<c;)f=b[e].call(this,f);return f}})}function af(a,b,c,d,e,f,g,h,i,j){function k(){for(var r=arguments.length,s=fk(r),t=r;t--;)s[t]=arguments[t];if(o)var u=xf(k),v=J(s,u);if(d&&(s=Le(s,d,e,o)),f&&(s=Me(s,f,g,o)),r-=v,o&&r<j){var w=R(s,u);return jf(a,b,af,k.placeholder,c,s,w,h,i,j-r)}var x=m?c:this,y=n?x[a]:a;return r=s.length,h?s=$f(s,h):p&&r>1&&s.reverse(),l&&i<r&&(s.length=i),this&&this!==bd&&this instanceof k&&(y=q||Ye(y)),y.apply(x,s)}var l=b&ta,m=b&ma,n=b&na,o=b&(pa|qa),p=b&va,q=n?_:Ye(a);return k}function bf(a,b){return function(c,d){return Ad(c,a,b(d),{})}}function cf(a,b){return function(c,d){var e;if(c===_&&d===_)return b;if(c!==_&&(e=c),d!==_){if(e===_)return d;"string"==typeof c||"string"==typeof d?(c=pe(c),d=pe(d)):(c=oe(c),d=oe(d)),e=a(c,d)}return e}}function df(a){return tf(function(b){return b=k(b,E(yf())),ee(function(d){var e=this;return a(b,function(a){return c(a,e,d)})})})}function ef(a,b){b=b===_?" ":pe(b);var c=b.length;if(c<2)return c?de(b,a):b;var d=de(b,Pk(a/W(b)));return M(b)?Ae(X(d),0,a).join(""):d.slice(0,a)}function ff(a,b,d,e){function f(){for(var b=-1,i=arguments.length,j=-1,k=e.length,l=fk(k+i),m=this&&this!==bd&&this instanceof f?h:a;++j<k;)l[j]=e[j];for(;i--;)l[j++]=arguments[++b];return c(m,g?d:this,l)}var g=b&ma,h=Ye(a);return f}function gf(a){return function(b,c,d){return d&&"number"!=typeof d&&Mf(b,c,d)&&(c=d=_),b=yi(b),c===_?(c=b,b=0):c=yi(c),d=d===_?b<c?1:-1:yi(d),ce(b,c,d,a)}}function hf(a){return function(b,c){return"string"==typeof b&&"string"==typeof c||(b=Bi(b),c=Bi(c)),a(b,c)}}function jf(a,b,c,d,e,f,g,h,i,j){var k=b&pa,l=k?g:_,m=k?_:g,n=k?f:_,o=k?_:f;b|=k?ra:sa,(b&=~(k?sa:ra))&oa||(b&=~(ma|na));var p=[a,b,e,n,l,o,m,h,i,j],q=c.apply(_,p);return Pf(a)&&Fl(q,p),q.placeholder=d,_f(q,a,b)}function kf(a){var b=jk[a];return function(a,c){if(a=Bi(a),c=null==c?0:Xk(zi(c),292)){var d=(Ei(a)+"e").split("e");return d=(Ei(b(d[0]+"e"+(+d[1]+c)))+"e").split("e"),+(d[0]+"e"+(+d[1]-c))}return b(a)}}function lf(a){return function(b){var c=Dl(b);return c==Ua?P(b):c==_a?T(b):D(b,a(b))}}function mf(a,b,c,d,e,f,g,h){var i=b&na;if(!i&&"function"!=typeof a)throw new nk(da);var j=d?d.length:0;if(j||(b&=~(ra|sa),d=e=_),g=g===_?g:Wk(zi(g),0),h=h===_?h:zi(h),j-=e?e.length:0,b&sa){var k=d,l=e;d=e=_}var m=i?_:Al(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&Vf(n,m),a=n[0],b=n[1],c=n[2],d=n[3],e=n[4],h=n[9]=n[9]===_?i?0:a.length:Wk(n[9]-j,0),!h&&b&(pa|qa)&&(b&=~(pa|qa)),b&&b!=ma)o=b==pa||b==qa?Ze(a,b,h):b!=ra&&b!=(ma|ra)||e.length?af.apply(_,n):ff(a,b,c,d);else var o=Ve(a,b,c);return _f((m?vl:Fl)(o,n),a,b)}function nf(a,b,c,d){return a===_||Wh(a,qk[c])&&!tk.call(d,c)?b:a}function of(a,b,c,d,e,f){return hi(a)&&hi(b)&&(f.set(b,a),Ud(a,b,_,of,f),f.delete(b)),a}function pf(a){return qi(a)?_:a}function qf(a,b,c,d,e,f){var g=c&ka,h=a.length,i=b.length;if(h!=i&&!(g&&i>h))return!1;var j=f.get(a);if(j&&f.get(b))return j==b;var k=-1,l=!0,m=c&la?new rc:_;for(f.set(a,b),f.set(b,a);++k<h;){var n=a[k],p=b[k];if(d)var q=g?d(p,n,k,b,a,f):d(n,p,k,a,b,f);if(q!==_){if(q)continue;l=!1;break}if(m){if(!o(b,function(a,b){if(!G(m,b)&&(n===a||e(n,a,c,d,f)))return m.push(b)})){l=!1;break}}else if(n!==p&&!e(n,p,c,d,f)){l=!1;break}}return f.delete(a),f.delete(b),l}function rf(a,b,c,d,e,f,g){switch(c){case gb:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer,b=b.buffer;case fb:return!(a.byteLength!=b.byteLength||!f(new Ck(a),new Ck(b)));case Oa:case Pa:case Va:return Wh(+a,+b);case Ra:return a.name==b.name&&a.message==b.message;case $a:case ab:return a==b+"";case Ua:var h=P;case _a:var i=d&ka;if(h||(h=S),a.size!=b.size&&!i)return!1;var j=g.get(a);if(j)return j==b;d|=la,g.set(a,b);var k=qf(h(a),h(b),d,e,f,g);return g.delete(a),k;case bb:if(ol)return ol.call(a)==ol.call(b)}return!1}function sf(a,b,c,d,e,f){var g=c&ka,h=uf(a),i=h.length;if(i!=uf(b).length&&!g)return!1;for(var j=i;j--;){var k=h[j];if(!(g?k in b:tk.call(b,k)))return!1}var l=f.get(a);if(l&&f.get(b))return l==b;var m=!0;f.set(a,b),f.set(b,a);for(var n=g;++j<i;){k=h[j];var o=a[k],p=b[k];if(d)var q=g?d(p,o,k,b,a,f):d(o,p,k,a,b,f);if(!(q===_?o===p||e(o,p,c,d,f):q)){m=!1;break}n||(n="constructor"==k)}if(m&&!n){var r=a.constructor,s=b.constructor;r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s)&&(m=!1)}return f.delete(a),f.delete(b),m}function tf(a){return Hl(Yf(a,_,qg),a+"")}function uf(a){return td(a,Ri,Bl)}function vf(a){return td(a,Si,Cl)}function wf(a){for(var b=a.name+"",c=hl[b],d=tk.call(hl,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function xf(a){return(tk.call(U,"placeholder")?U:a).placeholder}function yf(){var a=U.iteratee||Ij;return a=a===Ij?Nd:a,arguments.length?a(arguments[0],arguments[1]):a}function zf(a,b){var c=a.__data__;return Of(b)?c["string"==typeof b?"string":"hash"]:c.map}function Af(a){for(var b=Ri(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,Sf(e)]}return b}function Bf(a,b){var c=L(a,b);return Jd(c)?c:_}function Cf(a){var b=tk.call(a,Kk),c=a[Kk];try{a[Kk]=_;var d=!0}catch(a){}var e=wk.call(a);return d&&(b?a[Kk]=c:delete a[Kk]),e}function Df(a,b,c){for(var d=-1,e=c.length;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=Xk(b,a+g);break;case"takeRight":a=Wk(a,b-g)}}return{start:a,end:b}}function Ef(a){var b=a.match(Kb);return b?b[1].split(Lb):[]}function Ff(a,b,c){b=ze(b,a);for(var d=-1,e=b.length,f=!1;++d<e;){var g=cg(b[d]);if(!(f=null!=a&&c(a,g)))break;a=a[g]}return f||++d!=e?f:!!(e=null==a?0:a.length)&&gi(e)&&Lf(g,e)&&(tm(a)||sm(a))}function Gf(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&tk.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Hf(a){return"function"!=typeof a.constructor||Rf(a)?{}:ql(Ek(a))}function If(a,b,c,d){var e=a.constructor;switch(b){case fb:return Ce(a);case Oa:case Pa:return new e(+a);case gb:return De(a,d);case hb:case ib:case jb:case kb:case lb:case mb:case nb:case ob:case pb:return Ie(a,d);case Ua:return Ee(a,d,c);case Va:case ab:return new e(a);case $a:return Fe(a);case _a:return Ge(a,d,c);case bb:return He(a)}}function Jf(a,b){var c=b.length;if(!c)return a;var d=c-1;return b[d]=(c>1?"& ":"")+b[d],b=b.join(c>2?", ":" "),a.replace(Jb,"{\n/* [wrapped with "+b+"] */\n")}function Kf(a){return tm(a)||sm(a)||!!(Ik&&a&&a[Ik])}function Lf(a,b){return!!(b=null==b?Ea:b)&&("number"==typeof a||Ub.test(a))&&a>-1&&a%1==0&&a<b}function Mf(a,b,c){if(!hi(c))return!1;var d=typeof b;return!!("number"==d?Xh(c)&&Lf(b,c.length):"string"==d&&b in c)&&Wh(c[b],a)}function Nf(a,b){if(tm(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!ti(a))||(Bb.test(a)||!Ab.test(a)||null!=b&&a in kk(b))}function Of(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function Pf(a){var b=wf(a),c=U[b];if("function"!=typeof c||!(b in Mb.prototype))return!1;if(a===c)return!0;var d=Al(c);return!!d&&a===d[0]}function Qf(a){return!!vk&&vk in a}function Rf(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||qk)}function Sf(a){return a===a&&!hi(a)}function Tf(a,b){return function(c){return null!=c&&(c[a]===b&&(b!==_||a in kk(c)))}}function Uf(a){var b=Ih(a,function(a){return c.size===fa&&c.clear(),a}),c=b.cache;return b}function Vf(a,b){var c=a[1],d=b[1],e=c|d,f=e<(ma|na|ta),g=d==ta&&c==pa||d==ta&&c==ua&&a[7].length<=b[8]||d==(ta|ua)&&b[7].length<=b[8]&&c==pa;if(!f&&!g)return a;d&ma&&(a[2]=b[2],e|=c&ma?0:oa);var h=b[3];if(h){var i=a[3];a[3]=i?Le(i,h,b[4]):h,a[4]=i?R(a[3],ga):b[4]}return h=b[5],h&&(i=a[5],a[5]=i?Me(i,h,b[6]):h,a[6]=i?R(a[5],ga):b[6]),h=b[7],h&&(a[7]=h),d&ta&&(a[8]=null==a[8]?b[8]:Xk(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function Wf(a){var b=[];if(null!=a)for(var c in kk(a))b.push(c);return b}function Xf(a){return wk.call(a)}function Yf(a,b,d){return b=Wk(b===_?a.length-1:b,0),function(){for(var e=arguments,f=-1,g=Wk(e.length-b,0),h=fk(g);++f<g;)h[f]=e[b+f];f=-1;for(var i=fk(b+1);++f<b;)i[f]=e[f];return i[b]=d(h),c(a,this,i)}}function Zf(a,b){return b.length<2?a:rd(a,je(b,0,-1))}function $f(a,b){for(var c=a.length,d=Xk(b.length,c),e=Ne(a);d--;){var f=b[d];a[d]=Lf(f,c)?e[f]:_}return a}function _f(a,b,c){var d=b+"";return Hl(a,Jf(d,eg(Ef(d),c)))}function ag(a){var b=0,c=0;return function(){var d=Yk(),e=za-(d-c);if(c=d,e>0){if(++b>=ya)return arguments[0]}else b=0;return a.apply(_,arguments)}}function bg(a,b){var c=-1,d=a.length,e=d-1;for(b=b===_?d:b;++c<b;){var f=be(c,e),g=a[f];a[f]=a[c],a[c]=g}return a.length=b,a}function cg(a){if("string"==typeof a||ti(a))return a;var b=a+"";return"0"==b&&1/a==-Da?"-0":b}function dg(a){if(null!=a){try{return sk.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function eg(a,b){return e(Ka,function(c){var d="_."+c[0];b&c[1]&&!i(a,d)&&a.push(d)}),a.sort()}function fg(a){if(a instanceof Mb)return a.clone();var b=new Z(a.__wrapped__,a.__chain__);return b.__actions__=Ne(a.__actions__),b.__index__=a.__index__,b.__values__=a.__values__,b}function gg(a,b,c){b=(c?Mf(a,b,c):b===_)?1:Wk(zi(b),0);var d=null==a?0:a.length;if(!d||b<1)return[];for(var e=0,f=0,g=fk(Pk(d/b));e<d;)g[f++]=je(a,e,e+=b);return g}function hg(a){for(var b=-1,c=null==a?0:a.length,d=0,e=[];++b<c;){var f=a[b];f&&(e[d++]=f)}return e}function ig(){var a=arguments.length;if(!a)return[];for(var b=fk(a-1),c=arguments[0],d=a;d--;)b[d-1]=arguments[d];return l(tm(c)?Ne(c):[c],dd(b,1))}function jg(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===_?1:zi(b),je(a,b<0?0:b,d)):[]}function kg(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===_?1:zi(b),b=d-b,je(a,0,b<0?0:b)):[]}function lg(a,b){return a&&a.length?te(a,yf(b,3),!0,!0):[]}function mg(a,b){return a&&a.length?te(a,yf(b,3),!0):[]}function ng(a,b,c,d){var e=null==a?0:a.length;return e?(c&&"number"!=typeof c&&Mf(a,b,c)&&(c=0,d=e),ad(a,b,c,d)):[]}function og(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=null==c?0:zi(c);return e<0&&(e=Wk(d+e,0)),s(a,yf(b,3),e)}function pg(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d-1;return c!==_&&(e=zi(c),e=c<0?Wk(d+e,0):Xk(e,d-1)),s(a,yf(b,3),e,!0)}function qg(a){return(null==a?0:a.length)?dd(a,1):[]}function rg(a){return(null==a?0:a.length)?dd(a,Da):[]}function sg(a,b){return(null==a?0:a.length)?(b=b===_?1:zi(b),dd(a,b)):[]}function tg(a){for(var b=-1,c=null==a?0:a.length,d={};++b<c;){var e=a[b];d[e[0]]=e[1]}return d}function ug(a){return a&&a.length?a[0]:_}function vg(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=null==c?0:zi(c);return e<0&&(e=Wk(d+e,0)),t(a,b,e)}function wg(a){return(null==a?0:a.length)?je(a,0,-1):[]}function xg(a,b){return null==a?"":Uk.call(a,b)}function yg(a){var b=null==a?0:a.length;return b?a[b-1]:_}function zg(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d;return c!==_&&(e=zi(c),e=e<0?Wk(d+e,0):Xk(e,d-1)),b===b?V(a,b,e):s(a,v,e,!0)}function Ag(a,b){return a&&a.length?Wd(a,zi(b)):_}function Bg(a,b){return a&&a.length&&b&&b.length?_d(a,b):a}function Cg(a,b,c){return a&&a.length&&b&&b.length?_d(a,b,yf(c,2)):a}function Dg(a,b,c){return a&&a.length&&b&&b.length?_d(a,b,_,c):a}function Eg(a,b){var c=[];if(!a||!a.length)return c;var d=-1,e=[],f=a.length;for(b=yf(b,3);++d<f;){var g=a[d];b(g,d,a)&&(c.push(g),e.push(d))}return ae(a,e),c}function Fg(a){return null==a?a:_k.call(a)}function Gg(a,b,c){var d=null==a?0:a.length;return d?(c&&"number"!=typeof c&&Mf(a,b,c)?(b=0,c=d):(b=null==b?0:zi(b),c=c===_?d:zi(c)),je(a,b,c)):[]}function Hg(a,b){return le(a,b)}function Ig(a,b,c){return me(a,b,yf(c,2))}function Jg(a,b){var c=null==a?0:a.length;if(c){var d=le(a,b);if(d<c&&Wh(a[d],b))return d}return-1}function Kg(a,b){return le(a,b,!0)}function Lg(a,b,c){return me(a,b,yf(c,2),!0)}function Mg(a,b){if(null==a?0:a.length){var c=le(a,b,!0)-1;if(Wh(a[c],b))return c}return-1}function Ng(a){return a&&a.length?ne(a):[]}function Og(a,b){return a&&a.length?ne(a,yf(b,2)):[]}function Pg(a){var b=null==a?0:a.length;return b?je(a,1,b):[]}function Qg(a,b,c){return a&&a.length?(b=c||b===_?1:zi(b),je(a,0,b<0?0:b)):[]}function Rg(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===_?1:zi(b),b=d-b,je(a,b<0?0:b,d)):[]}function Sg(a,b){return a&&a.length?te(a,yf(b,3),!1,!0):[]}function Tg(a,b){return a&&a.length?te(a,yf(b,3)):[]}function Ug(a){return a&&a.length?qe(a):[]}function Vg(a,b){return a&&a.length?qe(a,yf(b,2)):[]}function Wg(a,b){return b="function"==typeof b?b:_,a&&a.length?qe(a,_,b):[]}function Xg(a){if(!a||!a.length)return[];var b=0;return a=h(a,function(a){if(Yh(a))return b=Wk(a.length,b),!0}),C(b,function(b){return k(a,x(b))})}function Yg(a,b){if(!a||!a.length)return[];var d=Xg(a);return null==b?d:k(d,function(a){return c(b,_,a)})}function Zg(a,b){return we(a||[],b||[],Fc)}function $g(a,b){return we(a||[],b||[],he)}function _g(a){var b=U(a);return b.__chain__=!0,b}function ah(a,b){return b(a),a}function bh(a,b){return b(a)}function ch(){return _g(this)}function dh(){return new Z(this.value(),this.__chain__)}function eh(){this.__values__===_&&(this.__values__=xi(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?_:this.__values__[this.__index__++]}}function fh(){return this}function gh(a){for(var b,c=this;c instanceof Y;){var d=fg(c);d.__index__=0,d.__values__=_,b?e.__wrapped__=d:b=d;var e=d;c=c.__wrapped__}return e.__wrapped__=a,b}function hh(){var a=this.__wrapped__;if(a instanceof Mb){var b=a;return this.__actions__.length&&(b=new Mb(this)),b=b.reverse(),b.__actions__.push({
func:bh,args:[Fg],thisArg:_}),new Z(b,this.__chain__)}return this.thru(Fg)}function ih(){return ue(this.__wrapped__,this.__actions__)}function jh(a,b,c){var d=tm(a)?g:Yc;return c&&Mf(a,b,c)&&(b=_),d(a,yf(b,3))}function kh(a,b){return(tm(a)?h:cd)(a,yf(b,3))}function lh(a,b){return dd(rh(a,b),1)}function mh(a,b){return dd(rh(a,b),Da)}function nh(a,b,c){return c=c===_?1:zi(c),dd(rh(a,b),c)}function oh(a,b){return(tm(a)?e:rl)(a,yf(b,3))}function ph(a,b){return(tm(a)?f:sl)(a,yf(b,3))}function qh(a,b,c,d){a=Xh(a)?a:cj(a),c=c&&!d?zi(c):0;var e=a.length;return c<0&&(c=Wk(e+c,0)),si(a)?c<=e&&a.indexOf(b,c)>-1:!!e&&t(a,b,c)>-1}function rh(a,b){return(tm(a)?k:Rd)(a,yf(b,3))}function sh(a,b,c,d){return null==a?[]:(tm(b)||(b=null==b?[]:[b]),c=d?_:c,tm(c)||(c=null==c?[]:[c]),Xd(a,b,c))}function th(a,b,c){var d=tm(a)?m:z,e=arguments.length<3;return d(a,yf(b,4),c,e,rl)}function uh(a,b,c){var d=tm(a)?n:z,e=arguments.length<3;return d(a,yf(b,4),c,e,sl)}function vh(a,b){return(tm(a)?h:cd)(a,Jh(yf(b,3)))}function wh(a){return(tm(a)?Bc:fe)(a)}function xh(a,b,c){return b=(c?Mf(a,b,c):b===_)?1:zi(b),(tm(a)?Cc:ge)(a,b)}function yh(a){return(tm(a)?Dc:ie)(a)}function zh(a){if(null==a)return 0;if(Xh(a))return si(a)?W(a):a.length;var b=Dl(a);return b==Ua||b==_a?a.size:Od(a).length}function Ah(a,b,c){var d=tm(a)?o:ke;return c&&Mf(a,b,c)&&(b=_),d(a,yf(b,3))}function Bh(a,b){if("function"!=typeof b)throw new nk(da);return a=zi(a),function(){if(--a<1)return b.apply(this,arguments)}}function Ch(a,b,c){return b=c?_:b,b=a&&null==b?a.length:b,mf(a,ta,_,_,_,_,b)}function Dh(a,b){var c;if("function"!=typeof b)throw new nk(da);return a=zi(a),function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=_),c}}function Eh(a,b,c){b=c?_:b;var d=mf(a,pa,_,_,_,_,_,b);return d.placeholder=Eh.placeholder,d}function Fh(a,b,c){b=c?_:b;var d=mf(a,qa,_,_,_,_,_,b);return d.placeholder=Fh.placeholder,d}function Gh(a,b,c){function d(b){var c=m,d=n;return m=n=_,s=b,p=a.apply(d,c)}function e(a){return s=a,q=Gl(h,b),t?d(a):p}function f(a){var c=a-r,d=a-s,e=b-c;return u?Xk(e,o-d):e}function g(a){var c=a-r,d=a-s;return r===_||c>=b||c<0||u&&d>=o}function h(){var a=hm();if(g(a))return i(a);q=Gl(h,f(a))}function i(a){return q=_,v&&m?d(a):(m=n=_,p)}function j(){q!==_&&yl(q),s=0,m=r=n=q=_}function k(){return q===_?p:i(hm())}function l(){var a=hm(),c=g(a);if(m=arguments,n=this,r=a,c){if(q===_)return e(r);if(u)return q=Gl(h,b),d(r)}return q===_&&(q=Gl(h,b)),p}var m,n,o,p,q,r,s=0,t=!1,u=!1,v=!0;if("function"!=typeof a)throw new nk(da);return b=Bi(b)||0,hi(c)&&(t=!!c.leading,u="maxWait"in c,o=u?Wk(Bi(c.maxWait)||0,b):o,v="trailing"in c?!!c.trailing:v),l.cancel=j,l.flush=k,l}function Hh(a){return mf(a,va)}function Ih(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new nk(da);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g)||f,g};return c.cache=new(Ih.Cache||lc),c}function Jh(a){if("function"!=typeof a)throw new nk(da);return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function Kh(a){return Dh(2,a)}function Lh(a,b){if("function"!=typeof a)throw new nk(da);return b=b===_?b:zi(b),ee(a,b)}function Mh(a,b){if("function"!=typeof a)throw new nk(da);return b=null==b?0:Wk(zi(b),0),ee(function(d){var e=d[b],f=Ae(d,0,b);return e&&l(f,e),c(a,this,f)})}function Nh(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new nk(da);return hi(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),Gh(a,b,{leading:d,maxWait:b,trailing:e})}function Oh(a){return Ch(a,1)}function Ph(a,b){return nm(ye(b),a)}function Qh(){if(!arguments.length)return[];var a=arguments[0];return tm(a)?a:[a]}function Rh(a){return Pc(a,ja)}function Sh(a,b){return b="function"==typeof b?b:_,Pc(a,ja,b)}function Th(a){return Pc(a,ha|ja)}function Uh(a,b){return b="function"==typeof b?b:_,Pc(a,ha|ja,b)}function Vh(a,b){return null==b||Vc(a,b,Ri(b))}function Wh(a,b){return a===b||a!==a&&b!==b}function Xh(a){return null!=a&&gi(a.length)&&!ei(a)}function Yh(a){return ii(a)&&Xh(a)}function Zh(a){return!0===a||!1===a||ii(a)&&ud(a)==Oa}function $h(a){return ii(a)&&1===a.nodeType&&!qi(a)}function _h(a){if(null==a)return!0;if(Xh(a)&&(tm(a)||"string"==typeof a||"function"==typeof a.splice||vm(a)||Am(a)||sm(a)))return!a.length;var b=Dl(a);if(b==Ua||b==_a)return!a.size;if(Rf(a))return!Od(a).length;for(var c in a)if(tk.call(a,c))return!1;return!0}function ai(a,b){return Fd(a,b)}function bi(a,b,c){c="function"==typeof c?c:_;var d=c?c(a,b):_;return d===_?Fd(a,b,_,c):!!d}function ci(a){if(!ii(a))return!1;var b=ud(a);return b==Ra||b==Qa||"string"==typeof a.message&&"string"==typeof a.name&&!qi(a)}function di(a){return"number"==typeof a&&Tk(a)}function ei(a){if(!hi(a))return!1;var b=ud(a);return b==Sa||b==Ta||b==Na||b==Za}function fi(a){return"number"==typeof a&&a==zi(a)}function gi(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Ea}function hi(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}function ii(a){return null!=a&&"object"==typeof a}function ji(a,b){return a===b||Id(a,b,Af(b))}function ki(a,b,c){return c="function"==typeof c?c:_,Id(a,b,Af(b),c)}function li(a){return pi(a)&&a!=+a}function mi(a){if(El(a))throw new hk(ca);return Jd(a)}function ni(a){return null===a}function oi(a){return null==a}function pi(a){return"number"==typeof a||ii(a)&&ud(a)==Va}function qi(a){if(!ii(a)||ud(a)!=Xa)return!1;var b=Ek(a);if(null===b)return!0;var c=tk.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&sk.call(c)==xk}function ri(a){return fi(a)&&a>=-Ea&&a<=Ea}function si(a){return"string"==typeof a||!tm(a)&&ii(a)&&ud(a)==ab}function ti(a){return"symbol"==typeof a||ii(a)&&ud(a)==bb}function ui(a){return a===_}function vi(a){return ii(a)&&Dl(a)==db}function wi(a){return ii(a)&&ud(a)==eb}function xi(a){if(!a)return[];if(Xh(a))return si(a)?X(a):Ne(a);if(Jk&&a[Jk])return O(a[Jk]());var b=Dl(a);return(b==Ua?P:b==_a?S:cj)(a)}function yi(a){if(!a)return 0===a?a:0;if((a=Bi(a))===Da||a===-Da){return(a<0?-1:1)*Fa}return a===a?a:0}function zi(a){var b=yi(a),c=b%1;return b===b?c?b-c:b:0}function Ai(a){return a?Oc(zi(a),0,Ha):0}function Bi(a){if("number"==typeof a)return a;if(ti(a))return Ga;if(hi(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=hi(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(Gb,"");var c=Rb.test(a);return c||Tb.test(a)?$c(a.slice(2),c?2:8):Qb.test(a)?Ga:+a}function Ci(a){return Oe(a,Si(a))}function Di(a){return a?Oc(zi(a),-Ea,Ea):0===a?a:0}function Ei(a){return null==a?"":pe(a)}function Fi(a,b){var c=ql(a);return null==b?c:Ic(c,b)}function Gi(a,b){return r(a,yf(b,3),fd)}function Hi(a,b){return r(a,yf(b,3),gd)}function Ii(a,b){return null==a?a:tl(a,yf(b,3),Si)}function Ji(a,b){return null==a?a:ul(a,yf(b,3),Si)}function Ki(a,b){return a&&fd(a,yf(b,3))}function Li(a,b){return a&&gd(a,yf(b,3))}function Mi(a){return null==a?[]:nd(a,Ri(a))}function Ni(a){return null==a?[]:nd(a,Si(a))}function Oi(a,b,c){var d=null==a?_:rd(a,b);return d===_?c:d}function Pi(a,b){return null!=a&&Ff(a,b,wd)}function Qi(a,b){return null!=a&&Ff(a,b,xd)}function Ri(a){return Xh(a)?Ac(a):Od(a)}function Si(a){return Xh(a)?Ac(a,!0):Pd(a)}function Ti(a,b){var c={};return b=yf(b,3),fd(a,function(a,d,e){Kc(c,b(a,d,e),a)}),c}function Ui(a,b){var c={};return b=yf(b,3),fd(a,function(a,d,e){Kc(c,d,b(a,d,e))}),c}function Vi(a,b){return Wi(a,Jh(yf(b)))}function Wi(a,b){if(null==a)return{};var c=k(vf(a),function(a){return[a]});return b=yf(b),Zd(a,c,function(a,c){return b(a,c[0])})}function Xi(a,b,c){b=ze(b,a);var d=-1,e=b.length;for(e||(e=1,a=_);++d<e;){var f=null==a?_:a[cg(b[d])];f===_&&(d=e,f=c),a=ei(f)?f.call(a):f}return a}function Yi(a,b,c){return null==a?a:he(a,b,c)}function Zi(a,b,c,d){return d="function"==typeof d?d:_,null==a?a:he(a,b,c,d)}function $i(a,b,c){var d=tm(a),f=d||vm(a)||Am(a);if(b=yf(b,4),null==c){var g=a&&a.constructor;c=f?d?new g:[]:hi(a)&&ei(g)?ql(Ek(a)):{}}return(f?e:fd)(a,function(a,d,e){return b(c,a,d,e)}),c}function _i(a,b){return null==a||re(a,b)}function aj(a,b,c){return null==a?a:se(a,b,ye(c))}function bj(a,b,c,d){return d="function"==typeof d?d:_,null==a?a:se(a,b,ye(c),d)}function cj(a){return null==a?[]:F(a,Ri(a))}function dj(a){return null==a?[]:F(a,Si(a))}function ej(a,b,c){return c===_&&(c=b,b=_),c!==_&&(c=Bi(c),c=c===c?c:0),b!==_&&(b=Bi(b),b=b===b?b:0),Oc(Bi(a),b,c)}function fj(a,b,c){return b=yi(b),c===_?(c=b,b=0):c=yi(c),a=Bi(a),yd(a,b,c)}function gj(a,b,c){if(c&&"boolean"!=typeof c&&Mf(a,b,c)&&(b=c=_),c===_&&("boolean"==typeof b?(c=b,b=_):"boolean"==typeof a&&(c=a,a=_)),a===_&&b===_?(a=0,b=1):(a=yi(a),b===_?(b=a,a=0):b=yi(b)),a>b){var d=a;a=b,b=d}if(c||a%1||b%1){var e=$k();return Xk(a+e*(b-a+Zc("1e-"+((e+"").length-1))),b)}return be(a,b)}function hj(a){return $m(Ei(a).toLowerCase())}function ij(a){return(a=Ei(a))&&a.replace(Vb,od).replace(Mc,"")}function jj(a,b,c){a=Ei(a),b=pe(b);var d=a.length;c=c===_?d:Oc(zi(c),0,d);var e=c;return(c-=b.length)>=0&&a.slice(c,e)==b}function kj(a){return a=Ei(a),a&&wb.test(a)?a.replace(ub,pd):a}function lj(a){return a=Ei(a),a&&Fb.test(a)?a.replace(Eb,"\\$&"):a}function mj(a,b,c){a=Ei(a),b=zi(b);var d=b?W(a):0;if(!b||d>=b)return a;var e=(b-d)/2;return ef(Qk(e),c)+a+ef(Pk(e),c)}function nj(a,b,c){a=Ei(a),b=zi(b);var d=b?W(a):0;return b&&d<b?a+ef(b-d,c):a}function oj(a,b,c){a=Ei(a),b=zi(b);var d=b?W(a):0;return b&&d<b?ef(b-d,c)+a:a}function pj(a,b,c){return c||null==b?b=0:b&&(b=+b),Zk(Ei(a).replace(Hb,""),b||0)}function qj(a,b,c){return b=(c?Mf(a,b,c):b===_)?1:zi(b),de(Ei(a),b)}function rj(){var a=arguments,b=Ei(a[0]);return a.length<3?b:b.replace(a[1],a[2])}function sj(a,b,c){return c&&"number"!=typeof c&&Mf(a,b,c)&&(b=c=_),(c=c===_?Ha:c>>>0)?(a=Ei(a),a&&("string"==typeof b||null!=b&&!ym(b))&&!(b=pe(b))&&M(a)?Ae(X(a),0,c):a.split(b,c)):[]}function tj(a,b,c){return a=Ei(a),c=null==c?0:Oc(zi(c),0,a.length),b=pe(b),a.slice(c,c+b.length)==b}function uj(a,b,c){var d=U.templateSettings;c&&Mf(a,b,c)&&(b=_),a=Ei(a),b=Fm({},b,d,nf);var e,f,g=Fm({},b.imports,d.imports,nf),h=Ri(g),i=F(g,h),j=0,k=b.interpolate||Wb,l="__p += '",m=lk((b.escape||Wb).source+"|"+k.source+"|"+(k===zb?Ob:Wb).source+"|"+(b.evaluate||Wb).source+"|$","g"),n="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++Sc+"]")+"\n";a.replace(m,function(b,c,d,g,h,i){return d||(d=g),l+=a.slice(j,i).replace(Xb,K),c&&(e=!0,l+="' +\n__e("+c+") +\n'"),h&&(f=!0,l+="';\n"+h+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=i+b.length,b}),l+="';\n";var o=b.variable;o||(l="with (obj) {\n"+l+"\n}\n"),l=(f?l.replace(qb,""):l).replace(rb,"$1").replace(sb,"$1;"),l="function("+(o||"obj")+") {\n"+(o?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(e?", __e = _.escape":"")+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var p=_m(function(){return ik(h,n+"return "+l).apply(_,i)});if(p.source=l,ci(p))throw p;return p}function vj(a){return Ei(a).toLowerCase()}function wj(a){return Ei(a).toUpperCase()}function xj(a,b,c){if((a=Ei(a))&&(c||b===_))return a.replace(Gb,"");if(!a||!(b=pe(b)))return a;var d=X(a),e=X(b);return Ae(d,H(d,e),I(d,e)+1).join("")}function yj(a,b,c){if((a=Ei(a))&&(c||b===_))return a.replace(Ib,"");if(!a||!(b=pe(b)))return a;var d=X(a);return Ae(d,0,I(d,X(b))+1).join("")}function zj(a,b,c){if((a=Ei(a))&&(c||b===_))return a.replace(Hb,"");if(!a||!(b=pe(b)))return a;var d=X(a);return Ae(d,H(d,X(b))).join("")}function Aj(a,b){var c=wa,d=xa;if(hi(b)){var e="separator"in b?b.separator:e;c="length"in b?zi(b.length):c,d="omission"in b?pe(b.omission):d}a=Ei(a);var f=a.length;if(M(a)){var g=X(a);f=g.length}if(c>=f)return a;var h=c-W(d);if(h<1)return d;var i=g?Ae(g,0,h).join(""):a.slice(0,h);if(e===_)return i+d;if(g&&(h+=i.length-h),ym(e)){if(a.slice(h).search(e)){var j,k=i;for(e.global||(e=lk(e.source,Ei(Pb.exec(e))+"g")),e.lastIndex=0;j=e.exec(k);)var l=j.index;i=i.slice(0,l===_?h:l)}}else if(a.indexOf(pe(e),h)!=h){var m=i.lastIndexOf(e);m>-1&&(i=i.slice(0,m))}return i+d}function Bj(a){return a=Ei(a),a&&vb.test(a)?a.replace(tb,qd):a}function Cj(a,b,c){return a=Ei(a),b=c?_:b,b===_?N(a)?$(a):q(a):a.match(b)||[]}function Dj(a){var b=null==a?0:a.length,d=yf();return a=b?k(a,function(a){if("function"!=typeof a[1])throw new nk(da);return[d(a[0]),a[1]]}):[],ee(function(d){for(var e=-1;++e<b;){var f=a[e];if(c(f[0],this,d))return c(f[1],this,d)}})}function Ej(a){return Qc(Pc(a,ha))}function Fj(a){return function(){return a}}function Gj(a,b){return null==a||a!==a?b:a}function Hj(a){return a}function Ij(a){return Nd("function"==typeof a?a:Pc(a,ha))}function Jj(a){return Sd(Pc(a,ha))}function Kj(a,b){return Td(a,Pc(b,ha))}function Lj(a,b,c){var d=Ri(b),f=nd(b,d);null!=c||hi(b)&&(f.length||!d.length)||(c=b,b=a,a=this,f=nd(b,Ri(b)));var g=!(hi(c)&&"chain"in c&&!c.chain),h=ei(a);return e(f,function(c){var d=b[c];a[c]=d,h&&(a.prototype[c]=function(){var b=this.__chain__;if(g||b){var c=a(this.__wrapped__);return(c.__actions__=Ne(this.__actions__)).push({func:d,args:arguments,thisArg:a}),c.__chain__=b,c}return d.apply(a,l([this.value()],arguments))})}),a}function Mj(){return bd._===this&&(bd._=yk),this}function Nj(){}function Oj(a){return a=zi(a),ee(function(b){return Wd(b,a)})}function Pj(a){return Nf(a)?x(cg(a)):$d(a)}function Qj(a){return function(b){return null==a?_:rd(a,b)}}function Rj(){return[]}function Sj(){return!1}function Tj(){return{}}function Uj(){return""}function Vj(){return!0}function Wj(a,b){if((a=zi(a))<1||a>Ea)return[];var c=Ha,d=Xk(a,Ha);b=yf(b),a-=Ha;for(var e=C(d,b);++c<a;)b(c);return e}function Xj(a){return tm(a)?k(a,cg):ti(a)?[a]:Ne(Il(Ei(a)))}function Yj(a){var b=++uk;return Ei(a)+b}function Zj(a){return a&&a.length?_c(a,Hj,vd):_}function $j(a,b){return a&&a.length?_c(a,yf(b,2),vd):_}function _j(a){return w(a,Hj)}function ak(a,b){return w(a,yf(b,2))}function bk(a){return a&&a.length?_c(a,Hj,Qd):_}function ck(a,b){return a&&a.length?_c(a,yf(b,2),Qd):_}function dk(a){return a&&a.length?B(a,Hj):0}function ek(a,b){return a&&a.length?B(a,yf(b,2)):0}y=null==y?bd:sd.defaults(bd.Object(),y,sd.pick(bd,Rc));var fk=y.Array,gk=y.Date,hk=y.Error,ik=y.Function,jk=y.Math,kk=y.Object,lk=y.RegExp,mk=y.String,nk=y.TypeError,ok=fk.prototype,pk=ik.prototype,qk=kk.prototype,rk=y["__core-js_shared__"],sk=pk.toString,tk=qk.hasOwnProperty,uk=0,vk=function(){var a=/[^.]+$/.exec(rk&&rk.keys&&rk.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),wk=qk.toString,xk=sk.call(kk),yk=bd._,zk=lk("^"+sk.call(tk).replace(Eb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ak=ed?y.Buffer:_,Bk=y.Symbol,Ck=y.Uint8Array,Dk=Ak?Ak.allocUnsafe:_,Ek=Q(kk.getPrototypeOf,kk),Fk=kk.create,Gk=qk.propertyIsEnumerable,Hk=ok.splice,Ik=Bk?Bk.isConcatSpreadable:_,Jk=Bk?Bk.iterator:_,Kk=Bk?Bk.toStringTag:_,Lk=function(){try{var a=Bf(kk,"defineProperty");return a({},"",{}),a}catch(a){}}(),Mk=y.clearTimeout!==bd.clearTimeout&&y.clearTimeout,Nk=gk&&gk.now!==bd.Date.now&&gk.now,Ok=y.setTimeout!==bd.setTimeout&&y.setTimeout,Pk=jk.ceil,Qk=jk.floor,Rk=kk.getOwnPropertySymbols,Sk=Ak?Ak.isBuffer:_,Tk=y.isFinite,Uk=ok.join,Vk=Q(kk.keys,kk),Wk=jk.max,Xk=jk.min,Yk=gk.now,Zk=y.parseInt,$k=jk.random,_k=ok.reverse,al=Bf(y,"DataView"),bl=Bf(y,"Map"),cl=Bf(y,"Promise"),dl=Bf(y,"Set"),el=Bf(y,"WeakMap"),fl=Bf(kk,"create"),gl=el&&new el,hl={},il=dg(al),jl=dg(bl),kl=dg(cl),ll=dg(dl),ml=dg(el),nl=Bk?Bk.prototype:_,ol=nl?nl.valueOf:_,pl=nl?nl.toString:_,ql=function(){function a(){}return function(b){if(!hi(b))return{};if(Fk)return Fk(b);a.prototype=b;var c=new a;return a.prototype=_,c}}();U.templateSettings={escape:xb,evaluate:yb,interpolate:zb,variable:"",imports:{_:U}},U.prototype=Y.prototype,U.prototype.constructor=U,Z.prototype=ql(Y.prototype),Z.prototype.constructor=Z,Mb.prototype=ql(Y.prototype),Mb.prototype.constructor=Mb,_b.prototype.clear=ac,_b.prototype.delete=bc,_b.prototype.get=cc,_b.prototype.has=dc,_b.prototype.set=ec,fc.prototype.clear=gc,fc.prototype.delete=hc,fc.prototype.get=ic,fc.prototype.has=jc,fc.prototype.set=kc,lc.prototype.clear=mc,lc.prototype.delete=nc,lc.prototype.get=oc,lc.prototype.has=pc,lc.prototype.set=qc,rc.prototype.add=rc.prototype.push=sc,rc.prototype.has=tc,uc.prototype.clear=vc,uc.prototype.delete=wc,uc.prototype.get=xc,uc.prototype.has=yc,uc.prototype.set=zc;var rl=Te(fd),sl=Te(gd,!0),tl=Ue(),ul=Ue(!0),vl=gl?function(a,b){return gl.set(a,b),a}:Hj,wl=Lk?function(a,b){return Lk(a,"toString",{configurable:!0,enumerable:!1,value:Fj(b),writable:!0})}:Hj,xl=ee,yl=Mk||function(a){return bd.clearTimeout(a)},zl=dl&&1/S(new dl([,-0]))[1]==Da?function(a){return new dl(a)}:Nj,Al=gl?function(a){return gl.get(a)}:Nj,Bl=Rk?function(a){return null==a?[]:(a=kk(a),h(Rk(a),function(b){return Gk.call(a,b)}))}:Rj,Cl=Rk?function(a){for(var b=[];a;)l(b,Bl(a)),a=Ek(a);return b}:Rj,Dl=ud;(al&&Dl(new al(new ArrayBuffer(1)))!=gb||bl&&Dl(new bl)!=Ua||cl&&Dl(cl.resolve())!=Ya||dl&&Dl(new dl)!=_a||el&&Dl(new el)!=db)&&(Dl=function(a){var b=ud(a),c=b==Xa?a.constructor:_,d=c?dg(c):"";if(d)switch(d){case il:return gb;case jl:return Ua;case kl:return Ya;case ll:return _a;case ml:return db}return b});var El=rk?ei:Sj,Fl=ag(vl),Gl=Ok||function(a,b){return bd.setTimeout(a,b)},Hl=ag(wl),Il=Uf(function(a){var b=[];return Cb.test(a)&&b.push(""),a.replace(Db,function(a,c,d,e){b.push(d?e.replace(Nb,"$1"):c||a)}),b}),Jl=ee(function(a,b){return Yh(a)?Xc(a,dd(b,1,Yh,!0)):[]}),Kl=ee(function(a,b){var c=yg(b);return Yh(c)&&(c=_),Yh(a)?Xc(a,dd(b,1,Yh,!0),yf(c,2)):[]}),Ll=ee(function(a,b){var c=yg(b);return Yh(c)&&(c=_),Yh(a)?Xc(a,dd(b,1,Yh,!0),_,c):[]}),Ml=ee(function(a){var b=k(a,xe);return b.length&&b[0]===a[0]?zd(b):[]}),Nl=ee(function(a){var b=yg(a),c=k(a,xe);return b===yg(c)?b=_:c.pop(),c.length&&c[0]===a[0]?zd(c,yf(b,2)):[]}),Ol=ee(function(a){var b=yg(a),c=k(a,xe);return b="function"==typeof b?b:_,b&&c.pop(),c.length&&c[0]===a[0]?zd(c,_,b):[]}),Pl=ee(Bg),Ql=tf(function(a,b){var c=null==a?0:a.length,d=Nc(a,b);return ae(a,k(b,function(a){return Lf(a,c)?+a:a}).sort(Je)),d}),Rl=ee(function(a){return qe(dd(a,1,Yh,!0))}),Sl=ee(function(a){var b=yg(a);return Yh(b)&&(b=_),qe(dd(a,1,Yh,!0),yf(b,2))}),Tl=ee(function(a){var b=yg(a);return b="function"==typeof b?b:_,qe(dd(a,1,Yh,!0),_,b)}),Ul=ee(function(a,b){return Yh(a)?Xc(a,b):[]}),Vl=ee(function(a){return ve(h(a,Yh))}),Wl=ee(function(a){var b=yg(a);return Yh(b)&&(b=_),ve(h(a,Yh),yf(b,2))}),Xl=ee(function(a){var b=yg(a);return b="function"==typeof b?b:_,ve(h(a,Yh),_,b)}),Yl=ee(Xg),Zl=ee(function(a){var b=a.length,c=b>1?a[b-1]:_;return c="function"==typeof c?(a.pop(),c):_,Yg(a,c)}),$l=tf(function(a){var b=a.length,c=b?a[0]:0,d=this.__wrapped__,e=function(b){return Nc(b,a)};return!(b>1||this.__actions__.length)&&d instanceof Mb&&Lf(c)?(d=d.slice(c,+c+(b?1:0)),d.__actions__.push({func:bh,args:[e],thisArg:_}),new Z(d,this.__chain__).thru(function(a){return b&&!a.length&&a.push(_),a})):this.thru(e)}),_l=Re(function(a,b,c){tk.call(a,c)?++a[c]:Kc(a,c,1)}),am=$e(og),bm=$e(pg),cm=Re(function(a,b,c){tk.call(a,c)?a[c].push(b):Kc(a,c,[b])}),dm=ee(function(a,b,d){var e=-1,f="function"==typeof b,g=Xh(a)?fk(a.length):[];return rl(a,function(a){g[++e]=f?c(b,a,d):Bd(a,b,d)}),g}),em=Re(function(a,b,c){Kc(a,c,b)}),fm=Re(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),gm=ee(function(a,b){if(null==a)return[];var c=b.length;return c>1&&Mf(a,b[0],b[1])?b=[]:c>2&&Mf(b[0],b[1],b[2])&&(b=[b[0]]),Xd(a,dd(b,1),[])}),hm=Nk||function(){return bd.Date.now()},im=ee(function(a,b,c){var d=ma;if(c.length){var e=R(c,xf(im));d|=ra}return mf(a,d,b,c,e)}),jm=ee(function(a,b,c){var d=ma|na;if(c.length){var e=R(c,xf(jm));d|=ra}return mf(b,d,a,c,e)}),km=ee(function(a,b){return Wc(a,1,b)}),lm=ee(function(a,b,c){return Wc(a,Bi(b)||0,c)});Ih.Cache=lc;var mm=xl(function(a,b){b=1==b.length&&tm(b[0])?k(b[0],E(yf())):k(dd(b,1),E(yf()));var d=b.length;return ee(function(e){for(var f=-1,g=Xk(e.length,d);++f<g;)e[f]=b[f].call(this,e[f]);return c(a,this,e)})}),nm=ee(function(a,b){var c=R(b,xf(nm));return mf(a,ra,_,b,c)}),om=ee(function(a,b){var c=R(b,xf(om));return mf(a,sa,_,b,c)}),pm=tf(function(a,b){return mf(a,ua,_,_,_,b)}),qm=hf(vd),rm=hf(function(a,b){return a>=b}),sm=Cd(function(){return arguments}())?Cd:function(a){return ii(a)&&tk.call(a,"callee")&&!Gk.call(a,"callee")},tm=fk.isArray,um=hd?E(hd):Dd,vm=Sk||Sj,wm=id?E(id):Ed,xm=jd?E(jd):Hd,ym=kd?E(kd):Kd,zm=ld?E(ld):Ld,Am=md?E(md):Md,Bm=hf(Qd),Cm=hf(function(a,b){return a<=b}),Dm=Se(function(a,b){if(Rf(b)||Xh(b))return void Oe(b,Ri(b),a);for(var c in b)tk.call(b,c)&&Fc(a,c,b[c])}),Em=Se(function(a,b){Oe(b,Si(b),a)}),Fm=Se(function(a,b,c,d){Oe(b,Si(b),a,d)}),Gm=Se(function(a,b,c,d){Oe(b,Ri(b),a,d)}),Hm=tf(Nc),Im=ee(function(a){return a.push(_,nf),c(Fm,_,a)}),Jm=ee(function(a){return a.push(_,of),c(Om,_,a)}),Km=bf(function(a,b,c){a[b]=c},Fj(Hj)),Lm=bf(function(a,b,c){tk.call(a,b)?a[b].push(c):a[b]=[c]},yf),Mm=ee(Bd),Nm=Se(function(a,b,c){Ud(a,b,c)}),Om=Se(function(a,b,c,d){Ud(a,b,c,d)}),Pm=tf(function(a,b){var c={};if(null==a)return c;var d=!1;b=k(b,function(b){return b=ze(b,a),d||(d=b.length>1),b}),Oe(a,vf(a),c),d&&(c=Pc(c,ha|ia|ja,pf));for(var e=b.length;e--;)re(c,b[e]);return c}),Qm=tf(function(a,b){return null==a?{}:Yd(a,b)}),Rm=lf(Ri),Sm=lf(Si),Tm=Xe(function(a,b,c){return b=b.toLowerCase(),a+(c?hj(b):b)}),Um=Xe(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Vm=Xe(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),Wm=We("toLowerCase"),Xm=Xe(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Ym=Xe(function(a,b,c){return a+(c?" ":"")+$m(b)}),Zm=Xe(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()}),$m=We("toUpperCase"),_m=ee(function(a,b){try{return c(a,_,b)}catch(a){return ci(a)?a:new hk(a)}}),an=tf(function(a,b){return e(b,function(b){b=cg(b),Kc(a,b,im(a[b],a))}),a}),bn=_e(),cn=_e(!0),dn=ee(function(a,b){return function(c){return Bd(c,a,b)}}),en=ee(function(a,b){return function(c){return Bd(a,c,b)}}),fn=df(k),gn=df(g),hn=df(o),jn=gf(),kn=gf(!0),ln=cf(function(a,b){return a+b},0),mn=kf("ceil"),nn=cf(function(a,b){return a/b},1),on=kf("floor"),pn=cf(function(a,b){return a*b},1),qn=kf("round"),rn=cf(function(a,b){return a-b},0);return U.after=Bh,U.ary=Ch,U.assign=Dm,U.assignIn=Em,U.assignInWith=Fm,U.assignWith=Gm,U.at=Hm,U.before=Dh,U.bind=im,U.bindAll=an,U.bindKey=jm,U.castArray=Qh,U.chain=_g,U.chunk=gg,U.compact=hg,U.concat=ig,U.cond=Dj,U.conforms=Ej,U.constant=Fj,U.countBy=_l,U.create=Fi,U.curry=Eh,U.curryRight=Fh,U.debounce=Gh,U.defaults=Im,U.defaultsDeep=Jm,U.defer=km,U.delay=lm,U.difference=Jl,U.differenceBy=Kl,U.differenceWith=Ll,U.drop=jg,U.dropRight=kg,U.dropRightWhile=lg,U.dropWhile=mg,U.fill=ng,U.filter=kh,U.flatMap=lh,U.flatMapDeep=mh,U.flatMapDepth=nh,U.flatten=qg,U.flattenDeep=rg,U.flattenDepth=sg,U.flip=Hh,U.flow=bn,U.flowRight=cn,U.fromPairs=tg,U.functions=Mi,U.functionsIn=Ni,U.groupBy=cm,U.initial=wg,U.intersection=Ml,U.intersectionBy=Nl,U.intersectionWith=Ol,U.invert=Km,U.invertBy=Lm,U.invokeMap=dm,U.iteratee=Ij,U.keyBy=em,U.keys=Ri,U.keysIn=Si,U.map=rh,U.mapKeys=Ti,U.mapValues=Ui,U.matches=Jj,U.matchesProperty=Kj,U.memoize=Ih,U.merge=Nm,U.mergeWith=Om,U.method=dn,U.methodOf=en,U.mixin=Lj,U.negate=Jh,U.nthArg=Oj,U.omit=Pm,U.omitBy=Vi,U.once=Kh,U.orderBy=sh,U.over=fn,U.overArgs=mm,U.overEvery=gn,U.overSome=hn,U.partial=nm,U.partialRight=om,U.partition=fm,U.pick=Qm,U.pickBy=Wi,U.property=Pj,U.propertyOf=Qj,U.pull=Pl,U.pullAll=Bg,U.pullAllBy=Cg,U.pullAllWith=Dg,U.pullAt=Ql,U.range=jn,U.rangeRight=kn,U.rearg=pm,U.reject=vh,U.remove=Eg,U.rest=Lh,U.reverse=Fg,U.sampleSize=xh,U.set=Yi,U.setWith=Zi,U.shuffle=yh,U.slice=Gg,U.sortBy=gm,U.sortedUniq=Ng,U.sortedUniqBy=Og,U.split=sj,U.spread=Mh,U.tail=Pg,U.take=Qg,U.takeRight=Rg,U.takeRightWhile=Sg,U.takeWhile=Tg,U.tap=ah,U.throttle=Nh,U.thru=bh,U.toArray=xi,U.toPairs=Rm,U.toPairsIn=Sm,U.toPath=Xj,U.toPlainObject=Ci,U.transform=$i,U.unary=Oh,U.union=Rl,U.unionBy=Sl,U.unionWith=Tl,U.uniq=Ug,U.uniqBy=Vg,U.uniqWith=Wg,U.unset=_i,U.unzip=Xg,U.unzipWith=Yg,U.update=aj,U.updateWith=bj,U.values=cj,U.valuesIn=dj,U.without=Ul,U.words=Cj,U.wrap=Ph,U.xor=Vl,U.xorBy=Wl,U.xorWith=Xl,U.zip=Yl,U.zipObject=Zg,U.zipObjectDeep=$g,U.zipWith=Zl,U.entries=Rm,U.entriesIn=Sm,U.extend=Em,U.extendWith=Fm,Lj(U,U),U.add=ln,U.attempt=_m,U.camelCase=Tm,U.capitalize=hj,U.ceil=mn,U.clamp=ej,U.clone=Rh,U.cloneDeep=Th,U.cloneDeepWith=Uh,U.cloneWith=Sh,U.conformsTo=Vh,U.deburr=ij,U.defaultTo=Gj,U.divide=nn,U.endsWith=jj,U.eq=Wh,U.escape=kj,U.escapeRegExp=lj,U.every=jh,U.find=am,U.findIndex=og,U.findKey=Gi,U.findLast=bm,U.findLastIndex=pg,U.findLastKey=Hi,U.floor=on,U.forEach=oh,U.forEachRight=ph,U.forIn=Ii,U.forInRight=Ji,U.forOwn=Ki,U.forOwnRight=Li,U.get=Oi,U.gt=qm,U.gte=rm,U.has=Pi,U.hasIn=Qi,U.head=ug,U.identity=Hj,U.includes=qh,U.indexOf=vg,U.inRange=fj,U.invoke=Mm,U.isArguments=sm,U.isArray=tm,U.isArrayBuffer=um,U.isArrayLike=Xh,U.isArrayLikeObject=Yh,U.isBoolean=Zh,U.isBuffer=vm,U.isDate=wm,U.isElement=$h,U.isEmpty=_h,U.isEqual=ai,U.isEqualWith=bi,U.isError=ci,U.isFinite=di,U.isFunction=ei,U.isInteger=fi,U.isLength=gi,U.isMap=xm,U.isMatch=ji,U.isMatchWith=ki,U.isNaN=li,U.isNative=mi,U.isNil=oi,U.isNull=ni,U.isNumber=pi,U.isObject=hi,U.isObjectLike=ii,U.isPlainObject=qi,U.isRegExp=ym,U.isSafeInteger=ri,U.isSet=zm,U.isString=si,U.isSymbol=ti,U.isTypedArray=Am,U.isUndefined=ui,U.isWeakMap=vi,U.isWeakSet=wi,U.join=xg,U.kebabCase=Um,U.last=yg,U.lastIndexOf=zg,U.lowerCase=Vm,U.lowerFirst=Wm,U.lt=Bm,U.lte=Cm,U.max=Zj,U.maxBy=$j,U.mean=_j,U.meanBy=ak,U.min=bk,U.minBy=ck,U.stubArray=Rj,U.stubFalse=Sj,U.stubObject=Tj,U.stubString=Uj,U.stubTrue=Vj,U.multiply=pn,U.nth=Ag,U.noConflict=Mj,U.noop=Nj,U.now=hm,U.pad=mj,U.padEnd=nj,U.padStart=oj,U.parseInt=pj,U.random=gj,U.reduce=th,U.reduceRight=uh,U.repeat=qj,U.replace=rj,U.result=Xi,U.round=qn,U.runInContext=p,U.sample=wh,U.size=zh,U.snakeCase=Xm,U.some=Ah,U.sortedIndex=Hg,U.sortedIndexBy=Ig,U.sortedIndexOf=Jg,U.sortedLastIndex=Kg,U.sortedLastIndexBy=Lg,U.sortedLastIndexOf=Mg,U.startCase=Ym,U.startsWith=tj,U.subtract=rn,U.sum=dk,U.sumBy=ek,U.template=uj,U.times=Wj,U.toFinite=yi,U.toInteger=zi,U.toLength=Ai,U.toLower=vj,U.toNumber=Bi,U.toSafeInteger=Di,U.toString=Ei,U.toUpper=wj,U.trim=xj,U.trimEnd=yj,U.trimStart=zj,U.truncate=Aj,U.unescape=Bj,U.uniqueId=Yj,U.upperCase=Zm,U.upperFirst=$m,U.each=oh,U.eachRight=ph,U.first=ug,Lj(U,function(){var a={};return fd(U,function(b,c){tk.call(U.prototype,c)||(a[c]=b)}),a}(),{chain:!1}),U.VERSION=aa,e(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){U[a].placeholder=U}),e(["drop","take"],function(a,b){Mb.prototype[a]=function(c){c=c===_?1:Wk(zi(c),0);var d=this.__filtered__&&!b?new Mb(this):this.clone();return d.__filtered__?d.__takeCount__=Xk(c,d.__takeCount__):d.__views__.push({size:Xk(c,Ha),type:a+(d.__dir__<0?"Right":"")}),d},Mb.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),e(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c==Aa||c==Ca;Mb.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:yf(a,3),type:c}),b.__filtered__=b.__filtered__||d,b}}),e(["head","last"],function(a,b){var c="take"+(b?"Right":"");Mb.prototype[a]=function(){return this[c](1).value()[0]}}),e(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");Mb.prototype[a]=function(){return this.__filtered__?new Mb(this):this[c](1)}}),Mb.prototype.compact=function(){return this.filter(Hj)},Mb.prototype.find=function(a){return this.filter(a).head()},Mb.prototype.findLast=function(a){return this.reverse().find(a)},Mb.prototype.invokeMap=ee(function(a,b){return"function"==typeof a?new Mb(this):this.map(function(c){return Bd(c,a,b)})}),Mb.prototype.reject=function(a){return this.filter(Jh(yf(a)))},Mb.prototype.slice=function(a,b){a=zi(a);var c=this;return c.__filtered__&&(a>0||b<0)?new Mb(c):(a<0?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==_&&(b=zi(b),c=b<0?c.dropRight(-b):c.take(b-a)),c)},Mb.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Mb.prototype.toArray=function(){return this.take(Ha)},fd(Mb.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=U[d?"take"+("last"==b?"Right":""):b],f=d||/^find/.test(b);e&&(U.prototype[b]=function(){var b=this.__wrapped__,g=d?[1]:arguments,h=b instanceof Mb,i=g[0],j=h||tm(b),k=function(a){var b=e.apply(U,l([a],g));return d&&m?b[0]:b};j&&c&&"function"==typeof i&&1!=i.length&&(h=j=!1);var m=this.__chain__,n=!!this.__actions__.length,o=f&&!m,p=h&&!n;if(!f&&j){b=p?b:new Mb(this);var q=a.apply(b,g);return q.__actions__.push({func:bh,args:[k],thisArg:_}),new Z(q,m)}return o&&p?a.apply(this,g):(q=this.thru(k),o?d?q.value()[0]:q.value():q)})}),e(["pop","push","shift","sort","splice","unshift"],function(a){var b=ok[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);U.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(tm(e)?e:[],a)}return this[c](function(c){return b.apply(tm(c)?c:[],a)})}}),fd(Mb.prototype,function(a,b){var c=U[b];if(c){var d=c.name+"";(hl[d]||(hl[d]=[])).push({name:b,func:c})}}),hl[af(_,na).name]=[{name:"wrapper",func:_}],Mb.prototype.clone=Yb,Mb.prototype.reverse=Zb,Mb.prototype.value=$b,U.prototype.at=$l,U.prototype.chain=ch,U.prototype.commit=dh,U.prototype.next=eh,U.prototype.plant=gh,U.prototype.reverse=hh,U.prototype.toJSON=U.prototype.valueOf=U.prototype.value=ih,U.prototype.first=U.prototype.head,Jk&&(U.prototype[Jk]=fh),U},sd=rd();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(bd._=sd,define(function(){return sd})):dd?((dd.exports=sd)._=sd,cd._=sd):bd._=sd}.call(this);var paper=function(a,b){a=a||require("./node/window.js");var c=a.window,d=a.document,e=new function(){function a(a,b,e,f,g){function j(d,j){"string"==typeof(j=j||(j=h(b,d))&&(j.get?j:j.value))&&"#"===j[0]&&(j=a[j.substring(1)]||j);var l,m="function"==typeof j,n=j,o=g||m&&!j.base?j&&j.get?d in a:a[d]:null;g&&o||(m&&o&&(j.base=o),m&&!1!==f&&(l=d.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(k[l[3].toLowerCase()+l[4]]=l[2]),n&&!m&&n.get&&"function"==typeof n.get&&c.isPlainObject(n)||(n={value:n,writable:!0}),(h(a,d)||{configurable:!0}).configurable&&(n.configurable=!0,n.enumerable=e),i(a,d,n))}var k={};if(b){for(var l in b)b.hasOwnProperty(l)&&!d.test(l)&&j(l);for(var l in k){var m=k[l],n=a["set"+m],o=a["get"+m]||n&&a["is"+m];!o||!0!==f&&0!==o.length||j(l,{get:o,set:n})}}return a}function c(){for(var a=0,b=arguments.length;a<b;a++){var c=arguments[a];c&&l(this,c)}return this}var d=/^(statics|enumerable|beans|preserve)$/,e=[],f=e.slice,g=Object.create,h=Object.getOwnPropertyDescriptor,i=Object.defineProperty,j=e.forEach||function(a,b){for(var c=0,d=this.length;c<d;c++)a.call(b,this[c],c,this)},k=function(a,b){for(var c in this)this.hasOwnProperty(c)&&a.call(b,this[c],c,this)},l=Object.assign||function(a){for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b];for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a},m=function(a,b,c){if(a){var d=h(a,"length");(d&&"number"==typeof d.value?j:k).call(a,b,c=c||a)}return c};return a(c,{inject:function(b){if(b){var c=!0===b.statics?b:b.statics,d=b.beans,e=b.preserve;c!==b&&a(this.prototype,b,b.enumerable,d,e),a(this,c,!0,d,e)}for(var f=1,g=arguments.length;f<g;f++)this.inject(arguments[f]);return this},extend:function(){for(var b,c,d,e=this,f=0,h=arguments.length;f<h&&(!b||!c);f++)d=arguments[f],b=b||d.initialize,c=c||d.prototype;return b=b||function(){e.apply(this,arguments)},c=b.prototype=c||g(this.prototype),i(c,"constructor",{value:b,writable:!0,configurable:!0}),a(b,this,!0),arguments.length&&this.inject.apply(b,arguments),b.base=e,b}},!0).inject({initialize:c,set:c,inject:function(){for(var b=0,c=arguments.length;b<c;b++){var d=arguments[b];d&&a(this,d,d.enumerable,d.beans,d.preserve)}return this},extend:function(){var a=g(this);return a.inject.apply(a,arguments)},
each:function(a,b){return m(this,a,b)},clone:function(){return new this.constructor(this)},statics:{set:l,each:m,create:g,define:i,describe:h,clone:function(a){return l(new a.constructor,a)},isPlainObject:function(a){var b=null!=a&&a.constructor;return b&&(b===Object||b===c||"Object"===b.name)},pick:function(a,c){return a!==b?a:c},slice:function(a,b,c){return f.call(a,b,c)}}})};"undefined"!=typeof module&&(module.exports=e),e.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+e.each(this,function(a,b){if(!/^_/.test(b)){var c=typeof a;this.push(b+": "+("number"===c?i.instance.number(a):"string"===c?"'"+a+"'":a))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(a){return e.importJSON(a,this)},exportJSON:function(a){return e.exportJSON(this,a)},toJSON:function(){return e.serialize(this)},set:function(a,b){return a&&e.filter(this,a,b,this._prioritize),this},statics:{exports:{enumerable:!0},extend:function a(){var b=a.base.apply(this,arguments),c=b.prototype._class;return c&&!e.exports[c]&&(e.exports[c]=b),b},equals:function(a,b){if(a===b)return!0;if(a&&a.equals)return a.equals(b);if(b&&b.equals)return b.equals(a);if(a&&b&&"object"==typeof a&&"object"==typeof b){if(Array.isArray(a)&&Array.isArray(b)){var c=a.length;if(c!==b.length)return!1;for(;c--;)if(!e.equals(a[c],b[c]))return!1}else{var d=Object.keys(a),c=d.length;if(c!==Object.keys(b).length)return!1;for(;c--;){var f=d[c];if(!b.hasOwnProperty(f)||!e.equals(a[f],b[f]))return!1}}return!0}return!1},read:function(a,c,d,f){if(this===e){var g=this.peek(a,c);return a.__index++,g}var h=this.prototype,i=h._readIndex,j=c||i&&a.__index||0,k=a.length,l=a[j];return f=f||k-j,l instanceof this||d&&d.readNull&&null==l&&f<=1?(i&&(a.__index=j+1),l&&d&&d.clone?l.clone():l):(l=e.create(h),i&&(l.__read=!0),l=l.initialize.apply(l,j>0||j+f<k?e.slice(a,j,j+f):a)||l,i&&(a.__index=j+l.__read,l.__read=b),l)},peek:function(a,b){return a[a.__index=b||a.__index||0]},remain:function(a){return a.length-(a.__index||0)},readList:function(a,b,c,d){for(var e,f=[],g=b||0,h=d?g+d:a.length,i=g;i<h;i++)f.push(Array.isArray(e=a[i])?this.read(e,0,c):this.read(a,i,c,1));return f},readNamed:function(a,c,d,f,g){var h=this.getNamed(a,c),i=h!==b;if(i){var j=a._filtered;j||(j=a._filtered=e.create(a[0]),j._unfiltered=a[0]),j[c]=b}return this.read(i?[h]:a,d,f,g)},getNamed:function(a,c){var d=a[0];if(a._hasObject===b&&(a._hasObject=1===a.length&&e.isPlainObject(d)),a._hasObject)return c?d[c]:a._filtered||d},hasNamed:function(a,b){return!!this.getNamed(a,b)},filter:function(a,c,d,e){function f(e){if(!(d&&e in d||g&&e in g)){var f=c[e];f!==b&&(a[e]=f)}}var g;if(e){for(var h,i={},j=0,k=e.length;j<k;j++)(h=e[j])in c&&(f(h),i[h]=!0);g=i}return Object.keys(c._unfiltered||c).forEach(f),a},isPlainValue:function(a,b){return e.isPlainObject(a)||Array.isArray(a)||b&&"string"==typeof a},serialize:function(a,b,c,d){b=b||{};var f,g=!d;if(g&&(b.formatter=new i(b.precision),d={length:0,definitions:{},references:{},add:function(a,b){var c="#"+a._id,d=this.references[c];if(!d){this.length++;var e=b.call(a),f=a._class;f&&e[0]!==f&&e.unshift(f),this.definitions[c]=e,d=this.references[c]=[c]}return d}}),a&&a._serialize){f=a._serialize(b,d);var h=a._class;!h||a._compactSerialize||!g&&c||f[0]===h||f.unshift(h)}else if(Array.isArray(a)){f=[];for(var j=0,k=a.length;j<k;j++)f[j]=e.serialize(a[j],b,c,d)}else if(e.isPlainObject(a)){f={};for(var l=Object.keys(a),j=0,k=l.length;j<k;j++){var m=l[j];f[m]=e.serialize(a[m],b,c,d)}}else f="number"==typeof a?b.formatter.number(a,b.precision):a;return g&&d.length>0?[["dictionary",d.definitions],f]:f},deserialize:function(a,b,c,d,f){var g=a,h=!c,i=h&&a&&a.length&&"dictionary"===a[0][0];if(c=c||{},Array.isArray(a)){var j=a[0],k="dictionary"===j;if(1==a.length&&/^#/.test(j))return c.dictionary[j];j=e.exports[j],g=[];for(var l=j?1:0,m=a.length;l<m;l++)g.push(e.deserialize(a[l],b,c,k,i));if(j){var n=g;b?g=b(j,n,h||f):(g=e.create(j.prototype),j.apply(g,n))}}else if(e.isPlainObject(a)){g={},d&&(c.dictionary=g);for(var o in a)g[o]=e.deserialize(a[o],b,c)}return i?g[1]:g},exportJSON:function(a,b){var c=e.serialize(a,b);return b&&!1===b.asString?c:JSON.stringify(c)},importJSON:function(a,b){return e.deserialize("string"==typeof a?JSON.parse(a):a,function(a,c,d){var f=d&&b&&b.constructor===a,g=f?b:e.create(a.prototype);if(1===c.length&&g instanceof u&&(f||!(g instanceof w))){var h=c[0];e.isPlainObject(h)&&(h.insert=!1)}return(f?g.set:a).apply(g,c),f&&(b=null),g})},splice:function(a,c,d,e){var f=c&&c.length,g=d===b;(d=g?a.length:d)>a.length&&(d=a.length);for(var h=0;h<f;h++)c[h]._index=d+h;if(g)return a.push.apply(a,c),[];var i=[d,e];c&&i.push.apply(i,c);for(var j=a.splice.apply(a,i),h=0,k=j.length;h<k;h++)j[h]._index=b;for(var h=d+f,k=a.length;h<k;h++)a[h]._index=h;return j},capitalize:function(a){return a.replace(/\b[a-z]/g,function(a){return a.toUpperCase()})},camelize:function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},hyphenate:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var f={on:function(a,b){if("string"!=typeof a)e.each(a,function(a,b){this.on(b,a)},this);else{var c=this._eventTypes,d=c&&c[a],f=this._callbacks=this._callbacks||{};f=f[a]=f[a]||[],-1===f.indexOf(b)&&(f.push(b),d&&d.install&&1===f.length&&d.install.call(this,a))}return this},off:function(a,b){if("string"!=typeof a)return void e.each(a,function(a,b){this.off(b,a)},this);var c,d=this._eventTypes,f=d&&d[a],g=this._callbacks&&this._callbacks[a];return g&&(!b||-1!==(c=g.indexOf(b))&&1===g.length?(f&&f.uninstall&&f.uninstall.call(this,a),delete this._callbacks[a]):-1!==c&&g.splice(c,1)),this},once:function(a,b){return this.on(a,function(){b.apply(this,arguments),this.off(a,b)})},emit:function(a,b){var c=this._callbacks&&this._callbacks[a];if(!c)return!1;var d=e.slice(arguments,1),f=b&&b.target&&!b.currentTarget;c=c.slice(),f&&(b.currentTarget=this);for(var g=0,h=c.length;g<h;g++)if(!1===c[g].apply(this,d)){b&&b.stop&&b.stop();break}return f&&delete b.currentTarget,!0},responds:function(a){return!(!this._callbacks||!this._callbacks[a])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(a){var b=this._eventTypes,c=this._callbacks,d=a?"install":"uninstall";if(b)for(var e in c)if(c[e].length>0){var f=b[e],g=f&&f[d];g&&g.call(this,e)}},statics:{inject:function a(b){var c=b._events;if(c){var d={};e.each(c,function(a,c){var f="string"==typeof a,g=f?a:c,h=e.capitalize(g),i=g.substring(2).toLowerCase();d[i]=f?{}:a,g="_"+g,b["get"+h]=function(){return this[g]},b["set"+h]=function(a){var b=this[g];b&&this.off(i,b),a&&this.on(i,a),this[g]=a}}),b._eventTypes=d}return a.base.apply(this,arguments)}}},g=e.extend({_class:"PaperScope",initialize:function b(){paper=this,this.settings=new e({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=b._id++,b._scopes[this._id]=this;var c=b.prototype;if(!this.support){var d=aa.getContext(1,1)||{};c.support={nativeDash:"setLineDash"in d||"mozDash"in d,nativeBlendModes:ba.nativeModes},aa.release(d)}if(!this.agent){var f=a.navigator.userAgent.toLowerCase(),g=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(f)||[])[0],h="darwin"===g?"mac":g,i=c.agent=c.browser={platform:h};h&&(i[h]=!0),f.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(a,b,c,d,e){if(!i.chrome){var f="opera"===b?d:/^(node|trident)$/.test(b)?e:c;i.version=f,i.versionNumber=parseFloat(f),b="trident"===b?"msie":b,i.name=b,i[b]=!0}}),i.chrome&&delete i.webkit,i.atom&&delete i.chrome}},version:"0.10.3",getView:function(){var a=this.project;return a&&a._view},getPaper:function(){return this},execute:function(a,b){paper.PaperScript.execute(a,this,b),T.updateFocus()},install:function(a){var b=this;e.each(["project","view","tool"],function(c){e.define(a,c,{configurable:!0,get:function(){return b[c]}})});for(var c in this)!/^_/.test(c)&&this[c]&&(a[c]=this[c])},setup:function(a){return paper=this,this.project=new t(a),this},createCanvas:function(a,b){return aa.getCanvas(a,b)},activate:function(){paper=this},clear:function(){for(var a=this.projects,b=this.tools,c=this.palettes,d=a.length-1;d>=0;d--)a[d].remove();for(var d=b.length-1;d>=0;d--)b[d].remove();for(var d=c.length-1;d>=0;d--)c[d].remove()},remove:function(){this.clear(),delete g._scopes[this._id]},statics:new function(){function a(a){return a+="Attribute",function(b,c){return b[a](c)||b[a]("data-paper-"+c)}}return{_scopes:{},_id:0,get:function(a){return this._scopes[a]||null},getAttribute:a("get"),hasAttribute:a("has")}}}),h=e.extend(f,{initialize:function(a){this._scope=paper,this._index=this._scope[this._list].push(this)-1,!a&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var a=this._scope[this._reference];return a&&a!==this&&a.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",a),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(e.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),i=e.extend({initialize:function(a){this.precision=e.pick(a,5),this.multiplier=Math.pow(10,this.precision)},number:function(a){return this.precision<16?Math.round(a*this.multiplier)/this.multiplier:a},pair:function(a,b,c){return this.number(a)+(c||",")+this.number(b)},point:function(a,b){return this.number(a.x)+(b||",")+this.number(a.y)},size:function(a,b){return this.number(a.width)+(b||",")+this.number(a.height)},rectangle:function(a,b){return this.point(a,b)+(b||",")+this.size(a,b)}});i.instance=new i;var j=new function(){function a(a,b,c){return a<b?b:a>c?c:a}function b(a,b,c){function d(a){var b=134217729*a,c=a-b,d=c+b;return[d,a-d]}var e=b*b-a*c,g=b*b+a*c;if(3*f(e)<g){var h=d(a),i=d(b),j=d(c),k=b*b,l=i[0]*i[0]-k+2*i[0]*i[1]+i[1]*i[1],m=a*c;e=k-m+(l-(h[0]*j[0]-m+h[0]*j[1]+h[1]*j[0]+h[1]*j[1]))}return e}function c(){var a=Math.max.apply(Math,arguments);return a&&(a<1e-8||a>1e8)?h(2,-Math.round(i(a))):0}var d=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],f=Math.abs,g=Math.sqrt,h=Math.pow,i=Math.log2||function(a){return Math.log(a)*Math.LOG2E},k=1e-12,l=1.12e-16;return{EPSILON:k,MACHINE_EPSILON:l,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(g(2)-1)/3,isZero:function(a){return a>=-k&&a<=k},clamp:a,integrate:function(a,b,c,f){for(var g=d[f-2],h=e[f-2],i=.5*(c-b),j=i+b,k=0,l=f+1>>1,m=1&f?h[k++]*a(j):0;k<l;){var n=i*g[k];m+=h[k++]*(a(j+n)+a(j-n))}return i*m},findRoot:function(b,c,d,e,g,h,i){for(var j=0;j<h;j++){var k=b(d),l=k/c(d),m=d-l;if(f(l)<i){d=m;break}k>0?(g=d,d=m<=e?.5*(e+g):m):(e=d,d=m>=g?.5*(e+g):m)}return a(d,e,g)},solveQuadratic:function(d,e,h,i,j,m){var n,o=1/0;if(f(d)<k){if(f(e)<k)return f(h)<k?-1:0;n=-h/e}else{e*=-.5;var p=b(d,e,h);if(p&&f(p)<l){var q=c(f(d),f(e),f(h));q&&(d*=q,e*=q,h*=q,p=b(d,e,h))}if(p>=-l){var r=p<0?0:g(p),s=e+(e<0?-r:r);0===s?(n=h/d,o=-n):(n=s/d,o=h/s)}}var t=0,u=null==j,v=j-k,w=m+k;return isFinite(n)&&(u||n>v&&n<w)&&(i[t++]=u?n:a(n,j,m)),o!==n&&isFinite(o)&&(u||o>v&&o<w)&&(i[t++]=u?o:a(o,j,m)),t},solveCubic:function(b,d,e,i,m,n,o){function p(a){q=a;var c=b*q;r=c+d,s=r*q+e,t=(c+r)*q+s,u=s*q+i}var q,r,s,t,u,v=c(f(b),f(d),f(e),f(i));if(v&&(b*=v,d*=v,e*=v,i*=v),f(b)<k)b=d,r=e,s=i,q=1/0;else if(f(i)<k)r=d,s=e,q=0;else{p(-d/b/3);var w=u/b,x=h(f(w),1/3),y=w<0?-1:1,z=-t/b,A=z>0?1.324717957244746*Math.max(x,g(z)):x,B=q-y*A;if(B!==q){do{p(B),B=0===t?q:q-u/t/(1+l)}while(y*B>y*q);f(b)*q*q>f(i/q)&&(s=-i/q,r=(s-e)/q)}}var C=j.solveQuadratic(b,r,s,m,n,o),D=null==n;return isFinite(q)&&(0===C||C>0&&q!==m[0]&&q!==m[1])&&(D||q>n-k&&q<o+k)&&(m[C++]=D?q:a(q,n,o)),C}}},k={_id:1,_pools:{},get:function(a){if(a){var b=this._pools[a];return b||(b=this._pools[a]={_id:1}),b._id++}return this._id++}},l=e.extend({_class:"Point",_readIndex:!0,initialize:function(a,b){var c=typeof a,d=this.__read,e=0;if("number"===c){var f="number"==typeof b;this._set(a,f?b:a),d&&(e=f?2:1)}else if("undefined"===c||null===a)this._set(0,0),d&&(e=null===a?1:0);else{var g="string"===c?a.split(/[\s,]+/)||[]:a;e=1,Array.isArray(g)?this._set(+g[0],+(g.length>1?g[1]:g[0])):"x"in g?this._set(g.x||0,g.y||0):"width"in g?this._set(g.width||0,g.height||0):"angle"in g?(this._set(g.length||0,0),this.setAngle(g.angle||0)):(this._set(0,0),e=0)}return d&&(this.__read=e),this},set:"#initialize",_set:function(a,b){return this.x=a,this.y=b,this},equals:function(a){return this===a||a&&(this.x===a.x&&this.y===a.y||Array.isArray(a)&&this.x===a[0]&&this.y===a[1])||!1},clone:function(){return new l(this.x,this.y)},toString:function(){var a=i.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.x),b.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(a){if(this.isZero()){var b=this._angle||0;this._set(Math.cos(b)*a,Math.sin(b)*a)}else{var c=a/this.getLength();j.isZero(c)&&this.getAngle(),this._set(this.x*c,this.y*c)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(a){this.setAngleInRadians.call(this,a*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var a=l.read(arguments),b=this.getLength()*a.getLength();if(j.isZero(b))return NaN;var c=this.dot(a)/b;return Math.acos(c<-1?-1:c>1?1:c)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(a){if(this._angle=a,!this.isZero()){var b=this.getLength();this._set(Math.cos(a)*b,Math.sin(a)*b)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var a=l.read(arguments);return 180*Math.atan2(this.cross(a),this.dot(a))/Math.PI},getDistance:function(){var a=l.read(arguments),b=a.x-this.x,c=a.y-this.y,d=b*b+c*c;return e.read(arguments)?d:Math.sqrt(d)},normalize:function(a){a===b&&(a=1);var c=this.getLength(),d=0!==c?a/c:0,e=new l(this.x*d,this.y*d);return d>=0&&(e._angle=this._angle),e},rotate:function(a,b){if(0===a)return this.clone();a=a*Math.PI/180;var c=b?this.subtract(b):this,d=Math.sin(a),e=Math.cos(a);return c=new l(c.x*e-c.y*d,c.x*d+c.y*e),b?c.add(b):c},transform:function(a){return a?a._transformPoint(this):this},add:function(){var a=l.read(arguments);return new l(this.x+a.x,this.y+a.y)},subtract:function(){var a=l.read(arguments);return new l(this.x-a.x,this.y-a.y)},multiply:function(){var a=l.read(arguments);return new l(this.x*a.x,this.y*a.y)},divide:function(){var a=l.read(arguments);return new l(this.x/a.x,this.y/a.y)},modulo:function(){var a=l.read(arguments);return new l(this.x%a.x,this.y%a.y)},negate:function(){return new l(-this.x,-this.y)},isInside:function(){return p.read(arguments).contains(this)},isClose:function(){var a=l.read(arguments),b=e.read(arguments);return this.getDistance(a)<=b},isCollinear:function(){var a=l.read(arguments);return l.isCollinear(this.x,this.y,a.x,a.y)},isColinear:"#isCollinear",isOrthogonal:function(){var a=l.read(arguments);return l.isOrthogonal(this.x,this.y,a.x,a.y)},isZero:function(){var a=j.isZero;return a(this.x)&&a(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(a){return this.x*(a>1&&a<4?-1:1)>=0&&this.y*(a>2?-1:1)>=0},dot:function(){var a=l.read(arguments);return this.x*a.x+this.y*a.y},cross:function(){var a=l.read(arguments);return this.x*a.y-this.y*a.x},project:function(){var a=l.read(arguments),b=a.isZero()?0:this.dot(a)/a.dot(a);return new l(a.x*b,a.y*b)},statics:{min:function(){var a=l.read(arguments),b=l.read(arguments);return new l(Math.min(a.x,b.x),Math.min(a.y,b.y))},max:function(){var a=l.read(arguments),b=l.read(arguments);return new l(Math.max(a.x,b.x),Math.max(a.y,b.y))},random:function(){return new l(Math.random(),Math.random())},isCollinear:function(a,b,c,d){return Math.abs(a*d-b*c)<=1e-8*Math.sqrt((a*a+b*b)*(c*c+d*d))},isOrthogonal:function(a,b,c,d){return Math.abs(a*c+b*d)<=1e-8*Math.sqrt((a*a+b*b)*(c*c+d*d))}}},e.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return new l(b(this.x),b(this.y))}},{})),m=l.extend({initialize:function(a,b,c,d){this._x=a,this._y=b,this._owner=c,this._setter=d},_set:function(a,b,c){return this._x=a,this._y=b,c||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner.changeSelection(this._getSelection(),a)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),n=e.extend({_class:"Size",_readIndex:!0,initialize:function(a,b){var c=typeof a,d=this.__read,e=0;if("number"===c){var f="number"==typeof b;this._set(a,f?b:a),d&&(e=f?2:1)}else if("undefined"===c||null===a)this._set(0,0),d&&(e=null===a?1:0);else{var g="string"===c?a.split(/[\s,]+/)||[]:a;e=1,Array.isArray(g)?this._set(+g[0],+(g.length>1?g[1]:g[0])):"width"in g?this._set(g.width||0,g.height||0):"x"in g?this._set(g.x||0,g.y||0):(this._set(0,0),e=0)}return d&&(this.__read=e),this},set:"#initialize",_set:function(a,b){return this.width=a,this.height=b,this},equals:function(a){return a===this||a&&(this.width===a.width&&this.height===a.height||Array.isArray(a)&&this.width===a[0]&&this.height===a[1])||!1},clone:function(){return new n(this.width,this.height)},toString:function(){var a=i.instance;return"{ width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.width),b.number(this.height)]},add:function(){var a=n.read(arguments);return new n(this.width+a.width,this.height+a.height)},subtract:function(){var a=n.read(arguments);return new n(this.width-a.width,this.height-a.height)},multiply:function(){var a=n.read(arguments);return new n(this.width*a.width,this.height*a.height)},divide:function(){var a=n.read(arguments);return new n(this.width/a.width,this.height/a.height)},modulo:function(){var a=n.read(arguments);return new n(this.width%a.width,this.height%a.height)},negate:function(){return new n(-this.width,-this.height)},isZero:function(){var a=j.isZero;return a(this.width)&&a(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(a,b){return new n(Math.min(a.width,b.width),Math.min(a.height,b.height))},max:function(a,b){return new n(Math.max(a.width,b.width),Math.max(a.height,b.height))},random:function(){return new n(Math.random(),Math.random())}}},e.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return new n(b(this.width),b(this.height))}},{})),o=n.extend({initialize:function(a,b,c,d){this._width=a,this._height=b,this._owner=c,this._setter=d},_set:function(a,b,c){return this._width=a,this._height=b,c||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(a){this._width=a,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(a){this._height=a,this._owner[this._setter](this)}}),p=e.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(a,c,d,f){var g,h=typeof a;if("number"===h?(this._set(a,c,d,f),g=4):"undefined"===h||null===a?(this._set(0,0,0,0),g=null===a?1:0):1===arguments.length&&(Array.isArray(a)?(this._set.apply(this,a),g=1):a.x!==b||a.width!==b?(this._set(a.x||0,a.y||0,a.width||0,a.height||0),g=1):a.from===b&&a.to===b&&(this._set(0,0,0,0),e.filter(this,a),g=1)),g===b){var i,j,k=l.readNamed(arguments,"from"),m=e.peek(arguments),o=k.x,p=k.y;if(m&&m.x!==b||e.hasNamed(arguments,"to")){var q=l.readNamed(arguments,"to");i=q.x-o,j=q.y-p,i<0&&(o=q.x,i=-i),j<0&&(p=q.y,j=-j)}else{var r=n.read(arguments);i=r.width,j=r.height}this._set(o,p,i,j),g=arguments.__index}return this.__read&&(this.__read=g),this},set:"#initialize",_set:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},clone:function(){return new p(this.x,this.y,this.width,this.height)},equals:function(a){var b=e.isPlainValue(a)?p.read(arguments):a;return b===this||b&&this.x===b.x&&this.y===b.y&&this.width===b.width&&this.height===b.height||!1},toString:function(){var a=i.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+", width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.x),b.number(this.y),b.number(this.width),b.number(this.height)]},getPoint:function(a){return new(a?l:m)(this.x,this.y,this,"setPoint")},setPoint:function(){var a=l.read(arguments);this.x=a.x,this.y=a.y},getSize:function(a){return new(a?n:o)(this.width,this.height,this,"setSize")},setSize:function(){var a=n.read(arguments);this._fixX&&(this.x+=(this.width-a.width)*this._fixX),this._fixY&&(this.y+=(this.height-a.height)*this._fixY),this.width=a.width,this.height=a.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(a){this._fixW||(this.width-=a-this.x),this.x=a,this._fixX=0},getTop:function(){return this.y},setTop:function(a){this._fixH||(this.height-=a-this.y),this.y=a,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(a){this._fixX!==b&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=a-this.width:this.width=a-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(a){this._fixY!==b&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=a-this.height:this.height=a-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(a){this.x=a-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(a){this.y=a-.5*this.height,this._fixY=.5},getCenter:function(a){return new(a?l:m)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var a=l.read(arguments);return this.setCenterX(a.x),this.setCenterY(a.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(a){return a&&a.width!==b||4===(Array.isArray(a)?a:arguments).length?this._containsRectangle(p.read(arguments)):this._containsPoint(l.read(arguments))},_containsPoint:function(a){var b=a.x,c=a.y;return b>=this.x&&c>=this.y&&b<=this.x+this.width&&c<=this.y+this.height},_containsRectangle:function(a){var b=a.x,c=a.y;return b>=this.x&&c>=this.y&&b+a.width<=this.x+this.width&&c+a.height<=this.y+this.height},intersects:function(){var a=p.read(arguments);return a.x+a.width>this.x&&a.y+a.height>this.y&&a.x<this.x+this.width&&a.y<this.y+this.height},touches:function(){var a=p.read(arguments);return a.x+a.width>=this.x&&a.y+a.height>=this.y&&a.x<=this.x+this.width&&a.y<=this.y+this.height},intersect:function(){var a=p.read(arguments),b=Math.max(this.x,a.x),c=Math.max(this.y,a.y),d=Math.min(this.x+this.width,a.x+a.width),e=Math.min(this.y+this.height,a.y+a.height);return new p(b,c,d-b,e-c)},unite:function(){var a=p.read(arguments),b=Math.min(this.x,a.x),c=Math.min(this.y,a.y),d=Math.max(this.x+this.width,a.x+a.width),e=Math.max(this.y+this.height,a.y+a.height);return new p(b,c,d-b,e-c)},include:function(){var a=l.read(arguments),b=Math.min(this.x,a.x),c=Math.min(this.y,a.y),d=Math.max(this.x+this.width,a.x),e=Math.max(this.y+this.height,a.y);return new p(b,c,d-b,e-c)},expand:function(){var a=n.read(arguments),b=a.width,c=a.height;return new p(this.x-b/2,this.y-c/2,this.width+b,this.height+c)},scale:function(a,c){return this.expand(this.width*a-this.width,this.height*(c===b?a:c)-this.height)}},e.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(a,b){var c=a.join(""),d=/^[RL]/.test(c);b>=4&&(a[1]+=d?"Y":"X");var e=a[d?0:1],f=a[d?1:0],g="get"+e,h="get"+f,i="set"+e,j="set"+f,k="get"+c,n="set"+c;this[k]=function(a){return new(a?l:m)(this[g](),this[h](),this,n)},this[n]=function(){var a=l.read(arguments);this[i](a.x),this[j](a.y)}},{beans:!0})),q=p.extend({initialize:function(a,b,c,d,e,f){this._set(a,b,c,d,!0),this._owner=e,this._setter=f},_set:function(a,b,c,d,e){return this._x=a,this._y=b,this._width=c,this._height=d,e||this._owner[this._setter](this),this}},new function(){var a=p.prototype;return e.each(["x","y","width","height"],function(a){var b=e.capitalize(a),c="_"+a;this["get"+b]=function(){return this[c]},this["set"+b]=function(a){this[c]=a,this._dontNotify||this._owner[this._setter](this)}},e.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(b){var c="set"+b;this[c]=function(){this._dontNotify=!0,a[c].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(a){var b=this._owner;b.changeSelection&&b.changeSelection(2,a)}}))}),r=e.extend({_class:"Matrix",initialize:function a(b,c){var d=arguments.length,e=!0;if(d>=6?this._set.apply(this,arguments):1===d||2===d?b instanceof a?this._set(b._a,b._b,b._c,b._d,b._tx,b._ty,c):Array.isArray(b)?this._set.apply(this,c?b.concat([c]):b):e=!1:d?e=!1:this.reset(),!e)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(a,b,c,d,e,f,g){return this._a=a,this._b=b,this._c=c,this._d=d,this._tx=e,this._ty=f,g||this._changed(),this},_serialize:function(a,b){return e.serialize(this.getValues(),a,!0,b)},_changed:function(){var a=this._owner;a&&(a._applyMatrix?a.transform(null,!0):a._changed(9))},clone:function(){return new r(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(a){return a===this||a&&this._a===a._a&&this._b===a._b&&this._c===a._c&&this._d===a._d&&this._tx===a._tx&&this._ty===a._ty},toString:function(){var a=i.instance;return"[["+[a.number(this._a),a.number(this._c),a.number(this._tx)].join(", ")+"], ["+[a.number(this._b),a.number(this._d),a.number(this._ty)].join(", ")+"]]"},reset:function(a){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,a||this._changed(),this},apply:function(a,b){var c=this._owner;return!!c&&(c.transform(null,!0,e.pick(a,!0),b),this.isIdentity())},translate:function(){var a=l.read(arguments),b=a.x,c=a.y;return this._tx+=b*this._a+c*this._c,this._ty+=b*this._b+c*this._d,this._changed(),this},scale:function(){var a=l.read(arguments),b=l.read(arguments,0,{readNull:!0});return b&&this.translate(b),this._a*=a.x,this._b*=a.x,this._c*=a.y,this._d*=a.y,b&&this.translate(b.negate()),this._changed(),this},rotate:function(a){a*=Math.PI/180;var b=l.read(arguments,1),c=b.x,d=b.y,e=Math.cos(a),f=Math.sin(a),g=c-c*e+d*f,h=d-c*f-d*e,i=this._a,j=this._b,k=this._c,m=this._d;return this._a=e*i+f*k,this._b=e*j+f*m,this._c=-f*i+e*k,this._d=-f*j+e*m,this._tx+=g*i+h*k,this._ty+=g*j+h*m,this._changed(),this},shear:function(){var a=l.read(arguments),b=l.read(arguments,0,{readNull:!0});b&&this.translate(b);var c=this._a,d=this._b;return this._a+=a.y*this._c,this._b+=a.y*this._d,this._c+=a.x*c,this._d+=a.x*d,b&&this.translate(b.negate()),this._changed(),this},skew:function(){var a=l.read(arguments),b=l.read(arguments,0,{readNull:!0}),c=Math.PI/180,d=new l(Math.tan(a.x*c),Math.tan(a.y*c));return this.shear(d,b)},append:function(a){if(a){var b=this._a,c=this._b,d=this._c,e=this._d,f=a._a,g=a._c,h=a._b,i=a._d,j=a._tx,k=a._ty;this._a=f*b+h*d,this._c=g*b+i*d,this._b=f*c+h*e,this._d=g*c+i*e,this._tx+=j*b+k*d,this._ty+=j*c+k*e,this._changed()}return this},prepend:function(a){if(a){var b=this._a,c=this._b,d=this._c,e=this._d,f=this._tx,g=this._ty,h=a._a,i=a._c,j=a._b,k=a._d,l=a._tx,m=a._ty;this._a=h*b+i*c,this._c=h*d+i*e,this._b=j*b+k*c,this._d=j*d+k*e,this._tx=h*f+i*g+l,this._ty=j*f+k*g+m,this._changed()}return this},appended:function(a){return this.clone().append(a)},prepended:function(a){return this.clone().prepend(a)},invert:function(){var a=this._a,b=this._b,c=this._c,d=this._d,e=this._tx,f=this._ty,g=a*d-b*c,h=null;return g&&!isNaN(g)&&isFinite(e)&&isFinite(f)&&(this._a=d/g,this._b=-b/g,this._c=-c/g,this._d=a/g,this._tx=(c*f-d*e)/g,this._ty=(b*e-a*f)/g,h=this),h},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new r(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var a=this._a*this._d-this._c*this._b;return a&&!isNaN(a)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(a,b,c){return arguments.length<3?this._transformPoint(l.read(arguments)):this._transformCoordinates(a,b,c)},_transformPoint:function(a,b,c){var d=a.x,e=a.y;return b||(b=new l),b._set(d*this._a+e*this._c+this._tx,d*this._b+e*this._d+this._ty,c)},_transformCoordinates:function(a,b,c){for(var d=0,e=2*c;d<e;d+=2){var f=a[d],g=a[d+1];b[d]=f*this._a+g*this._c+this._tx,b[d+1]=f*this._b+g*this._d+this._ty}
return b},_transformCorners:function(a){var b=a.x,c=a.y,d=b+a.width,e=c+a.height,f=[b,c,d,c,d,e,b,e];return this._transformCoordinates(f,f,4)},_transformBounds:function(a,b,c){for(var d=this._transformCorners(a),e=d.slice(0,2),f=e.slice(),g=2;g<8;g++){var h=d[g],i=1&g;h<e[i]?e[i]=h:h>f[i]&&(f[i]=h)}return b||(b=new p),b._set(e[0],e[1],f[0]-e[0],f[1]-e[1],c)},inverseTransform:function(){return this._inverseTransform(l.read(arguments))},_inverseTransform:function(a,b,c){var d=this._a,e=this._b,f=this._c,g=this._d,h=this._tx,i=this._ty,j=d*g-e*f,k=null;if(j&&!isNaN(j)&&isFinite(h)&&isFinite(i)){var m=a.x-this._tx,n=a.y-this._ty;b||(b=new l),k=b._set((m*g-n*f)/j,(n*d-m*e)/j,c)}return k},decompose:function(){var a,b,c,d=this._a,e=this._b,f=this._c,g=this._d,h=d*g-e*f,i=Math.sqrt,j=Math.atan2,k=180/Math.PI;if(0!==d||0!==e){var m=i(d*d+e*e);a=Math.acos(d/m)*(e>0?1:-1),b=[m,h/m],c=[j(d*f+e*g,m*m),0]}else if(0!==f||0!==g){var n=i(f*f+g*g);a=Math.asin(f/n)*(g>0?1:-1),b=[h/n,n],c=[0,j(d*f+e*g,n*n)]}else a=0,c=b=[0,0];return{translation:this.getTranslation(),rotation:a*k,scaling:new l(b),skewing:new l(c[0]*k,c[1]*k)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new l(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(a){this.isIdentity()||a.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},e.each(["a","b","c","d","tx","ty"],function(a){var b=e.capitalize(a),c="_"+a;this["get"+b]=function(){return this[c]},this["set"+b]=function(a){this[c]=a,this._changed()}},{})),s=e.extend({_class:"Line",initialize:function(a,b,c,d,e){var f=!1;arguments.length>=4?(this._px=a,this._py=b,this._vx=c,this._vy=d,f=e):(this._px=a.x,this._py=a.y,this._vx=b.x,this._vy=b.y,f=c),f||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new l(this._px,this._py)},getVector:function(){return new l(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(a,b){return s.intersect(this._px,this._py,this._vx,this._vy,a._px,a._py,a._vx,a._vy,!0,b)},getSide:function(a,b){return s.getSide(this._px,this._py,this._vx,this._vy,a.x,a.y,!0,b)},getDistance:function(a){return Math.abs(s.getSignedDistance(this._px,this._py,this._vx,this._vy,a.x,a.y,!0))},isCollinear:function(a){return l.isCollinear(this._vx,this._vy,a._vx,a._vy)},isOrthogonal:function(a){return l.isOrthogonal(this._vx,this._vy,a._vx,a._vy)},statics:{intersect:function(a,b,c,d,e,f,g,h,i,k){i||(c-=a,d-=b,g-=e,h-=f);var m=c*h-d*g;if(!j.isZero(m)){var n=a-e,o=b-f,p=(g*o-h*n)/m,q=(c*o-d*n)/m,r=1e-12,s=-r,t=1+r;if(k||s<p&&p<t&&s<q&&q<t)return k||(p=p<=0?0:p>=1?1:p),new l(a+p*c,b+p*d)}},getSide:function(a,b,c,d,e,f,g,h){g||(c-=a,d-=b);var i=e-a,k=f-b,l=i*d-k*c;return!h&&j.isZero(l)&&(l=(i*c+i*c)/(c*c+d*d))>=0&&l<=1&&(l=0),l<0?-1:l>0?1:0},getSignedDistance:function(a,b,c,d,e,f,g){return g||(c-=a,d-=b),0===c?d>0?e-a:a-e:0===d?c<0?f-b:b-f:((e-a)*d-(f-b)*c)/Math.sqrt(c*c+d*d)},getDistance:function(a,b,c,d,e,f,g){return Math.abs(s.getSignedDistance(a,b,c,d,e,f,g))}}}),t=h.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(a){h.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Q(null,null,this),this._view=T.create(this,a||aa.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(a,b){return e.serialize(this._children,a,!0,b)},_changed:function(a,b){if(1&a){var c=this._view;c&&(c._needsUpdate=!0,!c._requested&&c._autoUpdate&&c.requestUpdate())}var d=this._changes;if(d&&b){var e=this._changesById,f=b._id,g=e[f];g?g.flags|=a:d.push(e[f]={item:b,flags:a})}},clear:function(){for(var a=this._children,b=a.length-1;b>=0;b--)a[b].remove()},isEmpty:function(){return!this._children.length},remove:function a(){return!!a.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(a){this._currentStyle.set(a)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new w({project:this,insert:!0})},getSymbolDefinitions:function(){var a=[],b={};return this.getItems({class:z,match:function(c){var d=c._definition,e=d._id;return b[e]||(b[e]=!0,a.push(d)),!1}}),a},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var a=this._selectionItems,b=[];for(var c in a){var d=a[c],e=d._selection;1&e&&d.isInserted()?b.push(d):e||this._updateSelection(d)}return b},_updateSelection:function(a){var b=a._id,c=this._selectionItems;a._selection?c[b]!==a&&(this._selectionCount++,c[b]=a):c[b]===a&&(this._selectionCount--,delete c[b])},selectAll:function(){for(var a=this._children,b=0,c=a.length;b<c;b++)a[b].setFullySelected(!0)},deselectAll:function(){var a=this._selectionItems;for(var b in a)a[b].setFullySelected(!1)},addLayer:function(a){return this.insertLayer(b,a)},insertLayer:function(a,b){if(b instanceof w){b._remove(!1,!0),e.splice(this._children,[b],a,0),b._setProject(this,!0);var c=b._name;c&&b.setName(c),this._changes&&b._changed(5),this._activeLayer||(this._activeLayer=b)}else b=null;return b},_insertItem:function(a,c,d){return c=this.insertLayer(a,c)||(this._activeLayer||this._insertItem(b,new w(u.NO_INSERT),!0)).insertChild(a,c),d&&c.activate&&c.activate(),c},getItems:function(a){return u._getItems(this,a)},getItem:function(a){return u._getItems(this,a,null,null,!0)[0]||null},importJSON:function(a){this.activate();var b=this._activeLayer;return e.importJSON(a,b&&b.isEmpty()&&b)},removeOn:function(a){var b=this._removeSets;if(b){"mouseup"===a&&(b.mousedrag=null);var c=b[a];if(c){for(var d in c){var e=c[d];for(var f in b){var g=b[f];g&&g!=c&&delete g[e._id]}e.remove()}b[a]=null}}},draw:function(a,b,c){this._updateVersion++,a.save(),b.applyToContext(a);for(var d=this._children,f=new e({offset:new l(0,0),pixelRatio:c,viewMatrix:b.isIdentity()?null:b,matrices:[new r],updateMatrix:!0}),g=0,h=d.length;g<h;g++)d[g].draw(a,f);if(a.restore(),this._selectionCount>0){a.save(),a.strokeWidth=1;var i=this._selectionItems,j=this._scope.settings.handleSize,k=this._updateVersion;for(var m in i)i[m]._drawSelection(a,b,j,i,k);a.restore()}}}),u=e.extend(f,{statics:{extend:function a(b){return b._serializeFields&&(b._serializeFields=e.set({},this.prototype._serializeFields,b._serializeFields)),a.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new r,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var a=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return e.each(a,function(a){this._events[a]={install:function(a){this.getView()._countItemEvent(a,1)},uninstall:function(a){this.getView()._countItemEvent(a,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:a}})},{initialize:function(){},_initialize:function(a,c){var d=a&&e.isPlainObject(a),f=d&&!0===a.internal,g=this._matrix=new r,h=d&&a.project||paper.project,i=paper.settings;return this._id=f?null:k.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&i.applyMatrix,c&&g.translate(c),g._owner=this,this._style=new Q(h._currentStyle,this,h),f||d&&!1===a.insert||!i.insertItems&&(!d||!0!==a.insert)?this._setProject(h):(d&&a.parent||h)._insertItem(b,this,!0),d&&a!==u.NO_INSERT&&this.set(a,{internal:!0,insert:!0,project:!0,parent:!0}),d},_serialize:function(a,b){function c(c){for(var g in c){var h=f[g];e.equals(h,"leading"===g?1.2*c.fontSize:c[g])||(d[g]=e.serialize(h,a,"data"!==g,b))}}var d={},f=this;return c(this._serializeFields),this instanceof v||c(this._style._defaults),[this._class,d]},_changed:function(a){var c=this._symbol,d=this._parent||c,e=this._project;8&a&&(this._bounds=this._position=this._decomposed=this._globalMatrix=b),d&&40&a&&u._clearBoundsCache(d),2&a&&u._clearBoundsCache(this),e&&e._changed(a,this),c&&c._changed(a)},getId:function(){return this._id},getName:function(){return this._name},setName:function(a){if(this._name&&this._removeNamed(),a===+a+"")throw new Error("Names consisting only of numbers are not supported.");var c=this._getOwner();if(a&&c){var d=c._children,e=c._namedChildren;(e[a]=e[a]||[]).push(this),a in d||(d[a]=this)}this._name=a||b,this._changed(128)},getStyle:function(){return this._style},setStyle:function(a){this.getStyle().set(a)}},e.each(["locked","visible","blendMode","opacity","guide"],function(a){var b=e.capitalize(a),a="_"+a;this["get"+b]=function(){return this[a]},this["set"+b]=function(b){b!=this[a]&&(this[a]=b,this._changed("_locked"===a?128:129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(a){if(a!==this._selection){this._selection=a;var b=this._project;b&&(b._updateSelection(this),this._changed(129))}},changeSelection:function(a,b){var c=this._selection;this.setSelection(b?c|a:c&~a)},isSelected:function(){if(this._selectChildren)for(var a=this._children,b=0,c=a.length;b<c;b++)if(a[b].isSelected())return!0;return!!(1&this._selection)},setSelected:function(a){if(this._selectChildren)for(var b=this._children,c=0,d=b.length;c<d;c++)b[c].setSelected(a);this.changeSelection(1,a)},isFullySelected:function(){var a=this._children,b=!!(1&this._selection);if(a&&b){for(var c=0,d=a.length;c<d;c++)if(!a[c].isFullySelected())return!1;return!0}return b},setFullySelected:function(a){var b=this._children;if(b)for(var c=0,d=b.length;c<d;c++)b[c].setFullySelected(a);this.changeSelection(1,a)},isClipMask:function(){return this._clipMask},setClipMask:function(a){this._clipMask!=(a=!!a)&&(this._clipMask=a,a&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(a){this._data=a},getPosition:function(a){var b=this._position,c=a?l:m;if(!b){var d=this._pivot;b=this._position=d?this._matrix._transformPoint(d):this.getBounds().getCenter(!0)}return new c(b.x,b.y,this,"setPosition")},setPosition:function(){this.translate(l.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var a=this._pivot;return a?new m(a.x,a.y,this,"setPivot"):null},setPivot:function(){this._pivot=l.read(arguments,0,{clone:!0,readNull:!0}),this._position=b}},e.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(a,b){this[b]=function(b){return this.getBounds(b,a)}},{beans:!0,getBounds:function(a,b){var c=b||a instanceof r,d=e.set({},c?b:a,this._boundsOptions);d.stroke&&!this.getStrokeScaling()||(d.cacheItem=this);var f=this._getCachedBounds(c&&a,d);return arguments.length?f:new q(f.x,f.y,f.width,f.height,this,"setBounds")},setBounds:function(){var a=p.read(arguments),b=this.getBounds(),c=this._matrix,d=new r,e=a.getCenter();d.translate(e),a.width==b.width&&a.height==b.height||(c.isInvertible()||(c.set(c._backup||(new r).translate(c.getTranslation())),b=this.getBounds()),d.scale(0!==b.width?a.width/b.width:0,0!==b.height?a.height/b.height:0)),e=b.getCenter(),d.translate(-e.x,-e.y),this.transform(d)},_getBounds:function(a,b){var c=this._children;return c&&c.length?(u._updateBoundsCache(this,b.cacheItem),u._getBounds(c,a,b)):new p},_getCachedBounds:function(a,b){a=a&&a._orNullIfIdentity();var c=b.internal,d=b.cacheItem,e=c?null:this._matrix._orNullIfIdentity(),f=d&&(!a||a.equals(e))&&[b.stroke?1:0,b.handle?1:0,c?1:0].join("");if(u._updateBoundsCache(this._parent||this._symbol,d),f&&this._bounds&&f in this._bounds)return this._bounds[f].rect.clone();var g=this._getBounds(a||e,b);return f&&(this._bounds||(this._bounds={}),this._bounds[f]={rect:g.clone(),internal:b.internal}),g},_getStrokeMatrix:function(a,b){var c=this.getStrokeScaling()?null:b&&b.internal?this:this._parent||this._symbol&&this._symbol._item,d=c?c.getViewMatrix().invert():a;return d&&d._shiftless()},statics:{_updateBoundsCache:function(a,b){if(a&&b){var c=b._id,d=a._boundsCache=a._boundsCache||{ids:{},list:[]};d.ids[c]||(d.list.push(b),d.ids[c]=b)}},_clearBoundsCache:function(a){var c=a._boundsCache;if(c){a._bounds=a._position=a._boundsCache=b;for(var d=0,e=c.list,f=e.length;d<f;d++){var g=e[d];g!==a&&(g._bounds=g._position=b,g._boundsCache&&u._clearBoundsCache(g))}}},_getBounds:function(a,b,c){var d=1/0,e=-d,f=d,g=e;c=c||{};for(var h=0,i=a.length;h<i;h++){var j=a[h];if(j._visible&&!j.isEmpty()){var k=j._getCachedBounds(b&&b.appended(j._matrix),c);d=Math.min(k.x,d),f=Math.min(k.y,f),e=Math.max(k.x+k.width,e),g=Math.max(k.y+k.height,g)}}return isFinite(d)?new p(d,f,e-d,g-f):new p}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var a=this._decompose();return a?a.rotation:0},setRotation:function(a){var b=this.getRotation();if(null!=b&&null!=a){var c=this._decomposed;this.rotate(a-b),c&&(c.rotation=a,this._decomposed=c)}},getScaling:function(){var a=this._decompose(),b=a&&a.scaling;return new m(b?b.x:1,b?b.y:1,this,"setScaling")},setScaling:function(){var a=this.getScaling(),b=l.read(arguments,0,{clone:!0,readNull:!0});if(a&&b&&!a.equals(b)){var c=this._decomposed;this.scale(b.x/a.x,b.y/a.y),c&&(c.scaling=b,this._decomposed=c)}},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.initialize.apply(a,arguments)},getGlobalMatrix:function(a){var b=this._globalMatrix,c=this._project._updateVersion;if(b&&b._updateVersion!==c&&(b=null),!b){b=this._globalMatrix=this._matrix.clone();var d=this._parent;d&&b.prepend(d.getGlobalMatrix(!0)),b._updateVersion=c}return a?b:b.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(a){(this._applyMatrix=this._canApplyMatrix&&!!a)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(a,b){if(this._project!==a){this._project&&this._installEvents(!1),this._project=a;for(var c=this._children,d=0,e=c&&c.length;d<e;d++)c[d]._setProject(a);b=!0}b&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function a(b){a.base.call(this,b);for(var c=this._children,d=0,e=c&&c.length;d<e;d++)c[d]._installEvents(b)},getLayer:function(){for(var a=this;a=a._parent;)if(a instanceof w)return a;return null},getParent:function(){return this._parent},setParent:function(a){return a.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(a){this.removeChildren(),this.addChildren(a)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var a=this._getOwner();return a&&a._children[this._index+1]||null},getPreviousSibling:function(){var a=this._getOwner();return a&&a._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(a){return a===this||a&&this._class===a._class&&this._style.equals(a._style)&&this._matrix.equals(a._matrix)&&this._locked===a._locked&&this._visible===a._visible&&this._blendMode===a._blendMode&&this._opacity===a._opacity&&this._clipMask===a._clipMask&&this._guide===a._guide&&this._equals(a)||!1},_equals:function(a){return e.equals(this._children,a._children)},clone:function(a){var c=new this.constructor(u.NO_INSERT),d=this._children,f=e.pick(a?a.insert:b,a===b||!0===a),g=e.pick(a?a.deep:b,!0);d&&c.copyAttributes(this),d&&!g||c.copyContent(this),d||c.copyAttributes(this),f&&c.insertAbove(this);var h=this._name,i=this._parent;if(h&&i){for(var d=i._children,j=h,k=1;d[h];)h=j+" "+k++;h!==j&&c.setName(h)}return c},copyContent:function(a){for(var b=a._children,c=0,d=b&&b.length;c<d;c++)this.addChild(b[c].clone(!1),!0)},copyAttributes:function(a,b){this.setStyle(a._style);for(var c=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],d=0,f=c.length;d<f;d++){var g=c[d];a.hasOwnProperty(g)&&(this[g]=a[g])}b||this._matrix.set(a._matrix,!0),this.setApplyMatrix(a._applyMatrix),this.setPivot(a._pivot),this.setSelection(a._selection);var h=a._data,i=a._name;this._data=h?e.clone(h):null,i&&this.setName(i)},rasterize:function(a,c){var d=this.getStrokeBounds(),f=(a||this.getView().getResolution())/72,g=d.getTopLeft().floor(),h=d.getBottomRight().ceil(),i=new n(h.subtract(g)),j=new y(u.NO_INSERT);if(!i.isZero()){var k=aa.getCanvas(i.multiply(f)),l=k.getContext("2d"),m=(new r).scale(f).translate(g.negate());l.save(),m.applyToContext(l),this.draw(l,new e({matrices:[m]})),l.restore(),j.setCanvas(k)}return j.transform((new r).translate(g.add(i.divide(2))).scale(1/f)),(c===b||c)&&j.insertAbove(this),j},contains:function(){return!!this._contains(this._matrix._inverseTransform(l.read(arguments)))},_contains:function(a){var b=this._children;if(b){for(var c=b.length-1;c>=0;c--)if(b[c].contains(a))return!0;return!1}return a.isInside(this.getInternalBounds())},isInside:function(){return p.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new H.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(a,b){return a instanceof u&&this._asPathItem().getIntersections(a._asPathItem(),null,b,!0).length>0}},new function(){function a(){return this._hitTest(l.read(arguments),B.getOptions(arguments))}function b(){var a=l.read(arguments),b=B.getOptions(arguments),c=[];return this._hitTest(a,e.set({all:c},b)),c}function c(a,b,c,d){var e=this._children;if(e)for(var f=e.length-1;f>=0;f--){var g=e[f],h=g!==d&&g._hitTest(a,b,c);if(h&&!b.all)return h}return null}return t.inject({hitTest:a,hitTestAll:b,_hitTest:c}),{hitTest:a,hitTestAll:b,_hitTestChildren:c}},{_hitTest:function(a,b,c){function d(a){return a&&o&&!o(a)&&(a=null),a&&b.all&&b.all.push(a),a}function f(b,c){var d=k["get"+c]();if(a.subtract(d).divide(j).length<=1)return new B(b,p,{name:e.hyphenate(c),point:d})}if(this._locked||!this._visible||this._guide&&!b.guides||this.isEmpty())return null;var g=this._matrix,h=c?c.appended(g):this.getGlobalMatrix().prepend(this.getView()._matrix),i=Math.max(b.tolerance,1e-12),j=b._tolerancePadding=new n(H._getStrokePadding(i,g.inverted()._shiftless()));if(!(a=g._inverseTransform(a))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(j.multiply(2))._containsPoint(a))return null;var k,l,m=!(b.guides&&!this._guide||b.selected&&!this.isSelected()||b.type&&b.type!==e.hyphenate(this._class)||b.class&&!(this instanceof b.class)),o=b.match,p=this;if(m&&(b.center||b.bounds)&&this._parent){if(k=this.getInternalBounds(),b.center&&(l=f("center","Center")),!l&&b.bounds)for(var q=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],r=0;r<8&&!l;r++)l=f("bounds",q[r]);l=d(l)}return l||(l=this._hitTestChildren(a,b,h)||m&&d(this._hitTestSelf(a,b,h,this.getStrokeScaling()?null:h.inverted()._shiftless()))||null),l&&l.point&&(l.point=g.transform(l.point)),l},_hitTestSelf:function(a,b){if(b.fill&&this.hasFill()&&this._contains(a))return new B("fill",this)},matches:function(a,b){function c(a,b){for(var d in a)if(a.hasOwnProperty(d)){var f=a[d],g=b[d];if(e.isPlainObject(f)&&e.isPlainObject(g)){if(!c(f,g))return!1}else if(!e.equals(f,g))return!1}return!0}var d=typeof a;if("object"===d){for(var f in a)if(a.hasOwnProperty(f)&&!this.matches(f,a[f]))return!1;return!0}if("function"===d)return a(this);if("match"===a)return b(this);var g=/^(empty|editable)$/.test(a)?this["is"+e.capitalize(a)]():"type"===a?e.hyphenate(this._class):this[a];if("class"===a){if("function"==typeof b)return this instanceof b;g=this._class}if("function"==typeof b)return!!b(g);if(b){if(b.test)return b.test(g);if(e.isPlainObject(b))return c(b,g)}return e.equals(g,b)},getItems:function(a){return u._getItems(this,a,this._matrix)},getItem:function(a){return u._getItems(this,a,this._matrix,null,!0)[0]||null},statics:{_getItems:function a(b,c,d,f,g){if(!f){var h="object"==typeof c&&c,i=h&&h.overlapping,j=h&&h.inside,k=i||j,l=k&&p.read([k]);f={items:[],recursive:h&&!1!==h.recursive,inside:!!j,overlapping:!!i,rect:l,path:i&&new H.Rectangle({rectangle:l,insert:!1})},h&&(c=e.filter({},c,{recursive:!0,inside:!0,overlapping:!0}))}var m=b._children,n=f.items,l=f.rect;d=l&&(d||new r);for(var o=0,q=m&&m.length;o<q;o++){var s=m[o],t=d&&d.appended(s._matrix),u=!0;if(l){var k=s.getBounds(t);if(!l.intersects(k))continue;l.contains(k)||f.overlapping&&(k.contains(l)||f.path.intersects(s,t))||(u=!1)}if(u&&s.matches(c)&&(n.push(s),g))break;if(!1!==f.recursive&&a(s,c,t,f,g),g&&n.length>0)break}return n}}},{importJSON:function(a){var b=e.importJSON(a,this);return b!==this?this.addChild(b):b},addChild:function(a){return this.insertChild(b,a)},insertChild:function(a,b){var c=b?this.insertChildren(a,[b]):null;return c&&c[0]},addChildren:function(a){return this.insertChildren(this._children.length,a)},insertChildren:function(a,b){var c=this._children;if(c&&b&&b.length>0){b=e.slice(b);for(var d=b.length-1;d>=0;d--){var f=b[d];f?f._remove(!1,!0):b.splice(d,1)}e.splice(c,b,a,0);for(var g=this._project,h=g._changes,d=0,i=b.length;d<i;d++){var f=b[d],j=f._name;f._parent=this,f._setProject(g,!0),j&&f.setName(j),h&&this._changed(5)}this._changed(11)}else b=null;return b},_insertItem:"#insertChild",_insertAt:function(a,b){var c=a&&a._getOwner(),d=a!==this&&c?this:null;return d&&(d._remove(!1,!0),c._insertItem(a._index+b,d)),d},insertAbove:function(a){return this._insertAt(a,1)},insertBelow:function(a){return this._insertAt(a,0)},sendToBack:function(){var a=this._getOwner();return a?a._insertItem(0,this):null},bringToFront:function(){var a=this._getOwner();return a?a._insertItem(b,this):null},appendTop:"#addChild",appendBottom:function(a){return this.insertChild(0,a)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",copyTo:function(a){return a._insertItem(b,this.clone(!1))},reduce:function(a){var b=this._children;if(b&&1===b.length){var c=b[0].reduce(a);return this._parent?(c.insertAbove(this),this.remove()):c.remove(),c}return this},_removeNamed:function(){var a=this._getOwner();if(a){var b=a._children,c=a._namedChildren,d=this._name,e=c[d],f=e?e.indexOf(this):-1;-1!==f&&(b[d]==this&&delete b[d],e.splice(f,1),e.length?b[d]=e[0]:delete c[d])}},_remove:function(a,b){var c=this._getOwner(),d=this._project,f=this._index;return!!c&&(this._name&&this._removeNamed(),null!=f&&(d._activeLayer===this&&(d._activeLayer=this.getNextSibling()||this.getPreviousSibling()),e.splice(c._children,null,f,1)),this._installEvents(!1),a&&d._changes&&this._changed(5),b&&c._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(a){var b=a&&a.insertBelow(this);return b&&this.remove(),b},removeChildren:function(a,b){if(!this._children)return null;a=a||0,b=e.pick(b,this._children.length);for(var c=e.splice(this._children,null,a,b-a),d=c.length-1;d>=0;d--)c[d]._remove(!0,!1);return c.length>0&&this._changed(11),c},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var a=0,b=this._children.length;a<b;a++)this._children[a]._index=a;this._changed(11)}},isEmpty:function(){var a=this._children;return!a||!a.length},isEditable:function(){for(var a=this;a;){if(!a._visible||a._locked)return!1;a=a._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(a){function b(a){var b=[];do{b.unshift(a)}while(a=a._parent);return b}for(var c=b(this),d=b(a),e=0,f=Math.min(c.length,d.length);e<f;e++)if(c[e]!=d[e])return c[e]._index<d[e]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(a){return-1===this._getOrder(a)},isBelow:function(a){return 1===this._getOrder(a)},isParent:function(a){return this._parent===a},isChild:function(a){return a&&a._parent===this},isDescendant:function(a){for(var b=this;b=b._parent;)if(b===a)return!0;return!1},isAncestor:function(a){return!!a&&a.isDescendant(this)},isSibling:function(a){return this._parent===a._parent},isGroupedWith:function(a){for(var b=this._parent;b;){if(b._parent&&/^(Group|Layer|CompoundPath)$/.test(b._class)&&a.isDescendant(b))return!0;b=b._parent}return!1}},e.each(["rotate","scale","shear","skew"],function(a){var b="rotate"===a;this[a]=function(){var c=(b?e:l).read(arguments),d=l.read(arguments,0,{readNull:!0});return this.transform((new r)[a](c,d||this.getPosition(!0)))}},{translate:function(){var a=new r;return this.transform(a.translate.apply(a,arguments))},transform:function(a,b,c,d){a&&a.isIdentity()&&(a=null);var e=this._matrix,f=(b||this._applyMatrix)&&(!e.isIdentity()||a||b&&c&&this._children);if(!a&&!f)return this;if(a&&(!a.isInvertible()&&e.isInvertible()&&(e._backup=e.getValues()),e.prepend(a)),f=f&&this._transformContent(e,c,d)){var g=this._pivot,h=this._style,i=h.getFillColor(!0),j=h.getStrokeColor(!0);g&&e._transformPoint(g,g,!0),i&&i.transform(e),j&&j.transform(e),e.reset(!0),d&&this._canApplyMatrix&&(this._applyMatrix=!0)}var k=this._bounds,l=this._position;this._changed(9);var m=k&&a&&a.decompose();if(m&&!m.shearing&&m.rotation%90==0){for(var n in k){var o=k[n];if(f||!o.internal){var p=o.rect;a._transformBounds(p,p)}}var q=this._boundsGetter,p=k[q&&q.getBounds||q||"getBounds"];p&&(this._position=p.getCenter(!0)),this._bounds=k}else a&&l&&(this._position=a._transformPoint(l,l));return this},_transformContent:function(a,b,c){var d=this._children;if(d){for(var e=0,f=d.length;e<f;e++)d[e].transform(a,!0,b,c);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(l.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(l.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(l.read(arguments))},localToParent:function(){return this._matrix._transformPoint(l.read(arguments))},fitBounds:function(a,b){a=p.read(arguments);var c=this.getBounds(),d=c.height/c.width,e=a.height/a.width,f=(b?d>e:d<e)?a.width/c.width:a.height/c.height,g=new p(new l,new n(c.width*f,c.height*f));g.setCenter(a.getCenter()),this.setBounds(g)}}),{_setStyles:function(a,b,c){var d=this._style;if(d.hasFill()&&(a.fillStyle=d.getFillColor().toCanvasStyle(a)),d.hasStroke()){a.strokeStyle=d.getStrokeColor().toCanvasStyle(a),a.lineWidth=d.getStrokeWidth();var e=d.getStrokeJoin(),f=d.getStrokeCap(),g=d.getMiterLimit();if(e&&(a.lineJoin=e),f&&(a.lineCap=f),g&&(a.miterLimit=g),paper.support.nativeDash){var h=d.getDashArray(),i=d.getDashOffset();h&&h.length&&("setLineDash"in a?(a.setLineDash(h),a.lineDashOffset=i):(a.mozDash=h,a.mozDashOffset=i))}}if(d.hasShadow()){var j=b.pixelRatio||1,k=c._shiftless().prepend((new r).scale(j,j)),m=k.transform(new l(d.getShadowBlur(),0)),n=k.transform(this.getShadowOffset());a.shadowColor=d.getShadowColor().toCanvasStyle(a),a.shadowBlur=m.getLength(),a.shadowOffsetX=n.x,a.shadowOffsetY=n.y}},draw:function(a,b,c){var d=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var e=b.matrices,f=b.viewMatrix,g=this._matrix,h=e[e.length-1].appended(g);if(h.isInvertible()){f=f?f.appended(h):h,e.push(h),b.updateMatrix&&(h._updateVersion=d,this._globalMatrix=h);var i,j,k,l=this._blendMode,m=this._opacity,n="normal"===l,o=ba.nativeModes[l],p=n&&1===m||b.dontStart||b.clip||(o||n&&m<1)&&this._canComposite(),q=b.pixelRatio||1;if(!p){var r=this.getStrokeBounds(f);if(!r.width||!r.height)return;k=b.offset,j=b.offset=r.getTopLeft().floor(),i=a,a=aa.getContext(r.getSize().ceil().add(1).multiply(q)),1!==q&&a.scale(q,q)}a.save();var s=c?c.appended(g):this._canScaleStroke&&!this.getStrokeScaling(!0)&&f,t=!p&&b.clipItem,u=!s||t;if(p?(a.globalAlpha=m,o&&(a.globalCompositeOperation=l)):u&&a.translate(-j.x,-j.y),u&&(p?g:f).applyToContext(a),t&&b.clipItem.draw(a,b.extend({clip:!0})),s){a.setTransform(q,0,0,q,0,0);var v=b.offset;v&&a.translate(-v.x,-v.y)}this._draw(a,b,f,s),a.restore(),e.pop(),b.clip&&!b.dontFinish&&a.clip(),p||(ba.process(l,a,i,m,j.subtract(k).multiply(q)),aa.release(a),b.offset=k)}}},_isUpdated:function(a){var b=this._parent;if(b instanceof I)return b._isUpdated(a);var c=this._updateVersion===a;return!c&&b&&b._visible&&b._isUpdated(a)&&(this._updateVersion=a,c=!0),c},_drawSelection:function(a,b,c,d,e){var f=this._selection,g=1&f,h=2&f||g&&this._selectBounds,i=4&f;if(this._drawSelected||(g=!1),(g||h||i)&&this._isUpdated(e)){var j,k=this.getSelectedColor(!0)||(j=this.getLayer())&&j.getSelectedColor(!0),l=b.appended(this.getGlobalMatrix(!0)),m=c/2;if(a.strokeStyle=a.fillStyle=k?k.toCanvasStyle(a):"#009dec",g&&this._drawSelected(a,l,d),i){var n=this.getPosition(!0),o=n.x,p=n.y;a.beginPath(),a.arc(o,p,m,0,2*Math.PI,!0),a.stroke();for(var q=[[0,-1],[1,0],[0,1],[-1,0]],r=m,s=c+1,t=0;t<4;t++){var u=q[t],v=u[0],w=u[1];a.moveTo(o+v*r,p+w*r),a.lineTo(o+v*s,p+w*s),a.stroke()}}if(h){var x=l._transformCorners(this.getInternalBounds());a.beginPath();for(var t=0;t<8;t++)a[t?"lineTo":"moveTo"](x[t],x[++t]);a.closePath(),a.stroke();for(var t=0;t<8;t++)a.fillRect(x[t]-m,x[++t]-m,c,c)}}},_canComposite:function(){return!1}},e.each(["down","drag","up","move"],function(a){this["removeOn"+e.capitalize(a)]=function(){var b={};return b[a]=!0,this.removeOn(b)}},{removeOn:function(a){for(var b in a)if(a[b]){var c="mouse"+b,d=this._project,e=d._removeSets=d._removeSets||{};e[c]=e[c]||{},e[c][this._id]=this}return this}})),v=u.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(a){this._children=[],this._namedChildren={},this._initialize(a)||this.addChildren(Array.isArray(a)?a:arguments)},_changed:function a(c){a.base.call(this,c),1026&c&&(this._clipItem=b)},_getClipItem:function(){var a=this._clipItem;if(a===b){a=null;for(var c=this._children,d=0,e=c.length;d<e;d++)if(c[d]._clipMask){a=c[d];break}this._clipItem=a}return a},isClipped:function(){return!!this._getClipItem()},setClipped:function(a){var b=this.getFirstChild();b&&b.setClipMask(a)},_getBounds:function a(b,c){var d=this._getClipItem();return d?d._getCachedBounds(b&&b.appended(d._matrix),e.set({},c,{stroke:!1})):a.base.call(this,b,c)},_hitTestChildren:function a(b,c,d){var e=this._getClipItem();return(!e||e.contains(b))&&a.base.call(this,b,c,d,e)},_draw:function(a,b){var c=b.clip,d=!c&&this._getClipItem();b=b.extend({clipItem:d,clip:!1}),c?(a.beginPath(),b.dontStart=b.dontFinish=!0):d&&d.draw(a,b.extend({clip:!0}));for(var e=this._children,f=0,g=e.length;f<g;f++){var h=e[f];h!==d&&h.draw(a,b)}}}),w=v.extend({_class:"Layer",initialize:function(){v.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function a(){return this._parent?a.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),x=u.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(a){this._initialize(a)},_equals:function(a){
return this._type===a._type&&this._size.equals(a._size)&&e.equals(this._radius,a._radius)},copyContent:function(a){this.setType(a._type),this.setSize(a._size),this.setRadius(a._radius)},getType:function(){return this._type},setType:function(a){this._type=a},getShape:"#getType",setShape:"#setType",getSize:function(){var a=this._size;return new o(a.width,a.height,this,"setSize")},setSize:function(){var a=n.read(arguments);if(this._size){if(!this._size.equals(a)){var b=this._type,c=a.width,d=a.height;"rectangle"===b?this._radius.set(n.min(this._radius,a.divide(2))):"circle"===b?(c=d=(c+d)/2,this._radius=c/2):"ellipse"===b&&this._radius._set(c/2,d/2),this._size._set(c,d),this._changed(9)}}else this._size=a.clone()},getRadius:function(){var a=this._radius;return"circle"===this._type?a:new o(a.width,a.height,this,"setRadius")},setRadius:function(a){var b=this._type;if("circle"===b){if(a===this._radius)return;var c=2*a;this._radius=a,this._size._set(c,c)}else if(a=n.read(arguments),this._radius){if(this._radius.equals(a))return;if(this._radius.set(a),"rectangle"===b){var c=n.max(this._size,a.multiply(2));this._size.set(c)}else"ellipse"===b&&this._size._set(2*a.width,2*a.height)}else this._radius=a.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(a){var c=new(H[e.capitalize(this._type)])({center:new l,size:this._size,radius:this._radius,insert:!1});return c.copyAttributes(this),paper.settings.applyMatrix&&c.setApplyMatrix(!0),(a===b||a)&&c.insertAbove(this),c},toShape:"#clone",_draw:function(a,b,c,d){var e=this._style,f=e.hasFill(),g=e.hasStroke(),h=b.dontFinish||b.clip,i=!d;if(f||g||h){var j=this._type,k=this._radius,l="circle"===j;if(b.dontStart||a.beginPath(),i&&l)a.arc(0,0,k,0,2*Math.PI,!0);else{var m=l?k:k.width,n=l?k:k.height,o=this._size,p=o.width,q=o.height;if(i&&"rectangle"===j&&0===m&&0===n)a.rect(-p/2,-q/2,p,q);else{var r=p/2,s=q/2,t=.44771525016920644,u=m*t,v=n*t,w=[-r,-s+n,-r,-s+v,-r+u,-s,-r+m,-s,r-m,-s,r-u,-s,r,-s+v,r,-s+n,r,s-n,r,s-v,r-u,s,r-m,s,-r+m,s,-r+u,s,-r,s-v,-r,s-n];d&&d.transform(w,w,32),a.moveTo(w[0],w[1]),a.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),r!==m&&a.lineTo(w[8],w[9]),a.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),s!==n&&a.lineTo(w[16],w[17]),a.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),r!==m&&a.lineTo(w[24],w[25]),a.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}a.closePath()}h||!f&&!g||(this._setStyles(a,b,c),f&&(a.fill(e.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),g&&a.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(a,b){var c=new p(this._size).setCenter(0,0),d=this._style,e=b.stroke&&d.hasStroke()&&d.getStrokeWidth();return a&&(c=a._transformBounds(c)),e?c.expand(H._getStrokePadding(e,this._getStrokeMatrix(a,b))):c}},new function(){function a(a,b,c){var d=a._radius;if(!d.isZero())for(var e=a._size.divide(2),f=1;f<=4;f++){var g=new l(f>1&&f<4?-1:1,f>2?-1:1),h=g.multiply(e),i=h.subtract(g.multiply(d)),j=new p(c?h.add(g.multiply(c)):h,i);if(j.contains(b))return{point:i,quadrant:f}}}function b(a,b,c,d){var e=a.divide(b);return(!d||e.isInQuadrant(d))&&e.subtract(e.normalize()).multiply(b).divide(c).length<=1}return{_contains:function b(c){if("rectangle"===this._type){var d=a(this,c);return d?c.subtract(d.point).divide(this._radius).getLength()<=1:b.base.call(this,c)}return c.divide(this.size).getLength()<=.5},_hitTestSelf:function c(d,e,f,g){var h=!1,i=this._style,j=e.stroke&&i.hasStroke(),k=e.fill&&i.hasFill();if(j||k){var l=this._type,m=this._radius,n=j?i.getStrokeWidth()/2:0,o=e._tolerancePadding.add(H._getStrokePadding(n,!i.getStrokeScaling()&&g));if("rectangle"===l){var q=o.multiply(2),r=a(this,d,q);if(r)h=b(d.subtract(r.point),m,o,r.quadrant);else{var s=new p(this._size).setCenter(0,0),t=s.expand(q),u=s.expand(q.negate());h=t._containsPoint(d)&&!u._containsPoint(d)}}else h=b(d,m,o)}return h?new B(j?"stroke":"fill",this):c.base.apply(this,arguments)}}},{statics:new function(){function a(a,b,c,d,f){var g=new x(e.getNamed(f));return g._type=a,g._size=c,g._radius=d,g.translate(b)}return{Circle:function(){var b=l.readNamed(arguments,"center"),c=e.readNamed(arguments,"radius");return a("circle",b,new n(2*c),c,arguments)},Rectangle:function(){var b=p.readNamed(arguments,"rectangle"),c=n.min(n.readNamed(arguments,"radius"),b.getSize(!0).divide(2));return a("rectangle",b.getCenter(!0),b.getSize(!0),c,arguments)},Ellipse:function(){var b=x._readEllipse(arguments),c=b.radius;return a("ellipse",b.center,c.multiply(2),c,arguments)},_readEllipse:function(a){var b,c;if(e.hasNamed(a,"radius"))b=l.readNamed(a,"center"),c=n.readNamed(a,"radius");else{var d=p.readNamed(a,"rectangle");b=d.getCenter(!0),c=d.getSize(!0).divide(2)}return{center:b,radius:c}}}}}),y=u.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(a,c){if(!this._initialize(a,c!==b&&l.read(arguments,1))){var e="string"==typeof a?d.getElementById(a):a;e?this.setImage(e):this.setSource(a)}this._size||(this._size=new n,this._loaded=!1)},_equals:function(a){return this.getSource()===a.getSource()},copyContent:function(a){var b=a._image,c=a._canvas;if(b)this._setImage(b);else if(c){var d=aa.getCanvas(a._size);d.getContext("2d").drawImage(c,0,0),this._setImage(d)}this._crossOrigin=a._crossOrigin},getSize:function(){var a=this._size;return new o(a?a.width:0,a?a.height:0,this,"setSize")},setSize:function(){var a=n.read(arguments);if(!a.equals(this._size))if(a.width>0&&a.height>0){var b=this.getElement();this._setImage(aa.getCanvas(a)),b&&this.getContext(!0).drawImage(b,0,0,a.width,a.height)}else this._canvas&&aa.release(this._canvas),this._size=a.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(a){this.setSize(a,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(a){this.setSize(this.getWidth(),a)},getLoaded:function(){return this._loaded},isEmpty:function(){var a=this._size;return!a||0===a.width&&0===a.height},getResolution:function(){var a=this._matrix,b=new l(0,0).transform(a),c=new l(1,0).transform(a).subtract(b),d=new l(0,1).transform(a).subtract(b);return new n(72/c.getLength(),72/d.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(a){function b(a){var b=c.getView(),d=a&&a.type||"load";b&&c.responds(d)&&(paper=b._scope,c.emit(d,new V(a)))}var c=this;this._setImage(a),this._loaded?setTimeout(b,0):a&&S.add(a,{load:function(d){c._setImage(a),b(d)},error:b})},_setImage:function(a){this._canvas&&aa.release(this._canvas),a&&a.getContext?(this._image=null,this._canvas=a,this._loaded=!0):(this._image=a,this._canvas=null,this._loaded=!!(a&&a.src&&a.complete)),this._size=new n(a?a.naturalWidth||a.width:0,a?a.naturalHeight||a.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var a=aa.getContext(this._size);try{this._image&&a.drawImage(this._image,0,0),this._canvas=a.canvas}catch(b){aa.release(a)}}return this._canvas},setCanvas:"#setImage",getContext:function(a){return this._context||(this._context=this.getCanvas().getContext("2d")),a&&(this._image=null,this._changed(513)),this._context},setContext:function(a){this._context=a},getSource:function(){var a=this._image;return a&&a.src||this.toDataURL()},setSource:function(b){var c=new a.Image,d=this._crossOrigin;d&&(c.crossOrigin=d),c.src=b,this.setImage(c)},getCrossOrigin:function(){var a=this._image;return a&&a.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(a){this._crossOrigin=a;var b=this._image;b&&(b.crossOrigin=a)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var a=p.read(arguments),b=aa.getContext(a.getSize());return b.drawImage(this.getCanvas(),a.x,a.y,a.width,a.height,0,0,a.width,a.height),b.canvas},getSubRaster:function(){var a=p.read(arguments),b=new y(u.NO_INSERT);return b._setImage(this.getSubCanvas(a)),b.translate(a.getCenter().subtract(this.getSize().divide(2))),b._matrix.prepend(this._matrix),b.insertAbove(this),b},toDataURL:function(){var a=this._image,b=a&&a.src;if(/^data:/.test(b))return b;var c=this.getCanvas();return c?c.toDataURL.apply(c,arguments):null},drawImage:function(a){var b=l.read(arguments,1);this.getContext(!0).drawImage(a,b.x,b.y)},getAverageColor:function(a){var b,c;if(a?a instanceof G?(c=a,b=a.getBounds()):"object"==typeof a&&("width"in a?b=new p(a):"x"in a&&(b=new p(a.x-.5,a.y-.5,1,1))):b=this.getBounds(),!b)return null;var d=32,f=Math.min(b.width,d),g=Math.min(b.height,d),h=y._sampleContext;h?h.clearRect(0,0,d+1,d+1):h=y._sampleContext=aa.getContext(new n(d)),h.save();var i=(new r).scale(f/b.width,g/b.height).translate(-b.x,-b.y);i.applyToContext(h),c&&c.draw(h,new e({clip:!0,matrices:[i]})),this._matrix.applyToContext(h);var j=this.getElement(),k=this._size;j&&h.drawImage(j,-k.width/2,-k.height/2),h.restore();for(var l=h.getImageData(.5,.5,Math.ceil(f),Math.ceil(g)).data,m=[0,0,0],o=0,q=0,s=l.length;q<s;q+=4){var t=l[q+3];o+=t,t/=255,m[0]+=l[q]*t,m[1]+=l[q+1]*t,m[2]+=l[q+2]*t}for(var q=0;q<3;q++)m[q]/=o;return o?N.read(m):null},getPixel:function(){var a=l.read(arguments),b=this.getContext().getImageData(a.x,a.y,1,1).data;return new N("rgb",[b[0]/255,b[1]/255,b[2]/255],b[3]/255)},setPixel:function(){var a=l.read(arguments),b=N.read(arguments),c=b._convert("rgb"),d=b._alpha,e=this.getContext(!0),f=e.createImageData(1,1),g=f.data;g[0]=255*c[0],g[1]=255*c[1],g[2]=255*c[2],g[3]=null!=d?255*d:255,e.putImageData(f,a.x,a.y)},createImageData:function(){var a=n.read(arguments);return this.getContext().createImageData(a.width,a.height)},getImageData:function(){var a=p.read(arguments);return a.isEmpty()&&(a=new p(this._size)),this.getContext().getImageData(a.x,a.y,a.width,a.height)},setImageData:function(a){var b=l.read(arguments,1);this.getContext(!0).putImageData(a,b.x,b.y)},_getBounds:function(a,b){var c=new p(this._size).setCenter(0,0);return a?a._transformBounds(c):c},_hitTestSelf:function(a){if(this._contains(a)){var b=this;return new B("pixel",b,{offset:a.add(b._size.divide(2)).round(),color:{get:function(){return b.getPixel(this.offset)}}})}},_draw:function(a){var b=this.getElement();b&&(a.globalAlpha=this._opacity,a.drawImage(b,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),z=u.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(a,c){this._initialize(a,c!==b&&l.read(arguments,1))||this.setDefinition(a instanceof A?a:new A(a))},_equals:function(a){return this._definition===a._definition},copyContent:function(a){this.setDefinition(a._definition)},getDefinition:function(){return this._definition},setDefinition:function(a){this._definition=a,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(a,b){var c=this._definition._item;return c._getCachedBounds(c._matrix.prepended(a),b)},_hitTestSelf:function(a,b,c,d){var e=this._definition._item._hitTest(a,b,c);return e&&(e.item=this),e},_draw:function(a,b){this._definition._item.draw(a,b)}}),A=e.extend({_class:"SymbolDefinition",initialize:function(a,b){this._id=k.get(),this.project=paper.project,a&&this.setItem(a,b)},_serialize:function(a,b){return b.add(this,function(){return e.serialize([this._class,this._item],a,!1,b)})},_changed:function(a){8&a&&u._clearBoundsCache(this),1&a&&this.project._changed(a)},getItem:function(){return this._item},setItem:function(a,b){a._symbol&&(a=a.clone()),this._item&&(this._item._symbol=null),this._item=a,a.remove(),a.setSelected(!1),b||a.setPosition(new l),a._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(a){return new z(this,a)},clone:function(){return new A(this._item.clone(!1))},equals:function(a){return a===this||a&&this._item.equals(a._item)||!1}}),B=e.extend({_class:"HitResult",initialize:function(a,b,c){this.type=a,this.item=b,c&&(c.enumerable=!0,this.inject(c))},statics:{getOptions:function(a){var b=a&&e.read(a);return e.set({type:null,tolerance:paper.settings.hitTolerance,fill:!b,stroke:!b,segments:!b,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},b)}}}),C=e.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(a,c,d,e,f,g){var h,i,j,k,l=arguments.length;l>0&&(null==a||"object"==typeof a?1===l&&a&&"point"in a?(h=a.point,i=a.handleIn,j=a.handleOut,k=a.selection):(h=a,i=c,j=d,k=e):(h=[a,c],i=d!==b?[d,e]:null,j=f!==b?[f,g]:null)),new D(h,this,"_point"),new D(i,this,"_handleIn"),new D(j,this,"_handleOut"),k&&this.setSelection(k)},_serialize:function(a,b){var c=this._point,d=this._selection,f=d||this.hasHandles()?[c,this._handleIn,this._handleOut]:c;return d&&f.push(d),e.serialize(f,a,!0,b)},_changed:function(a){var b=this._path;if(b){var c,d=b._curves,e=this._index;d&&(a&&a!==this._point&&a!==this._handleIn||!(c=e>0?d[e-1]:b._closed?d[d.length-1]:null)||c._changed(),a&&a!==this._point&&a!==this._handleOut||!(c=d[e])||c._changed()),b._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(l.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(l.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(l.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var a=this._handleIn,b=this._handleOut;return!a.isZero()&&!b.isZero()&&a.isCollinear(b)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(a){var b=this._selection,c=this._path;this._selection=a=a||0,c&&a!==b&&(c._updateSelection(this,b,a),c._changed(129))},changeSelection:function(a,b){var c=this._selection;this.setSelection(b?c|a:c&~a)},isSelected:function(){return!!(7&this._selection)},setSelected:function(a){this.changeSelection(7,a)},getIndex:function(){return this._index!==b?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var a=this._path,b=this._index;return a?(b>0&&!a._closed&&b===a._segments.length-1&&b--,a.getCurves()[b]||null):null},getLocation:function(){var a=this.getCurve();return a?new F(a,this===a._segment1?0:1):null},getNext:function(){var a=this._path&&this._path._segments;return a&&(a[this._index+1]||this._path._closed&&a[0])||null},smooth:function(a,c,d){var e=a||{},f=e.type,g=e.factor,h=this.getPrevious(),i=this.getNext(),j=(h||this)._point,k=this._point,m=(i||this)._point,n=j.getDistance(k),o=k.getDistance(m);if(f&&"catmull-rom"!==f){if("geometric"!==f)throw new Error("Smoothing method '"+f+"' not supported.");if(h&&i){var p=j.subtract(m),q=g===b?.4:g,r=q*n/(n+o);c||this.setHandleIn(p.multiply(r)),d||this.setHandleOut(p.multiply(r-q))}}else{var s=g===b?.5:g,t=Math.pow(n,s),u=t*t,v=Math.pow(o,s),w=v*v;if(!c&&h){var x=2*w+3*v*t+u,y=3*v*(v+t);this.setHandleIn(0!==y?new l((w*j._x+x*k._x-u*m._x)/y-k._x,(w*j._y+x*k._y-u*m._y)/y-k._y):new l)}if(!d&&i){var x=2*u+3*t*v+w,y=3*t*(t+v);this.setHandleOut(0!==y?new l((u*m._x+x*k._x-w*j._x)/y-k._x,(u*m._y+x*k._y-w*j._y)/y-k._y):new l)}}},getPrevious:function(){var a=this._path&&this._path._segments;return a&&(a[this._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var a=this._path;return a&&this._index===a._segments.length-1||!1},reverse:function(){var a=this._handleIn,b=this._handleOut,c=a.clone();a.set(b),b.set(c)},reversed:function(){return new C(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new C(this._point,this._handleIn,this._handleOut)},equals:function(a){return a===this||a&&this._class===a._class&&this._point.equals(a._point)&&this._handleIn.equals(a._handleIn)&&this._handleOut.equals(a._handleOut)||!1},toString:function(){var a=["point: "+this._point];return this._handleIn.isZero()||a.push("handleIn: "+this._handleIn),this._handleOut.isZero()||a.push("handleOut: "+this._handleOut),"{ "+a.join(", ")+" }"},transform:function(a){this._transformCoordinates(a,new Array(6),!0),this._changed()},interpolate:function(a,b,c){var d=1-c,e=c,f=a._point,g=b._point,h=a._handleIn,i=b._handleIn,j=b._handleOut,k=a._handleOut;this._point._set(d*f._x+e*g._x,d*f._y+e*g._y,!0),this._handleIn._set(d*h._x+e*i._x,d*h._y+e*i._y,!0),this._handleOut._set(d*k._x+e*j._x,d*k._y+e*j._y,!0),this._changed()},_transformCoordinates:function(a,b,c){var d=this._point,e=c&&this._handleIn.isZero()?null:this._handleIn,f=c&&this._handleOut.isZero()?null:this._handleOut,g=d._x,h=d._y,i=2;return b[0]=g,b[1]=h,e&&(b[i++]=e._x+g,b[i++]=e._y+h),f&&(b[i++]=f._x+g,b[i++]=f._y+h),a&&(a._transformCoordinates(b,b,i/2),g=b[0],h=b[1],c?(d._x=g,d._y=h,i=2,e&&(e._x=b[i++]-g,e._y=b[i++]-h),f&&(f._x=b[i++]-g,f._y=b[i++]-h)):(e||(b[i++]=g,b[i++]=h),f||(b[i++]=g,b[i++]=h))),b}}),D=l.extend({initialize:function(a,c,d){var e,f,g;if(a)if((e=a[0])!==b)f=a[1];else{var h=a;(e=h.x)===b&&(h=l.read(arguments),e=h.x),f=h.y,g=h.selected}else e=f=0;this._x=e,this._y=f,this._owner=c,c[d]=this,g&&this.setSelected(!0)},_set:function(a,b){return this._x=a,this._y=b,this._owner._changed(this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner._changed(this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner._changed(this)},isZero:function(){var a=j.isZero;return a(this._x)&&a(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner.changeSelection(this._getSelection(),a)},_getSelection:function(){var a=this._owner;return this===a._point?1:this===a._handleIn?2:this===a._handleOut?4:0}}),E=e.extend({_class:"Curve",beans:!0,initialize:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o=arguments.length;3===o?(this._path=a,i=b,j=c):o?1===o?"segment1"in a?(i=new C(a.segment1),j=new C(a.segment2)):"point1"in a?(k=a.point1,m=a.handle1,n=a.handle2,l=a.point2):Array.isArray(a)&&(k=[a[0],a[1]],l=[a[6],a[7]],m=[a[2]-a[0],a[3]-a[1]],n=[a[4]-a[6],a[5]-a[7]]):2===o?(i=new C(a),j=new C(b)):4===o?(k=a,m=b,n=c,l=d):8===o&&(k=[a,b],l=[g,h],m=[c-a,d-b],n=[e-g,f-h]):(i=new C,j=new C),this._segment1=i||new C(k,null,m),this._segment2=j||new C(l,n,null)},_serialize:function(a,b){return e.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],a,!0,b)},_changed:function(){this._length=this._bounds=b},clone:function(){return new E(this._segment1,this._segment2)},toString:function(){var a=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||a.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||a.push("handle2: "+this._segment2._handleIn),a.push("point2: "+this._segment2._point),"{ "+a.join(", ")+" }"},classify:function(){return E.classify(this.getValues())},remove:function(){var a=!1;if(this._path){var b=this._segment2,c=b._handleOut;(a=b.remove())&&this._segment1._handleOut.set(c)}return a},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(l.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(l.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(l.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(l.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var a=this._path;return a&&this._segment1._index===a._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(a){this.getPoint1().setSelected(a),this.getHandle1().setSelected(a),this.getHandle2().setSelected(a),this.getPoint2().setSelected(a)},getValues:function(a){return E.getValues(this._segment1,this._segment2,a)},getPoints:function(){for(var a=this.getValues(),b=[],c=0;c<8;c+=2)b.push(new l(a[c],a[c+1]));return b}},{getLength:function(){return null==this._length&&(this._length=E.getLength(this.getValues(),0,1)),this._length},getArea:function(){return E.getArea(this.getValues())},getLine:function(){return new s(this._segment1._point,this._segment2._point)},getPart:function(a,b){return new E(E.getPart(this.getValues(),a,b))},getPartLength:function(a,b){return E.getLength(this.getValues(),a,b)},divideAt:function(a){return this.divideAtTime(a&&a.curve===this?a.time:this.getTimeAt(a))},divideAtTime:function(a,b){var c=1e-8,d=1-c,e=null;if(a>=c&&a<=d){var f=E.subdivide(this.getValues(),a),g=f[0],h=f[1],i=b||this.hasHandles(),j=this._segment1,k=this._segment2,m=this._path;i&&(j._handleOut._set(g[2]-g[0],g[3]-g[1]),k._handleIn._set(h[4]-h[6],h[5]-h[7]));var n=g[6],o=g[7],p=new C(new l(n,o),i&&new l(g[4]-n,g[5]-o),i&&new l(h[2]-n,h[3]-o));m?(m.insert(j._index+1,p),e=this.getNext()):(this._segment2=p,this._changed(),e=new E(p,k))}return e},splitAt:function(a){var b=this._path;return b?b.splitAt(a):null},splitAtTime:function(a){return this.splitAt(this.getLocationAtTime(a))},divide:function(a,c){return this.divideAtTime(a===b?.5:c?a:this.getTimeAt(a))},split:function(a,c){return this.splitAtTime(a===b?.5:c?a:this.getTimeAt(a))},reversed:function(){return new E(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(a,b,c,d){var e=a._point,f=a._handleOut,g=b._handleIn,h=b._point,i=e.x,j=e.y,k=h.x,l=h.y,m=d?[i,j,i,j,k,l,k,l]:[i,j,i+f._x,j+f._y,k+g._x,l+g._y,k,l];return c&&c._transformCoordinates(m,m,4),m},subdivide:function(a,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7];c===b&&(c=.5);var l=1-c,m=l*d+c*f,n=l*e+c*g,o=l*f+c*h,p=l*g+c*i,q=l*h+c*j,r=l*i+c*k,s=l*m+c*o,t=l*n+c*p,u=l*o+c*q,v=l*p+c*r,w=l*s+c*u,x=l*t+c*v;return[[d,e,m,n,s,t,w,x],[w,x,u,v,q,r,j,k]]},getMonoCurves:function(a,b){var c=[],d=b?0:1,e=a[d+0],f=a[d+2],g=a[d+4],h=a[d+6];if(e>=f==f>=g&&f>=g==g>=h||E.isStraight(a))c.push(a);else{var i=3*(f-g)-e+h,k=2*(e+g)-4*f,l=f-e,m=1e-8,n=1-m,o=[],p=j.solveQuadratic(i,k,l,o,m,n);if(p){o.sort();var q=o[0],r=E.subdivide(a,q);c.push(r[0]),p>1&&(q=(o[1]-q)/(1-q),r=E.subdivide(r[1],q),c.push(r[0])),c.push(r[1])}else c.push(a)}return c},solveCubic:function(a,b,c,d,e,f){var g=a[b],h=a[b+2],i=a[b+4],k=a[b+6],l=0;if(!(g<c&&k<c&&h<c&&i<c||g>c&&k>c&&h>c&&i>c)){var m=3*(h-g),n=3*(i-h)-m,o=k-g-m-n;l=j.solveCubic(o,n,m,g-c,d,e,f)}return l},getTimeOf:function(a,b){var c=new l(a[0],a[1]),d=new l(a[6],a[7]),e=1e-12,f=1e-7;if(null===(b.isClose(c,e)?0:b.isClose(d,e)?1:null))for(var g=[b.x,b.y],h=[],i=0;i<2;i++)for(var j=E.solveCubic(a,i,g[i],h,0,1),k=0;k<j;k++){var m=h[k];if(b.isClose(E.getPoint(a,m),f))return m}return b.isClose(c,f)?0:b.isClose(d,f)?1:null},getNearestTime:function(a,b){function c(c){if(c>=0&&c<=1){var d=b.getDistance(E.getPoint(a,c),!0);if(d<n)return n=d,o=c,!0}}if(E.isStraight(a)){var d=a[0],e=a[1],f=a[6],g=a[7],h=f-d,i=g-e,j=h*h+i*i;if(0===j)return 0;var k=((b.x-d)*h+(b.y-e)*i)/j;return k<1e-12?0:k>.999999999999?1:E.getTimeOf(a,new l(d+k*h,e+k*i))}for(var m=100,n=1/0,o=0,p=0;p<=m;p++)c(p/m);for(var q=1/(2*m);q>1e-8;)c(o-q)||c(o+q)||(q/=2);return o},getPart:function(a,b,c){var d=b>c;if(d){var e=b;b=c,c=e}return b>0&&(a=E.subdivide(a,b)[1]),c<1&&(a=E.subdivide(a,(c-b)/(1-b))[0]),d?[a[6],a[7],a[4],a[5],a[2],a[3],a[0],a[1]]:a},isFlatEnough:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=3*e-2*c-i,l=3*f-2*d-j,m=3*g-2*i-c,n=3*h-2*j-d;return Math.max(k*k,m*m)+Math.max(l*l,n*n)<=16*b*b},getArea:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7];return 3*((i-c)*(d+f)-(h-b)*(e+g)+e*(b-f)-d*(c-g)+i*(f+b/3)-h*(g+c/3))/20},getBounds:function(a){for(var b=a.slice(0,2),c=b.slice(),d=[0,0],e=0;e<2;e++)E._addBounds(a[e],a[e+2],a[e+4],a[e+6],e,0,b,c,d);return new p(b[0],b[1],c[0]-b[0],c[1]-b[1])},_addBounds:function(a,b,c,d,e,f,g,h,i){function k(a,b){var c=a-b,d=a+b;c<g[e]&&(g[e]=c),d>h[e]&&(h[e]=d)}f/=2;var l=g[e]-f,m=h[e]+f;if(a<l||b<l||c<l||d<l||a>m||b>m||c>m||d>m)if(b<a!=b<d&&c<a!=c<d)k(a,f),k(d,f);else{var n=3*(b-c)-a+d,o=2*(a+c)-4*b,p=b-a,q=j.solveQuadratic(n,o,p,i),r=1e-8,s=1-r;k(d,0);for(var t=0;t<q;t++){var u=i[t],v=1-u;r<=u&&u<=s&&k(v*v*v*a+3*v*v*u*b+3*v*u*u*c+u*u*u*d,f)}}}}},e.each(["getBounds","getStrokeBounds","getHandleBounds"],function(a){this[a]=function(){this._bounds||(this._bounds={});var b=this._bounds[a];return b||(b=this._bounds[a]=H[a]([this._segment1,this._segment2],!1,this._path)),b.clone()}},{}),e.each({isStraight:function(a,b,c,d){if(b.isZero()&&c.isZero())return!0;var e=d.subtract(a);if(e.isZero())return!1;if(e.isCollinear(b)&&e.isCollinear(c)){var f=new s(a,d),g=1e-7;if(f.getDistance(a.add(b))<g&&f.getDistance(d.add(c))<g){var h=e.dot(e),i=e.dot(b)/h,j=e.dot(c)/h;return i>=0&&i<=1&&j<=0&&j>=-1}}return!1},isLinear:function(a,b,c,d){var e=d.subtract(a).divide(3);return b.equals(e)&&c.negate().equals(e)}},function(a,b){this[b]=function(b){var c=this._segment1,d=this._segment2;return a(c._point,c._handleOut,d._handleIn,d._point,b)},this.statics[b]=function(b,c){var d=b[0],e=b[1],f=b[6],g=b[7];return a(new l(d,e),new l(b[2]-d,b[3]-e),new l(b[4]-f,b[5]-g),new l(f,g),c)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(a){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(a||0)},isCollinear:function(a){return a&&this.isStraight()&&a.isStraight()&&this.getLine().isCollinear(a.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(a,b){return this.getLocationAtTime(b?a:this.getTimeAt(a))},getLocationAtTime:function(a){return null!=a&&a>=0&&a<=1?new F(this,a):null},getTimeAt:function(a,b){return E.getTimeAt(this.getValues(),a,b)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(a){return this.getPartLength(0,a)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(l.read(arguments)))},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getTimeOf:function(){return E.getTimeOf(this.getValues(),l.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var a=l.read(arguments),b=this.getValues(),c=E.getNearestTime(b,a),d=E.getPoint(b,c);return new F(this,c,d,null,a.getDistance(d))},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a?a.getPoint():a}},new function(){var a=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return e.each(a,function(a){this[a+"At"]=function(b,c){var d=this.getValues();return E[a](d,c?b:E.getTimeAt(d,b))},this[a+"AtTime"]=function(b){return E[a](this.getValues(),b)}},{statics:{_evaluateMethods:a}})},new function(){function a(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=9*(d-f)+3*(h-b),k=6*(b+f)-12*d,l=3*(d-b),m=9*(e-g)+3*(i-c),n=6*(c+g)-12*e,o=3*(e-c);return function(a){var b=(j*a+k)*a+l,c=(m*a+n)*a+o;return Math.sqrt(b*b+c*c)}}function c(a,b){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(b-a))))}function d(a,b,c,d){if(null==b||b<0||b>1)return null;var e=a[0],f=a[1],g=a[2],h=a[3],i=a[4],k=a[5],m=a[6],n=a[7],o=j.isZero;o(g-e)&&o(h-f)&&(g=e,h=f),o(i-m)&&o(k-n)&&(i=m,k=n);var p,q,r=3*(g-e),s=3*(i-g)-r,t=m-e-r-s,u=3*(h-f),v=3*(k-h)-u,w=n-f-u-v;if(0===c)p=0===b?e:1===b?m:((t*b+s)*b+r)*b+e,q=0===b?f:1===b?n:((w*b+v)*b+u)*b+f;else{var x=1e-8,y=1-x;if(b<x?(p=r,q=u):b>y?(p=3*(m-i),q=3*(n-k)):(p=(3*t*b+2*s)*b+r,q=(3*w*b+2*v)*b+u),d){0===p&&0===q&&(b<x||b>y)&&(p=i-g,q=k-h);var z=Math.sqrt(p*p+q*q);z&&(p/=z,q/=z)}if(3===c){var i=6*t*b+2*s,k=6*w*b+2*v,A=Math.pow(p*p+q*q,1.5);p=0!==A?(p*k-q*i)/A:0,q=0}}return 2===c?new l(q,-p):new l(p,q)}return{statics:{classify:function(a){function c(a,c,d){var e=c!==b,f=e&&c>0&&c<1,g=e&&d>0&&d<1;return!e||(f||g)&&("loop"!==a||f&&g)||(a="arch",f=g=!1),{type:a,roots:f||g?f&&g?c<d?[c,d]:[d,c]:[f?c:d]:null}}var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],k=a[6],l=a[7],m=d*(l-i)+e*(h-k)+k*i-l*h,n=f*(e-l)+g*(k-d)+d*l-e*k,o=h*(g-e)+i*(d-f)+f*e-g*d,p=3*o,q=p-n,r=q-n+m,s=Math.sqrt(r*r+q*q+p*p),t=0!==s?1/s:0,u=j.isZero,v="serpentine";if(r*=t,q*=t,p*=t,u(r))return u(q)?c(u(p)?"line":"quadratic"):c(v,p/(3*q));var w=3*q*q-4*r*p;if(u(w))return c("cusp",q/(2*r));var x=w>0?Math.sqrt(w/3):Math.sqrt(-w),y=2*r;return c(w>0?v:"loop",(q+x)/y,(q-x)/y)},getLength:function(d,e,f,g){if(e===b&&(e=0),f===b&&(f=1),E.isStraight(d)){var h=d;f<1&&(h=E.subdivide(h,f)[0],e/=f),e>0&&(h=E.subdivide(h,e)[1]);var i=h[6]-h[0],k=h[7]-h[1];return Math.sqrt(i*i+k*k)}return j.integrate(g||a(d),e,f,c(e,f))},getTimeAt:function(d,e,f){function g(a){return r+=j.integrate(n,f,a,c(f,a)),f=a,r-e}if(f===b&&(f=e<0?1:0),0===e)return f;var h=Math.abs,i=1e-12,k=e>0,l=k?f:0,m=k?1:f,n=a(d),o=E.getLength(d,l,m,n),p=h(e)-o;if(h(p)<i)return k?m:l;if(p>i)return null;var q=e/o,r=0;return j.findRoot(g,n,f+q,l,m,32,1e-12)},getPoint:function(a,b){return d(a,b,0,!1)},getTangent:function(a,b){return d(a,b,1,!0)},getWeightedTangent:function(a,b){return d(a,b,1,!1)},getNormal:function(a,b){return d(a,b,2,!0)},getWeightedNormal:function(a,b){return d(a,b,2,!1)},getCurvature:function(a,b){return d(a,b,3,!1).x},getPeaks:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],k=3*d-b-3*f+h,l=3*b-6*d+3*f,m=-3*b+3*d,n=3*e-c-3*g+i,o=3*c-6*e+3*g,p=-3*c+3*e,q=1e-8,r=1-q,s=[];return j.solveCubic(9*(k*k+n*n),9*(k*l+o*n),2*(l*l+o*o)+3*(m*k+p*n),m*l+o*p,s,q,r),s.sort()}}}},new function(){function a(a,b,c,d,e,f,g,h,i){var j=!i&&c.getPrevious()===f,k=!i&&c!==f&&c.getNext()===f,l=1e-8,m=1-l;if(null==d&&(d=c.getTimeOf(e)),null!==d&&d>=(j?l:0)&&d<=(k?m:1)&&(null==g&&(g=f.getTimeOf(h)),null!==g&&g>=(k?l:0)&&g<=(j?m:1))){var n=new F(c,d,e||c.getPointAtTime(d),i),o=new F(f,g,h||f.getPointAtTime(g),i);n._intersection=o,o._intersection=n,b&&!b(n)||F.insert(a,n,!0)}}function b(e,f,g,h,i,j,k,l,m,n,o,p,q){if(++m>=4096||++l>=40)return m;var r,t,u=1e-9,v=f[0],w=f[1],x=f[6],y=f[7],z=s.getSignedDistance,A=z(v,w,x,y,f[2],f[3]),B=z(v,w,x,y,f[4],f[5]),C=A*B>0?.75:4/9,D=C*Math.min(0,A,B),F=C*Math.max(0,A,B),G=z(v,w,x,y,e[0],e[1]),H=z(v,w,x,y,e[2],e[3]),I=z(v,w,x,y,e[4],e[5]),J=z(v,w,x,y,e[6],e[7]),K=c(G,H,I,J),L=K[0],M=K[1];if(0===A&&0===B&&0===G&&0===H&&0===I&&0===J||null==(r=d(L,M,D,F))||null==(t=d(L.reverse(),M.reverse(),D,F)))return m;var N=n+(o-n)*r,O=n+(o-n)*t;if(Math.max(q-p,O-N)<u){var P=(N+O)/2,Q=(p+q)/2;a(i,j,k?h:g,k?Q:P,null,k?g:h,k?P:Q,null)}else if(e=E.getPart(e,r,t),t-r>.8)if(O-N>q-p){var R=E.subdivide(e,.5),P=(N+O)/2;m=b(f,R[0],h,g,i,j,!k,l,m,p,q,N,P),m=b(f,R[1],h,g,i,j,!k,l,m,p,q,P,O)}else{var R=E.subdivide(f,.5),Q=(p+q)/2;m=b(R[0],e,h,g,i,j,!k,l,m,p,Q,N,O),m=b(R[1],e,h,g,i,j,!k,l,m,Q,q,N,O)}else m=q-p>=u?b(f,e,h,g,i,j,!k,l,m,p,q,N,O):b(e,f,g,h,i,j,k,l,m,N,O,p,q);return m}function c(a,b,c,d){var e,f=[0,a],g=[1/3,b],h=[2/3,c],i=[1,d],j=b-(2*a+d)/3,k=c-(a+2*d)/3;if(j*k<0)e=[[f,g,i],[f,h,i]];else{var l=j/k
;e=[l>=2?[f,g,i]:l<=.5?[f,h,i]:[f,g,h,i],[f,i]]}return(j||k)<0?e.reverse():e}function d(a,b,c,d){return a[0][1]<c?e(a,!0,c):b[0][1]>d?e(b,!1,d):a[0][0]}function e(a,b,c){for(var d=a[0][0],e=a[0][1],f=1,g=a.length;f<g;f++){var h=a[f][0],i=a[f][1];if(b?i>=c:i<=c)return i===c?h:d+(c-e)*(h-d)/(i-e);d=h,e=i}return null}function f(a,b,c,d,e){var f=j.isZero;if(f(d)&&f(e)){var g=E.getTimeOf(a,new l(b,c));return null===g?[]:[g]}for(var h=Math.atan2(-e,d),i=Math.sin(h),k=Math.cos(h),m=[],n=[],o=0;o<8;o+=2){var p=a[o]-b,q=a[o+1]-c;m.push(p*k-q*i,p*i+q*k)}return E.solveCubic(m,1,0,n,0,1),n}function g(b,c,d,e,g,h,i){for(var j=c[0],k=c[1],l=c[6],m=c[7],n=f(b,j,k,l-j,m-k),o=0,p=n.length;o<p;o++){var q=n[o],r=E.getPoint(b,q),s=E.getTimeOf(c,r);if(null!==s){var t=E.getPoint(c,s);a(g,h,i?e:d,i?s:q,i?t:r,i?d:e,i?q:s,i?r:t)}}}function h(b,c,d,e,f,g){var h=s.intersect(b[0],b[1],b[6],b[7],c[0],c[1],c[6],c[7]);h&&a(f,g,d,null,h,e,null,h)}function i(c,d,e,f,i,j){var k=1e-12,l=Math.min,m=Math.max;if(m(c[0],c[2],c[4],c[6])+k>l(d[0],d[2],d[4],d[6])&&l(c[0],c[2],c[4],c[6])-k<m(d[0],d[2],d[4],d[6])&&m(c[1],c[3],c[5],c[7])+k>l(d[1],d[3],d[5],d[7])&&l(c[1],c[3],c[5],c[7])-k<m(d[1],d[3],d[5],d[7])){var o=n(c,d);if(o)for(var p=0;p<2;p++){var q=o[p];a(i,j,e,q[0],null,f,q[1],null,!0)}else{var r=E.isStraight(c),s=E.isStraight(d),t=r&&s,u=r&&!s;(t?h:r||s?g:b)(u?d:c,u?c:d,u?f:e,u?e:f,i,j,u,0,0,0,1,0,1)}}return i}function k(b,c,d,e){var f=E.classify(b);if("loop"===f.type){var g=f.roots;a(d,e,c,g[0],null,c,g[1],null)}return d}function m(a,b,c,d,e,f){var g=!b;g&&(b=a);for(var h,j,l=a.length,m=b.length,n=[],o=[],p=0;p<m;p++)n[p]=b[p].getValues(e);for(var p=0;p<l;p++){var q=a[p],r=g?n[p]:q.getValues(d),s=q.getPath();s!==j&&(j=s,h=[],o.push(h)),g&&k(r,q,h,c);for(var t=g?p+1:0;t<m;t++){if(f&&h.length)return h;i(r,n[t],q,b[t],h,c)}}h=[];for(var p=0,u=o.length;p<u;p++)h.push.apply(h,o[p]);return h}function n(a,b){function c(a){var b=a[6]-a[0],c=a[7]-a[1];return b*b+c*c}var d=Math.abs,e=s.getDistance,f=1e-8,g=1e-7,h=E.isStraight(a),i=E.isStraight(b),j=h&&i,k=c(a)<c(b),m=k?b:a,n=k?a:b,o=m[0],p=m[1],q=m[6]-o,r=m[7]-p;if(e(o,p,q,r,n[0],n[1],!0)<g&&e(o,p,q,r,n[6],n[7],!0)<g)!j&&e(o,p,q,r,m[2],m[3],!0)<g&&e(o,p,q,r,m[4],m[5],!0)<g&&e(o,p,q,r,n[2],n[3],!0)<g&&e(o,p,q,r,n[4],n[5],!0)<g&&(h=i=j=!0);else if(j)return null;if(h^i)return null;for(var t=[a,b],u=[],v=0;v<4&&u.length<2;v++){var w=1&v,x=1^w,y=v>>1,z=E.getTimeOf(t[w],new l(t[x][y?6:0],t[x][y?7:1]));if(null!=z){var A=w?[y,z]:[z,y];(!u.length||d(A[0]-u[0][0])>f&&d(A[1]-u[0][1])>f)&&u.push(A)}if(v>2&&!u.length)break}if(2!==u.length)u=null;else if(!j){var B=E.getPart(a,u[0][0],u[1][0]),C=E.getPart(b,u[0][1],u[1][1]);(d(C[2]-B[2])>g||d(C[3]-B[3])>g||d(C[4]-B[4])>g||d(C[5]-B[5])>g)&&(u=null)}return u}return{getIntersections:function(a){var b=this.getValues(),c=a&&a!==this&&a.getValues();return c?i(b,c,this,a,[]):k(b,this,[])},statics:{getOverlaps:n,getIntersections:m,getCurveLineIntersections:f}}}),F=e.extend({_class:"CurveLocation",initialize:function(a,b,c,d,e){if(b>=.99999999){var f=a.getNext();f&&(b=0,a=f)}this._setCurve(a),this._time=b,this._point=c||a.getPointAtTime(b),this._overlap=d,this._distance=e,this._intersection=this._next=this._previous=null},_setCurve:function(a){var b=a._path;this._path=b,this._version=b?b._version:0,this._curve=a,this._segment=null,this._segment1=a._segment1,this._segment2=a._segment2},_setSegment:function(a){this._setCurve(a.getCurve()),this._segment=a,this._time=a===this._segment1?0:1,this._point=a._point.clone()},getSegment:function(){var a=this._segment;if(!a){var b=this.getCurve(),c=this.getTime();0===c?a=b._segment1:1===c?a=b._segment2:null!=c&&(a=b.getPartLength(0,c)<b.getPartLength(c,1)?b._segment1:b._segment2),this._segment=a}return a},getCurve:function(){function a(a){var b=a&&a.getCurve();if(b&&null!=(c._time=b.getTimeOf(c._point)))return c._setCurve(b),b}var b=this._path,c=this;return b&&b._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||a(this._segment)||a(this._segment1)||a(this._segment2.getPrevious())},getPath:function(){var a=this.getCurve();return a&&a._path},getIndex:function(){var a=this.getCurve();return a&&a.getIndex()},getTime:function(){var a=this.getCurve(),b=this._time;return a&&null==b?this._time=a.getTimeOf(this._point):b},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var a=this._offset;if(null==a){a=0;var b=this.getPath(),c=this.getIndex();if(b&&null!=c)for(var d=b.getCurves(),e=0;e<c;e++)a+=d[e].getLength();this._offset=a+=this.getCurveOffset()}return a},getCurveOffset:function(){var a=this._curveOffset;if(null==a){var b=this.getCurve(),c=this.getTime();this._curveOffset=a=null!=c&&b&&b.getPartLength(0,c)}return a},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var a=this.getCurve(),b=a&&a.divideAtTime(this.getTime());return b&&this._setSegment(b._segment1),b},split:function(){var a=this.getCurve(),b=a._path,c=a&&a.splitAtTime(this.getTime());return c&&this._setSegment(b.getLastSegment()),c},equals:function(a,b){var c=this===a;if(!c&&a instanceof F){var d=this.getCurve(),e=a.getCurve(),f=d._path;if(f===e._path){var g=Math.abs,h=1e-7,i=g(this.getOffset()-a.getOffset()),j=!b&&this._intersection,k=!b&&a._intersection;c=(i<h||f&&g(f.getLength()-i)<h)&&(!j&&!k||j&&k&&j.equals(k,!0))}}return c},toString:function(){var a=[],b=this.getPoint(),c=i.instance;b&&a.push("point: "+b);var d=this.getIndex();null!=d&&a.push("index: "+d);var e=this.getTime();return null!=e&&a.push("time: "+c.number(e)),null!=this._distance&&a.push("distance: "+c.number(this._distance)),"{ "+a.join(", ")+" }"},isTouching:function(){var a=this._intersection;if(a&&this.getTangent().isCollinear(a.getTangent())){var b=this.getCurve(),c=a.getCurve();return!(b.isStraight()&&c.isStraight()&&b.getLine().intersect(c.getLine()))}return!1},isCrossing:function(){function a(a,b){var c=a.getValues(),d=E.classify(c).roots||E.getPeaks(c),e=d.length,f=b&&e>1?d[e-1]:e>0?d[0]:.5;n.push(E.getLength(c,b?f:0,b?1:f)/2)}function b(a,b,c){return b<c?a>b&&a<c:a>b||a<c}var c=this._intersection;if(!c)return!1;var d=this.getTime(),e=c.getTime(),f=1e-8,g=1-f,h=d>=f&&d<=g,i=e>=f&&e<=g;if(h&&i)return!this.isTouching();var j=this.getCurve(),k=d<f?j.getPrevious():j,l=c.getCurve(),m=e<f?l.getPrevious():l;if(d>g&&(j=j.getNext()),e>g&&(l=l.getNext()),!(k&&j&&m&&l))return!1;var n=[];h||(a(k,!0),a(j,!1)),i||(a(m,!0),a(l,!1));var o=this.getPoint(),p=Math.min.apply(Math,n),q=h?j.getTangentAtTime(d):j.getPointAt(p).subtract(o),r=h?q.negate():k.getPointAt(-p).subtract(o),s=i?l.getTangentAtTime(e):l.getPointAt(p).subtract(o),t=i?s.negate():m.getPointAt(-p).subtract(o),u=r.getAngle(),v=q.getAngle(),w=t.getAngle(),x=s.getAngle();return!!(h?b(u,w,x)^b(v,w,x)&&b(u,x,w)^b(v,x,w):b(w,u,v)^b(x,u,v)&&b(w,v,u)^b(x,v,u))},hasOverlap:function(){return!!this._overlap}},e.each(E._evaluateMethods,function(a){var b=a+"At";this[a]=function(){var a=this.getCurve(),c=this.getTime();return null!=c&&a&&a[b](c,!0)}},{preserve:!0}),new function(){function a(a,b,c){function d(c,d){for(var f=c+d;f>=-1&&f<=e;f+=d){var g=a[(f%e+e)%e];if(!b.getPoint().isClose(g.getPoint(),1e-7))break;if(b.equals(g))return g}return null}for(var e=a.length,f=0,g=e-1;f<=g;){var h,i=f+g>>>1,j=a[i];if(c&&(h=b.equals(j)?j:d(i,-1)||d(i,1)))return b._overlap&&(h._overlap=h._intersection._overlap=!0),h;var k=b.getPath(),l=j.getPath();(k!==l?k._id-l._id:b.getIndex()+b.getTime()-(j.getIndex()+j.getTime()))<0?g=i-1:f=i+1}return a.splice(f,0,b),b}return{statics:{insert:a,expand:function(b){for(var c=b.slice(),d=b.length-1;d>=0;d--)a(c,b[d]._intersection,!1);return c}}}}),G=u.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(a){var b,c,d;if(e.isPlainObject(a)?(c=a.segments,b=a.pathData):Array.isArray(a)?c=a:"string"==typeof a&&(b=a),c){var f=c[0];d=f&&Array.isArray(f[0])}else b&&(d=(b.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(b));return new(d?I:H)(a)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(a){this.isClockwise()!=(a=!!a)&&this.reverse()},setPathData:function(a){function b(a,b){var c=+d[a];return h&&(c+=i[b]),c}function c(a){return new l(b(a,"x"),b(a+1,"y"))}var d,e,f,g=a&&a.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),h=!1,i=new l,j=new l;this.clear();for(var k=0,m=g&&g.length;k<m;k++){var o=g[k],p=o[0],q=p.toLowerCase();d=o.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var r=d&&d.length;switch(h=p===q,"z"!==e||/[mz]/.test(q)||this.moveTo(i),q){case"m":case"l":for(var s="m"===q,t=0;t<r;t+=2)this[s?"moveTo":"lineTo"](i=c(t)),s&&(j=i,s=!1);f=i;break;case"h":case"v":var u="h"===q?"x":"y";i=i.clone();for(var t=0;t<r;t++)i[u]=b(t,u),this.lineTo(i);f=i;break;case"c":for(var t=0;t<r;t+=6)this.cubicCurveTo(c(t),f=c(t+2),i=c(t+4));break;case"s":for(var t=0;t<r;t+=4)this.cubicCurveTo(/[cs]/.test(e)?i.multiply(2).subtract(f):i,f=c(t),i=c(t+2)),e=q;break;case"q":for(var t=0;t<r;t+=4)this.quadraticCurveTo(f=c(t),i=c(t+2));break;case"t":for(var t=0;t<r;t+=2)this.quadraticCurveTo(f=/[qt]/.test(e)?i.multiply(2).subtract(f):i,i=c(t)),e=q;break;case"a":for(var t=0;t<r;t+=7)this.arcTo(i=c(t+5),new n(+d[t],+d[t+1]),+d[t+2],+d[t+4],+d[t+3]);break;case"z":this.closePath(1e-12),i=j}e=q}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(a){var b=a.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(a):{};return b.onPath||!!("evenodd"===this.getFillRule()?1&b.windingL||1&b.windingR:b.winding)},getIntersections:function(a,b,c,d){var e=this===a||!a,f=this._matrix._orNullIfIdentity(),g=e?f:(c||a._matrix)._orNullIfIdentity();return e||this.getBounds(f).touches(a.getBounds(g))?E.getIntersections(this.getCurves(),!e&&a.getCurves(),b,f,g,d):[]},getCrossings:function(a){return this.getIntersections(a,function(a){return a.hasOverlap()||a.isCrossing()})},getNearestLocation:function(){for(var a=l.read(arguments),b=this.getCurves(),c=1/0,d=null,e=0,f=b.length;e<f;e++){var g=b[e].getNearestLocation(a);g._distance<c&&(c=g._distance,d=g)}return d},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a?a.getPoint():a},interpolate:function(a,b,c){var d=!this._children,e=d?"_segments":"_children",f=a[e],g=b[e],h=this[e];if(!f||!g||f.length!==g.length)throw new Error("Invalid operands in interpolate() call: "+a+", "+b);var i=h.length,j=g.length;if(i<j)for(var k=d?C:H,l=i;l<j;l++)this.add(new k);else i>j&&this[d?"removeSegments":"removeChildren"](j,i);for(var l=0;l<j;l++)h[l].interpolate(f[l],g[l],c);d&&(this.setClosed(a._closed),this._changed(9))},compare:function(a){var b=!1;if(a){var c=this._children||[this],d=a._children?a._children.slice():[a],e=c.length,f=d.length,g=[],h=0;b=!0;for(var i=e-1;i>=0&&b;i--){var j=c[i];b=!1;for(var k=f-1;k>=0&&!b;k--)j.compare(d[k])&&(g[k]||(g[k]=!0,h++),b=!0)}b=b&&h===f}return b}}),H=G.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(a){this._closed=!1,this._segments=[],this._version=0;var c=Array.isArray(a)?"object"==typeof a[0]?a:arguments:!a||a.size!==b||a.x===b&&a.point===b?null:arguments;c&&c.length>0?this.setSegments(c):(this._curves=b,this._segmentSelection=0,c||"string"!=typeof a||(this.setPathData(a),a=null)),this._initialize(!c&&a)},_equals:function(a){return this._closed===a._closed&&e.equals(this._segments,a._segments)},copyContent:function(a){this.setSegments(a._segments),this._closed=a._closed},_changed:function a(c){if(a.base.call(this,c),8&c){if(this._length=this._area=b,16&c)this._version++;else if(this._curves)for(var d=0,e=this._curves.length;d<e;d++)this._curves[d]._changed()}else 32&c&&(this._bounds=b)},getStyle:function(){var a=this._parent;return(a instanceof I?a:this)._style},getSegments:function(){return this._segments},setSegments:function(a){var c=this.isFullySelected(),d=a&&a.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=b,d){var e=a[d-1];"boolean"==typeof e&&(this.setClosed(e),d--),this._add(C.readList(a,0,{},d))}c&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var a=this._curves,b=this._segments;if(!a){var c=this._countCurves();a=this._curves=new Array(c);for(var d=0;d<c;d++)a[d]=new E(this,b[d],b[d+1]||b[0])}return a},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var a=this.getCurves();return a[a.length-1]},isClosed:function(){return this._closed},setClosed:function(a){if(this._closed!=(a=!!a)){if(this._closed=a,this._curves){var b=this._curves.length=this._countCurves();a&&(this._curves[b-1]=new E(this,this._segments[b-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(a,b){function c(b,c){if(b._transformCoordinates(a,p),d=p[0],e=p[1],q)r.push("M"+o.pair(d,e)),q=!1;else if(h=p[2],j=p[3],h===d&&j===e&&k===f&&l===g){if(!c){var i=d-f,m=e-g;r.push(0===i?"v"+o.number(m):0===m?"h"+o.number(i):"l"+o.pair(i,m))}}else r.push("c"+o.pair(k-f,l-g)+" "+o.pair(h-f,j-g)+" "+o.pair(d-f,e-g));f=d,g=e,k=p[4],l=p[5]}var d,e,f,g,h,j,k,l,m=this._segments,n=m.length,o=new i(b),p=new Array(6),q=!0,r=[];if(!n)return"";for(var s=0;s<n;s++)c(m[s]);return this._closed&&n>0&&(c(m[0],!0),r.push("z")),r.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(a){for(var b=this._segments,c=new Array(6),d=0,e=b.length;d<e;d++)b[d]._transformCoordinates(a,c,!0);return!0},_add:function(a,b){for(var c=this._segments,d=this._curves,e=a.length,f=null==b,b=f?c.length:b,g=0;g<e;g++){var h=a[g];h._path&&(h=a[g]=h.clone()),h._path=this,h._index=b+g,h._selection&&this._updateSelection(h,0,h._selection)}if(f)c.push.apply(c,a);else{c.splice.apply(c,[b,0].concat(a));for(var g=b+e,i=c.length;g<i;g++)c[g]._index=g}if(d){var j=this._countCurves(),k=b>0&&b+e-1===j?b-1:b,l=k,m=Math.min(k+e,j);a._curves&&(d.splice.apply(d,[k,0].concat(a._curves)),l+=a._curves.length);for(var g=l;g<m;g++)d.splice(g,0,new E(this,null,null));this._adjustCurves(k,m)}return this._changed(25),a},_adjustCurves:function(a,b){for(var c,d=this._segments,e=this._curves,f=a;f<b;f++)c=e[f],c._path=this,c._segment1=d[f],c._segment2=d[f+1]||d[0],c._changed();(c=e[this._closed&&!a?d.length-1:a-1])&&(c._segment2=d[a]||d[0],c._changed()),(c=e[b])&&(c._segment1=d[b],c._changed())},_countCurves:function(){var a=this._segments.length;return!this._closed&&a>0?a-1:a},add:function(a){return arguments.length>1&&"number"!=typeof a?this._add(C.readList(arguments)):this._add([C.read(arguments)])[0]},insert:function(a,b){return arguments.length>2&&"number"!=typeof b?this._add(C.readList(arguments,1),a):this._add([C.read(arguments,1)],a)[0]},addSegment:function(){return this._add([C.read(arguments)])[0]},insertSegment:function(a){return this._add([C.read(arguments,1)],a)[0]},addSegments:function(a){return this._add(C.readList(a))},insertSegments:function(a,b){return this._add(C.readList(b),a)},removeSegment:function(a){return this.removeSegments(a,a+1)[0]||null},removeSegments:function(a,b,c){a=a||0,b=e.pick(b,this._segments.length);var d=this._segments,f=this._curves,g=d.length,h=d.splice(a,b-a),i=h.length;if(!i)return h;for(var j=0;j<i;j++){var k=h[j];k._selection&&this._updateSelection(k,k._selection,0),k._index=k._path=null}for(var j=a,l=d.length;j<l;j++)d[j]._index=j;if(f){for(var m=a>0&&b===g+(this._closed?1:0)?a-1:a,f=f.splice(m,i),j=f.length-1;j>=0;j--)f[j]._path=null;c&&(h._curves=f.slice(1)),this._adjustCurves(m,m)}return this._changed(25),h},clear:"#removeSegments",hasHandles:function(){for(var a=this._segments,b=0,c=a.length;b<c;b++)if(a[b].hasHandles())return!0;return!1},clearHandles:function(){for(var a=this._segments,b=0,c=a.length;b<c;b++)a[b].clearHandles()},getLength:function(){if(null==this._length){for(var a=this.getCurves(),b=0,c=0,d=a.length;c<d;c++)b+=a[c].getLength();this._length=b}return this._length},getArea:function(){var a=this._area;if(null==a){var b=this._segments,c=this._closed;a=0;for(var d=0,e=b.length;d<e;d++){var f=d+1===e;a+=E.getArea(E.getValues(b[d],b[f?0:d+1],null,f&&!c))}this._area=a}return a},isFullySelected:function(){var a=this._segments.length;return this.isSelected()&&a>0&&this._segmentSelection===7*a},setFullySelected:function(a){a&&this._selectSegments(!0),this.setSelected(a)},setSelection:function a(b){1&b||this._selectSegments(!1),a.base.call(this,b)},_selectSegments:function(a){var b=this._segments,c=b.length,d=a?7:0;this._segmentSelection=d*c;for(var e=0;e<c;e++)b[e]._selection=d},_updateSelection:function(a,b,c){a._selection=c,(this._segmentSelection+=c-b)>0&&this.setSelected(!0)},divideAt:function(a){var b,c=this.getLocationAt(a);return c&&(b=c.getCurve().divideAt(c.getCurveOffset()))?b._segment1:null},splitAt:function(a){var b=this.getLocationAt(a),c=b&&b.index,d=b&&b.time,e=1e-8;d>1-e&&(c++,d=0);var f=this.getCurves();if(c>=0&&c<f.length){d>=e&&f[c++].divideAtTime(d);var g,h=this.removeSegments(c,this._segments.length,!0);return this._closed?(this.setClosed(!1),g=this):(g=new H(u.NO_INSERT),g.insertAbove(this),g.copyAttributes(this)),g._add(h,0),this.addSegment(h[0]),g}return null},split:function(a,c){var d,e=c===b?a:(d=this.getCurves()[a])&&d.getLocationAtTime(c);return null!=e?this.splitAt(e):null},join:function(a,b){var c=b||0;if(a&&a!==this){var d=a._segments,e=this.getLastSegment(),f=a.getLastSegment();if(!f)return this;e&&e._point.isClose(f._point,c)&&a.reverse();var g=a.getFirstSegment();if(e&&e._point.isClose(g._point,c))e.setHandleOut(g._handleOut),this._add(d.slice(1));else{var h=this.getFirstSegment();h&&h._point.isClose(g._point,c)&&a.reverse(),f=a.getLastSegment(),h&&h._point.isClose(f._point,c)?(h.setHandleIn(f._handleIn),this._add(d.slice(0,d.length-1),0)):this._add(d.slice())}a._closed&&this._add([d[0]]),a.remove()}var i=this.getFirstSegment(),j=this.getLastSegment();return i!==j&&i._point.isClose(j._point,c)&&(i.setHandleIn(j._handleIn),j.remove(),this.setClosed(!0)),this},reduce:function(a){for(var b=this.getCurves(),c=a&&a.simplify,d=c?1e-7:0,e=b.length-1;e>=0;e--){var f=b[e];!f.hasHandles()&&(!f.hasLength(d)||c&&f.isCollinear(f.getNext()))&&f.remove()}return this},reverse:function(){this._segments.reverse();for(var a=0,b=this._segments.length;a<b;a++){var c=this._segments[a],d=c._handleIn;c._handleIn=c._handleOut,c._handleOut=d,c._index=a}this._curves=null,this._changed(9)},flatten:function(a){for(var b=new J(this,a||.25,256,!0),c=b.parts,d=c.length,e=[],f=0;f<d;f++)e.push(new C(c[f].curve.slice(0,2)));!this._closed&&d>0&&e.push(new C(c[d-1].curve.slice(6))),this.setSegments(e)},simplify:function(a){var b=new K(this).fit(a||2.5);return b&&this.setSegments(b),!!b},smooth:function(a){function c(a,b){var c=a&&a.index;if(null!=c){var e=a.path;if(e&&e!==d)throw new Error(a._class+" "+c+" of "+e+" is not part of "+d);b&&a instanceof E&&c++}else c="number"==typeof a?a:b;return Math.min(c<0&&i?c%h:c<0?c+h:c,h-1)}var d=this,e=a||{},f=e.type||"asymmetric",g=this._segments,h=g.length,i=this._closed,j=i&&e.from===b&&e.to===b,k=c(e.from,0),l=c(e.to,h-1);if(k>l)if(i)k-=h;else{var m=k;k=l,l=m}if(/^(?:asymmetric|continuous)$/.test(f)){var n="asymmetric"===f,o=Math.min,p=l-k+1,q=p-1,r=j?o(p,4):1,s=r,t=r,u=[];if(i||(s=o(1,k),t=o(1,h-l-1)),(q+=s+t)<=1)return;for(var v=0,w=k-s;v<=q;v++,w++)u[v]=g[(w<0?w+h:w)%h]._point;for(var x=u[0]._x+2*u[1]._x,y=u[0]._y+2*u[1]._y,z=2,A=q-1,B=[x],C=[y],D=[z],F=[],G=[],v=1;v<q;v++){var H=v<A,I=H?1:n?1:2,J=H?4:n?2:7,K=H?4:n?3:8,L=H?2:n?0:1,M=I/z;z=D[v]=J-M,x=B[v]=K*u[v]._x+L*u[v+1]._x-M*x,y=C[v]=K*u[v]._y+L*u[v+1]._y-M*y}F[A]=B[A]/D[A],G[A]=C[A]/D[A];for(var v=q-2;v>=0;v--)F[v]=(B[v]-F[v+1])/D[v],G[v]=(C[v]-G[v+1])/D[v];F[q]=(3*u[q]._x-F[A])/2,G[q]=(3*u[q]._y-G[A])/2;for(var v=s,N=q-t,w=k;v<=N;v++,w++){var O=g[w<0?w+h:w],P=O._point,Q=F[v]-P._x,R=G[v]-P._y;(j||v<N)&&O.setHandleOut(Q,R),(j||v>s)&&O.setHandleIn(-Q,-R)}}else for(var v=k;v<=l;v++)g[v<0?v+h:v].smooth(e,!j&&v===k,!j&&v===l)},toShape:function(a){function c(a,b){var c=l[a],d=c.getNext(),e=l[b],f=e.getNext();return c._handleOut.isZero()&&d._handleIn.isZero()&&e._handleOut.isZero()&&f._handleIn.isZero()&&d._point.subtract(c._point).isCollinear(f._point.subtract(e._point))}function d(a){var b=l[a],c=b.getPrevious(),d=b.getNext();return c._handleOut.isZero()&&b._handleIn.isZero()&&b._handleOut.isZero()&&d._handleIn.isZero()&&b._point.subtract(c._point).isOrthogonal(d._point.subtract(b._point))}function e(a){var b=l[a],c=b.getNext(),d=b._handleOut,e=c._handleIn,f=.5522847498307936;if(d.isOrthogonal(e)){var g=b._point,h=c._point,i=new s(g,d,!0).intersect(new s(h,e,!0),!0);return i&&j.isZero(d.getLength()/i.subtract(g).getLength()-f)&&j.isZero(e.getLength()/i.subtract(h).getLength()-f)}return!1}function f(a,b){return l[a]._point.getDistance(l[b]._point)}if(!this._closed)return null;var g,h,i,k,l=this._segments;if(!this.hasHandles()&&4===l.length&&c(0,2)&&c(1,3)&&d(1)?(g=x.Rectangle,h=new n(f(0,3),f(0,1)),k=l[1]._point.add(l[2]._point).divide(2)):8===l.length&&e(0)&&e(2)&&e(4)&&e(6)&&c(1,5)&&c(3,7)?(g=x.Rectangle,h=new n(f(1,6),f(0,3)),i=h.subtract(new n(f(0,7),f(1,2))).divide(2),k=l[3]._point.add(l[4]._point).divide(2)):4===l.length&&e(0)&&e(1)&&e(2)&&e(3)&&(j.isZero(f(0,2)-f(1,3))?(g=x.Circle,i=f(0,2)/2):(g=x.Ellipse,i=new n(f(2,0)/2,f(3,1)/2)),k=l[1]._point),g){var m=this.getPosition(!0),o=new g({center:m,size:h,radius:i,insert:!1});return o.copyAttributes(this,!0),o._matrix.prepend(this._matrix),o.rotate(k.subtract(m).getAngle()+90),(a===b||a)&&o.insertAbove(this),o}return null},toPath:"#clone",compare:function a(b){if(!b||b instanceof I)return a.base.call(this,b);var c=this.getCurves(),d=b.getCurves(),e=c.length,f=d.length;if(!e||!f)return e==f;for(var g,h,i=c[0].getValues(),j=[],k=0,l=0,m=0;m<f;m++){var n=d[m].getValues();j.push(n);var o=E.getOverlaps(i,n);if(o){g=!m&&o[0][0]>0?f-1:m,h=o[0][1];break}}for(var p,q=Math.abs,r=1e-8,n=j[g];i&&n;){var o=E.getOverlaps(i,n);if(o){if(q(o[0][0]-l)<r){1===(l=o[1][0])&&(i=++k<e?c[k].getValues():null,l=0);var s=o[0][1];if(q(s-h)<r){if(p||(p=[g,s]),h=o[1][1],1===h&&(++g>=f&&(g=0),n=j[g]||d[g].getValues(),h=0),!i)return p[0]===g&&p[1]===h;continue}}}break}return!1},_hitTestSelf:function(a,b,c,d){function e(b,c){return a.subtract(b).divide(c).length<=1}function f(a,c,d){if(!b.selected||c.isSelected()){var f=a._point;if(c!==f&&(c=c.add(f)),e(c,v))return new B(d,p,{segment:a,point:c})}}function g(a,c){return(c||b.segments)&&f(a,a._point,"segment")||!c&&b.handles&&(f(a,a._handleIn,"handle-in")||f(a,a._handleOut,"handle-out"))}function h(a){m.add(a)}function i(b){var c=t||b._index>0&&b._index<s-1;if("round"===(c?j:k))return e(b._point,v);if(m=new H({internal:!0,closed:!0}),c?b.isSmooth()||H._addBevelJoin(b,j,z,l,null,d,h,!0):"square"===k&&H._addSquareCap(b,k,z,null,d,h,!0),!m.isEmpty()){var f;return m.contains(a)||(f=m.getNearestLocation(a))&&e(f.getPoint(),u)}}var j,k,l,m,n,o,p=this,q=this.getStyle(),r=this._segments,s=r.length,t=this._closed,u=b._tolerancePadding,v=u,w=b.stroke&&q.hasStroke(),x=b.fill&&q.hasFill(),y=b.curves,z=w?q.getStrokeWidth()/2:x&&b.tolerance>0||y?0:null;if(null!==z&&(z>0?(j=q.getStrokeJoin(),k=q.getStrokeCap(),l=q.getMiterLimit(),v=v.add(H._getStrokePadding(z,d))):j=k="round"),!b.ends||b.segments||t){if(b.segments||b.handles)for(var A=0;A<s;A++)if(o=g(r[A]))return o}else if(o=g(r[0],!0)||g(r[s-1],!0))return o;if(null!==z){if(n=this.getNearestLocation(a)){var C=n.getTime();0===C||1===C&&s>1?i(n.getSegment())||(n=null):e(n.getPoint(),v)||(n=null)}if(!n&&"miter"===j&&s>1)for(var A=0;A<s;A++){var D=r[A];if(a.getDistance(D._point)<=l*z&&i(D)){n=D.getLocation();break}}}return!n&&x&&this._contains(a)||n&&!w&&!y?new B("fill",this):n?new B(w?"stroke":"curve",this,{location:n,point:n.getPoint()}):null}},e.each(E._evaluateMethods,function(a){this[a+"At"]=function(b){var c=this.getLocationAt(b);return c&&c[a]()}},{beans:!1,getLocationOf:function(){for(var a=l.read(arguments),b=this.getCurves(),c=0,d=b.length;c<d;c++){var e=b[c].getLocationOf(a);if(e)return e}return null},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getLocationAt:function(a){if("number"==typeof a){for(var b=this.getCurves(),c=0,d=0,e=b.length;d<e;d++){var f=c,g=b[d];if((c+=g.getLength())>a)return g.getLocationAt(a-f)}if(b.length>0&&a<=this.getLength())return new F(b[b.length-1],1)}else if(a&&a.getPath&&a.getPath()===this)return a;return null}}),new function(){function a(a,b,c,d){function e(b){var c=i[b],d=i[b+1];f==c&&g==d||(a.beginPath(),a.moveTo(f,g),a.lineTo(c,d),a.stroke(),a.beginPath(),a.arc(c,d,h,0,2*Math.PI,!0),a.fill())}for(var f,g,h=d/2,i=new Array(6),j=0,k=b.length;j<k;j++){var l=b[j],m=l._selection;if(l._transformCoordinates(c,i),f=i[0],g=i[1],2&m&&e(2),4&m&&e(4),a.fillRect(f-h,g-h,d,d),!(1&m)){var n=a.fillStyle;a.fillStyle="#ffffff",a.fillRect(f-h+1,g-h+1,d-2,d-2),a.fillStyle=n}}}function b(a,b,c){function d(b){if(c)b._transformCoordinates(c,o),e=o[0],f=o[1];else{var d=b._point;e=d._x,f=d._y}if(p)a.moveTo(e,f),p=!1;else{if(c)i=o[2],j=o[3];else{var m=b._handleIn;i=e+m._x,j=f+m._y}i===e&&j===f&&k===g&&l===h?a.lineTo(e,f):a.bezierCurveTo(k,l,i,j,e,f)}if(g=e,h=f,c)k=o[4],l=o[5];else{var m=b._handleOut;k=g+m._x,l=h+m._y}}for(var e,f,g,h,i,j,k,l,m=b._segments,n=m.length,o=new Array(6),p=!0,q=0;q<n;q++)d(m[q]);b._closed&&n>0&&d(m[0])}return{_draw:function(a,c,d,e){function f(a){return l[(a%m+m)%m]}var g=c.dontStart,h=c.dontFinish||c.clip,i=this.getStyle(),j=i.hasFill(),k=i.hasStroke(),l=i.getDashArray(),m=!paper.support.nativeDash&&k&&l&&l.length;if(g||a.beginPath(),(j||k&&!m||h)&&(b(a,this,e),this._closed&&a.closePath()),!h&&(j||k)&&(this._setStyles(a,c,d),j&&(a.fill(i.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),k)){if(m){g||a.beginPath();var n,o=new J(this,.25,32,!1,e),p=o.length,q=-i.getDashOffset(),r=0;for(q%=p;q>0;)q-=f(r--)+f(r--);for(;q<p;)n=q+f(r++),(q>0||n>0)&&o.drawPart(a,Math.max(q,0),Math.max(n,0)),q=n+f(r++)}a.stroke()}},_drawSelected:function(c,d){c.beginPath(),b(c,this,d),c.stroke(),a(c,this._segments,d,paper.settings.handleSize)}}},new function(){function a(a){var b=a._segments;if(!b.length)throw new Error("Use a moveTo() command first");return b[b.length-1]}return{moveTo:function(){var a=this._segments;1===a.length&&this.removeSegment(0),a.length||this._add([new C(l.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new C(l.read(arguments))])},cubicCurveTo:function(){var b=l.read(arguments),c=l.read(arguments),d=l.read(arguments),e=a(this);e.setHandleOut(b.subtract(e._point)),this._add([new C(d,c.subtract(d))])},quadraticCurveTo:function(){var b=l.read(arguments),c=l.read(arguments),d=a(this)._point;this.cubicCurveTo(b.add(d.subtract(b).multiply(1/3)),b.add(c.subtract(b).multiply(1/3)),c)},curveTo:function(){var b=l.read(arguments),c=l.read(arguments),d=e.pick(e.read(arguments),.5),f=1-d,g=a(this)._point,h=b.subtract(g.multiply(f*f)).subtract(c.multiply(d*d)).divide(2*d*f);if(h.isNaN())throw new Error("Cannot put a curve through points with parameter = "+d);this.quadraticCurveTo(h,c)},arcTo:function(){var b,c,d,f,g,h=Math.abs,i=Math.sqrt,k=a(this),m=k._point,o=l.read(arguments),p=e.peek(arguments),q=e.pick(p,!0);if("boolean"==typeof q)var t=m.add(o).divide(2),b=t.add(t.subtract(m).rotate(q?-90:90));else if(e.remain(arguments)<=2)b=o,o=l.read(arguments);else{var u=n.read(arguments),v=j.isZero;if(v(u.width)||v(u.height))return this.lineTo(o);var w=e.read(arguments),q=!!e.read(arguments),x=!!e.read(arguments),t=m.add(o).divide(2),y=m.subtract(t).rotate(-w),z=y.x,A=y.y,B=h(u.width),D=h(u.height),E=B*B,F=D*D,G=z*z,H=A*A,I=i(G/E+H/F);if(I>1&&(B*=I,D*=I,E=B*B,F=D*D),I=(E*F-E*H-F*G)/(E*H+F*G),h(I)<1e-12&&(I=0),I<0)throw new Error("Cannot create an arc with the given arguments");c=new l(B*A/D,-D*z/B).multiply((x===q?-1:1)*i(I)).rotate(w).add(t),g=(new r).translate(c).rotate(w).scale(B,D),f=g._inverseTransform(m),d=f.getDirectedAngle(g._inverseTransform(o)),!q&&d>0?d-=360:q&&d<0&&(d+=360)}if(b){var J=new s(m.add(b).divide(2),b.subtract(m).rotate(90),!0),K=new s(b.add(o).divide(2),o.subtract(b).rotate(90),!0),L=new s(m,o),M=L.getSide(b);if(!(c=J.intersect(K,!0))){if(!M)return this.lineTo(o);throw new Error("Cannot create an arc with the given arguments")}f=m.subtract(c),d=f.getDirectedAngle(o.subtract(c));var N=L.getSide(c);0===N?d=M*h(d):M===N&&(d+=d<0?360:-360)}for(var O=1e-12,P=h(d),Q=P>=360?4:Math.ceil((P-O)/90),R=d/Q,S=R*Math.PI/360,T=4/3*Math.sin(S)/(1+Math.cos(S)),U=[],V=0;V<=Q;V++){var y=o,W=null;if(V<Q&&(W=f.rotate(90).multiply(T),g?(y=g._transformPoint(f),W=g._transformPoint(f.add(W)).subtract(y)):y=c.add(f)),V){var X=f.rotate(-90).multiply(T);g&&(X=g._transformPoint(f.add(X)).subtract(y)),U.push(new C(y,X,W))}else k.setHandleOut(W);f=f.rotate(R)}this._add(U)},lineBy:function(){var b=l.read(arguments),c=a(this)._point;this.lineTo(c.add(b))},curveBy:function(){var b=l.read(arguments),c=l.read(arguments),d=e.read(arguments),f=a(this)._point;this.curveTo(f.add(b),f.add(c),d)},cubicCurveBy:function(){var b=l.read(arguments),c=l.read(arguments),d=l.read(arguments),e=a(this)._point;this.cubicCurveTo(e.add(b),e.add(c),e.add(d))},quadraticCurveBy:function(){var b=l.read(arguments),c=l.read(arguments),d=a(this)._point;this.quadraticCurveTo(d.add(b),d.add(c))},arcBy:function(){var b=a(this)._point,c=b.add(l.read(arguments)),d=e.pick(e.peek(arguments),!0);"boolean"==typeof d?this.arcTo(c,d):this.arcTo(c,b.add(l.read(arguments)))},closePath:function(a){this.setClosed(!0),this.join(this,a)}}},{_getBounds:function(a,b){var c=b.handle?"getHandleBounds":b.stroke?"getStrokeBounds":"getBounds";return H[c](this._segments,this._closed,this,a,b)},statics:{getBounds:function(a,b,c,d,e,f){function g(a){a._transformCoordinates(d,i);for(var b=0;b<2;b++)E._addBounds(j[b],j[b+4],i[b+2],i[b],b,f?f[b]:0,k,l,m);var c=j;j=i,i=c}var h=a[0];if(!h)return new p;for(var i=new Array(6),j=h._transformCoordinates(d,new Array(6)),k=j.slice(0,2),l=k.slice(),m=new Array(2),n=1,o=a.length;n<o;n++)g(a[n]);return b&&g(h),new p(k[0],k[1],l[0]-k[0],l[1]-k[1])},getStrokeBounds:function(a,b,c,d,e){function f(a){q=q.include(a)}function g(a){q=q.unite(v.setCenter(a._point.transform(d)))}function h(a,b){"round"===b||a.isSmooth()?g(a):H._addBevelJoin(a,b,r,u,d,m,f)}function i(a,b){"round"===b?g(a):H._addSquareCap(a,b,r,d,m,f)}var j=c.getStyle(),k=j.hasStroke(),l=j.getStrokeWidth(),m=k&&c._getStrokeMatrix(d,e),o=k&&H._getStrokePadding(l,m),q=H.getBounds(a,b,c,d,e,o);if(!k)return q;for(var r=l/2,s=j.getStrokeJoin(),t=j.getStrokeCap(),u=j.getMiterLimit(),v=new p(new n(o)),w=a.length-(b?0:1),x=1;x<w;x++)h(a[x],s);return b?h(a[0],s):w>0&&(i(a[0],t),i(a[a.length-1],t)),q},_getStrokePadding:function(a,b){if(!b)return[a,a];var c=new l(a,0).transform(b),d=new l(0,a).transform(b),e=c.getAngleInRadians(),f=c.getLength(),g=d.getLength(),h=Math.sin(e),i=Math.cos(e),j=Math.tan(e),k=Math.atan2(g*j,f),m=Math.atan2(g,j*f);return[Math.abs(f*Math.cos(k)*i+g*Math.sin(k)*h),Math.abs(g*Math.sin(m)*i+f*Math.cos(m)*h)]},_addBevelJoin:function(a,b,c,d,e,f,g,h){var i=a.getCurve(),j=i.getPrevious(),k=i.getPoint1().transform(e),m=j.getNormalAtTime(1).multiply(c).transform(f),n=i.getNormalAtTime(0).multiply(c).transform(f);if(m.getDirectedAngle(n)<0&&(m=m.negate(),n=n.negate()),h&&g(k),g(k.add(m)),"miter"===b){var o=new s(k.add(m),new l(-m.y,m.x),!0).intersect(new s(k.add(n),new l(-n.y,n.x),!0),!0);o&&k.getDistance(o)<=d*c&&g(o)}g(k.add(n))},_addSquareCap:function(a,b,c,d,e,f,g){var h=a._point.transform(d),i=a.getLocation(),j=i.getNormal().multiply(c).transform(e);"square"===b&&(g&&(f(h.subtract(j)),f(h.add(j))),h=h.add(j.rotate(0===i.getTime()?-90:90))),f(h.add(j)),f(h.subtract(j))},getHandleBounds:function(a,b,c,d,e){var f,g,h=c.getStyle();if(e.stroke&&h.hasStroke()){var i=c._getStrokeMatrix(d,e),j=h.getStrokeWidth()/2,k=j
;"miter"===h.getStrokeJoin()&&(k=j*h.getMiterLimit()),"square"===h.getStrokeCap()&&(k=Math.max(k,j*Math.SQRT2)),f=H._getStrokePadding(j,i),g=H._getStrokePadding(k,i)}for(var l=new Array(6),m=1/0,n=-m,o=m,q=n,r=0,s=a.length;r<s;r++){a[r]._transformCoordinates(d,l);for(var t=0;t<6;t+=2){var u=t?f:g,v=u?u[0]:0,w=u?u[1]:0,x=l[t],y=l[t+1],z=x-v,A=x+v,B=y-w,C=y+w;z<m&&(m=z),A>n&&(n=A),B<o&&(o=B),C>q&&(q=C)}}return new p(m,o,n-m,q-o)}}});H.inject({statics:new function(){function a(a,b,c){var d=e.getNamed(c),f=new H(d&&!1===d.insert&&u.NO_INSERT);return f._add(a),f._closed=b,f.set(d)}function b(b,c,e){for(var f=new Array(4),g=0;g<4;g++){var h=d[g];f[g]=new C(h._point.multiply(c).add(b),h._handleIn.multiply(c),h._handleOut.multiply(c))}return a(f,!0,e)}var c=.5522847498307936,d=[new C([-1,0],[0,c],[0,-c]),new C([0,-1],[-c,0],[c,0]),new C([1,0],[0,-c],[0,c]),new C([0,1],[c,0],[-c,0])];return{Line:function(){return a([new C(l.readNamed(arguments,"from")),new C(l.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var a=l.readNamed(arguments,"center"),c=e.readNamed(arguments,"radius");return b(a,new n(c),arguments)},Rectangle:function(){var b,d=p.readNamed(arguments,"rectangle"),e=n.readNamed(arguments,"radius",0,{readNull:!0}),f=d.getBottomLeft(!0),g=d.getTopLeft(!0),h=d.getTopRight(!0),i=d.getBottomRight(!0);if(!e||e.isZero())b=[new C(f),new C(g),new C(h),new C(i)];else{e=n.min(e,d.getSize(!0).divide(2));var j=e.width,k=e.height,l=j*c,m=k*c;b=[new C(f.add(j,0),null,[-l,0]),new C(f.subtract(0,k),[0,m]),new C(g.add(0,k),null,[0,-m]),new C(g.add(j,0),[-l,0],null),new C(h.subtract(j,0),null,[l,0]),new C(h.add(0,k),[0,-m],null),new C(i.subtract(0,k),null,[0,m]),new C(i.subtract(j,0),[l,0])]}return a(b,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var a=x._readEllipse(arguments);return b(a.center,a.radius,arguments)},Oval:"#Ellipse",Arc:function(){var a=l.readNamed(arguments,"from"),b=l.readNamed(arguments,"through"),c=l.readNamed(arguments,"to"),d=e.getNamed(arguments),f=new H(d&&!1===d.insert&&u.NO_INSERT);return f.moveTo(a),f.arcTo(b,c),f.set(d)},RegularPolygon:function(){for(var b=l.readNamed(arguments,"center"),c=e.readNamed(arguments,"sides"),d=e.readNamed(arguments,"radius"),f=360/c,g=c%3==0,h=new l(0,g?-d:d),i=g?-1:.5,j=new Array(c),k=0;k<c;k++)j[k]=new C(b.add(h.rotate((k+i)*f)));return a(j,!0,arguments)},Star:function(){for(var b=l.readNamed(arguments,"center"),c=2*e.readNamed(arguments,"points"),d=e.readNamed(arguments,"radius1"),f=e.readNamed(arguments,"radius2"),g=360/c,h=new l(0,-1),i=new Array(c),j=0;j<c;j++)i[j]=new C(b.add(h.rotate(g*j).multiply(j%2?f:d)));return a(i,!0,arguments)}}}});var I=G.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(a){this._children=[],this._namedChildren={},this._initialize(a)||("string"==typeof a?this.setPathData(a):this.addChildren(Array.isArray(a)?a:arguments))},insertChildren:function a(b,c){var d=c,f=d[0];f&&"number"==typeof f[0]&&(d=[d]);for(var g=c.length-1;g>=0;g--){var h=d[g];d!==c||h instanceof H||(d=e.slice(d)),Array.isArray(h)?d[g]=new H({segments:h,insert:!1}):h instanceof I&&(d.splice.apply(d,[g,1].concat(h.removeChildren())),h.remove())}return a.base.call(this,b,d)},reduce:function a(b){for(var c=this._children,d=c.length-1;d>=0;d--){var e=c[d].reduce(b);e.isEmpty()&&e.remove()}if(!c.length){var e=new H(u.NO_INSERT);return e.copyAttributes(this),e.insertAbove(this),this.remove(),e}return a.base.call(this)},isClosed:function(){for(var a=this._children,b=0,c=a.length;b<c;b++)if(!a[b]._closed)return!1;return!0},setClosed:function(a){for(var b=this._children,c=0,d=b.length;c<d;c++)b[c].setClosed(a)},getFirstSegment:function(){var a=this.getFirstChild();return a&&a.getFirstSegment()},getLastSegment:function(){var a=this.getLastChild();return a&&a.getLastSegment()},getCurves:function(){for(var a=this._children,b=[],c=0,d=a.length;c<d;c++)b.push.apply(b,a[c].getCurves());return b},getFirstCurve:function(){var a=this.getFirstChild();return a&&a.getFirstCurve()},getLastCurve:function(){var a=this.getLastChild();return a&&a.getLastCurve()},getArea:function(){for(var a=this._children,b=0,c=0,d=a.length;c<d;c++)b+=a[c].getArea();return b},getLength:function(){for(var a=this._children,b=0,c=0,d=a.length;c<d;c++)b+=a[c].getLength();return b},getPathData:function(a,b){for(var c=this._children,d=[],e=0,f=c.length;e<f;e++){var g=c[e],h=g._matrix;d.push(g.getPathData(a&&!h.isIdentity()?a.appended(h):a,b))}return d.join("")},_hitTestChildren:function a(b,c,d){return a.base.call(this,b,c.class===H||"path"===c.type?c:e.set({},c,{fill:!1}),d)},_draw:function(a,b,c,d){var e=this._children;if(e.length){b=b.extend({dontStart:!0,dontFinish:!0}),a.beginPath();for(var f=0,g=e.length;f<g;f++)e[f].draw(a,b,d);if(!b.clip){this._setStyles(a,b,c);var h=this._style;h.hasFill()&&(a.fill(h.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),h.hasStroke()&&a.stroke()}}},_drawSelected:function(a,b,c){for(var d=this._children,e=0,f=d.length;e<f;e++){var g=d[e],h=g._matrix;c[g._id]||g._drawSelected(a,h.isIdentity()?b:b.appended(h))}}},new function(){function a(a,b){var c=a._children;if(b&&!c.length)throw new Error("Use a moveTo() command first");return c[c.length-1]}return e.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(b){this[b]=function(){var c=a(this,!0);c[b].apply(c,arguments)}},{moveTo:function(){var b=a(this),c=b&&b.isEmpty()?b:new H(u.NO_INSERT);c!==b&&this.addChild(c),c.moveTo.apply(c,arguments)},moveBy:function(){var b=a(this,!0),c=b&&b.getLastSegment(),d=l.read(arguments);this.moveTo(c?d.add(c._point):d)},closePath:function(b){a(this,!0).closePath(b)}})},e.each(["reverse","flatten","simplify","smooth"],function(a){this[a]=function(b){for(var c,d=this._children,e=0,f=d.length;e<f;e++)c=d[e][a](b)||c;return c}},{}));G.inject(new function(){function a(a,b){var c=a.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return b?c.resolveCrossings().reorient("nonzero"===c.getFillRule(),!0):c}function c(a,b,c,d,e,f){var g=new a(u.NO_INSERT);return g.addChildren(b,!0),c&&(g=g.reduce({simplify:!0})),f&&!1===f.insert||g.insertAbove(e&&d.isSibling(e)&&d.getIndex()<e.getIndex()?e:d),g.copyAttributes(d,!0),g}function d(b,d,e,g){function h(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];u.push.apply(u,d._segments),v.push.apply(v,d.getCurves()),d._overlapsOnly=!0}}if(g&&g.stroke&&/^(subtract|intersect)$/.test(e))return f(b,d,"subtract"===e);var j=a(b,!0),l=d&&b!==d&&a(d,!0),o=r[e];o[e]=!0,l&&(o.subtract||o.exclude)^l.isClockwise()^j.isClockwise()&&l.reverse();var p,q=k(F.expand(j.getCrossings(l))),s=j._children||[j],t=l&&(l._children||[l]),u=[],v=[];if(q.length){h(s),t&&h(t);for(var w=0,x=q.length;w<x;w++)m(q[w]._segment,j,l,v,o);for(var w=0,x=u.length;w<x;w++){var y=u[w],z=y._intersection;y._winding||m(y,j,l,v,o),z&&z._overlap||(y._path._overlapsOnly=!1)}p=n(u,o)}else p=i(t?s.concat(t):s.slice(),function(a){return!!o[a]});return c(I,p,!0,b,d,g)}function f(b,d,e){function f(a){if(h.contains(a.getPointAt(a.getLength()/2))^e)return j.unshift(a),!0}for(var g=a(b),h=a(d),i=g.getCrossings(h),j=[],k=i.length-1;k>=0;k--){var l=i[k].split();l&&(f(l)&&l.getFirstSegment().setHandleIn(0,0),g.getLastSegment().setHandleOut(0,0))}return f(g),c(v,j,!1,b,d)}function g(a,b){for(var c=a;c;){if(c===b)return;c=c._previous}for(;a._next&&a._next!==b;)a=a._next;if(!a._next){for(;b._previous;)b=b._previous;a._next=b,b._previous=a}}function h(a){for(var b=a.length-1;b>=0;b--)a[b].clearHandles()}function i(a,b,c){var d=a&&a.length;if(d){var f=e.each(a,function(a,b){this[a._id]={container:null,winding:a.isClockwise()?1:-1,index:b}},{}),g=a.slice().sort(function(a,b){return q(b.getArea())-q(a.getArea())}),h=g[0];null==c&&(c=h.isClockwise());for(var i=0;i<d;i++){for(var j=g[i],k=f[j._id],l=j.getInteriorPoint(),m=0,n=i-1;n>=0;n--){var o=g[n];if(o.contains(l)){var p=f[o._id];m=p.winding,k.winding+=m,k.container=p.exclude?p.container:o;break}}if(b(k.winding)===b(m))k.exclude=!0,a[k.index]=null;else{var r=k.container;j.setClockwise(r?!r.isClockwise():c)}}}return a}function k(a,b,c){function d(a){return a._path._id+"."+a._segment1._index}for(var e,f,i,j=b&&[],k=1e-8,l=1-k,m=!1,n=c||[],o=c&&{},p=(c&&c.length)-1;p>=0;p--){var q=c[p];q._path&&(o[d(q)]=!0)}for(var p=a.length-1;p>=0;p--){var r,s=a[p],t=s._time,u=t,v=b&&!b(s),q=s._curve;if(q&&(q!==f?(m=!q.hasHandles()||o&&o[d(q)],e=[],i=null,f=q):i>=k&&(t/=i)),v)e&&e.push(s);else{if(b&&j.unshift(s),i=u,t<k)r=q._segment1;else if(t>l)r=q._segment2;else{var w=q.divideAtTime(t,!0);m&&n.push(q,w),r=w._segment1;for(var x=e.length-1;x>=0;x--){var y=e[x];y._time=(y._time-t)/(1-t)}}s._setSegment(r);var z=r._intersection,A=s._intersection;if(z){g(z,A);for(var B=z;B;)g(B._intersection,z),B=B._next}else r._intersection=A}}return c||h(n),j||a}function l(a,b,c,d,e){function f(f){var g=f[k+0],i=f[k+6];if(!(r<o(g,i)||r>p(g,i))){var m=f[j+0],q=f[j+2],s=f[j+4],B=f[j+6];if(g===i)return void((m<v&&B>u||B<v&&m>u)&&(y=!0));var C=r===g?0:r===i?1:u>p(m,q,s,B)||v<o(m,q,s,B)?1:1===E.solveCubic(f,k,r,A,0,1)?A[0]:.5,D=0===C?m:1===C?B:E.getPoint(f,C)[c?"y":"x"],F=g>i?1:-1,G=h[k]>h[k+6]?1:-1,H=h[j+6];return r!==g?(D<u?w+=F:D>v?x+=F:y=!0,D>n-t&&D<n+t&&(z/=2)):(F!==G?m<u?w+=F:m>v&&(x+=F):m!=H&&(H<v&&D>v?(x+=F,y=!0):H>u&&D<u&&(w+=F,y=!0)),z=0),h=f,!e&&D>u&&D<v&&0===E.getTangent(f,C)[c?"x":"y"]&&l(a,b,c?0:1,d,!0)}}function g(a){var b=a[k+0],d=a[k+2],e=a[k+4],g=a[k+6];if(r<=p(b,d,e,g)&&r>=o(b,d,e,g))for(var h,i=a[j+0],l=a[j+2],m=a[j+4],n=a[j+6],q=u>p(i,l,m,n)||v<o(i,l,m,n)?[a]:E.getMonoCurves(a,c),s=0,t=q.length;s<t;s++)if(h=f(q[s]))return h}for(var h,i,j=c?1:0,k=1^j,m=[a.x,a.y],n=m[j],r=m[k],s=1e-9,t=1e-6,u=n-s,v=n+s,w=0,x=0,y=!1,z=1,A=[],B=0,C=b.length;B<C;B++){var D,F=b[B],G=F._path,H=F.getValues();if(!(B&&b[B-1]._path===G||(h=null,G._closed||(i=E.getValues(G.getLastCurve().getSegment2(),F.getSegment1(),null,!d),i[k]!==i[k+6]&&(h=i)),h))){h=H;for(var I=G.getLastCurve();I&&I!==F;){var J=I.getValues();if(J[k]!==J[k+6]){h=J;break}I=I.getPrevious()}}if(D=g(H))return D;if(B+1===C||b[B+1]._path!==G){if(i&&(D=g(i)))return D;i=null}}return w=q(w),x=q(x),{winding:p(w,x),windingL:w,windingR:x,quality:z,onPath:y}}function m(a,b,c,d,e){var f,g=[],h=a,i=0;do{var k=a.getCurve(),m=k.getLength();g.push({segment:a,curve:k,length:m}),i+=m,a=a.getNext()}while(a&&!a._intersection&&a!==h);for(var n=[.5,.25,.75],o={winding:0,quality:0},f=o,p=1e-8,r=1-p,s=0;s<n.length&&f.quality<.5;s++)for(var m=i*n[s],t=0,u=g.length;t<u;t++){var v=g[t],w=v.length;if(m<=w){var k=v.curve,x=k._path,y=x._parent,z=j.clamp(k.getTimeAt(m),p,r),A=k.getPointAtTime(z),B=q(k.getTangentAtTime(z).normalize().y)<Math.SQRT1_2?1:0;y instanceof I&&(x=y);var C=e.subtract&&c&&(x===b&&c._getWinding(A,B,!0).winding||x===c&&!b._getWinding(A,B,!0).winding)?o:l(A,d,B,!0);C.quality>f.quality&&(f=C);break}m-=w}for(var t=g.length-1;t>=0;t--)g[t].segment._winding=f}function n(a,b){function c(a){var c;return!(!a||a._visited||b&&(!b[(c=a._winding||{}).winding]||b.unite&&2===c.winding&&c.windingL&&c.windingR))}function d(a){if(a)for(var b=0,c=g.length;b<c;b++)if(a===g[b])return!0;return!1}function e(a){for(var b=a._segments,c=0,d=b.length;c<d;c++)b[c]._visited=!0}function f(a,b){function e(e,f){for(;e&&e!==f;){var h=e._segment,j=h._path,k=h.getNext()||j&&j.getFirstSegment(),l=k&&k._intersection;h!==a&&(d(h)||d(k)||k&&c(h)&&(c(k)||l&&c(l._segment)))&&i.push(h),b&&g.push(h),e=e._next}}var f=a._intersection,h=f,i=[];if(b&&(g=[a]),f){for(e(f);f&&f._prev;)f=f._prev;e(f,h)}return i}var g,h=[];a.sort(function(a,b){var c=a._intersection,d=b._intersection,e=!(!c||!c._overlap),f=!(!d||!d._overlap),g=a._path,h=b._path;return e^f?e?1:-1:!c^!d?c?1:-1:g!==h?g._id-h._id:a._index-b._index});for(var i=0,j=a.length;i<j;i++){var k,l,m,n=a[i],o=c(n),p=null,q=!1,r=!0,s=[];if(o&&n._path._overlapsOnly){var t=n._path,v=n._intersection._segment._path;t.compare(v)&&(t.getArea()&&h.push(t.clone(!1)),e(t),e(v),o=!1)}for(;o;){var w=!p,x=f(n,w),y=x.shift(),q=!w&&(d(n)||d(y)),z=!q&&y;if(w&&(p=new H(u.NO_INSERT),k=null),q){(n.isFirst()||n.isLast())&&(r=n._path._closed),n._visited=!0;break}if(z&&k&&(s.push(k),k=null),k||(z&&x.push(n),k={start:p._segments.length,crossings:x,visited:l=[],handleIn:m}),z&&(n=y),!c(n)){p.removeSegments(k.start);for(var A=0,B=l.length;A<B;A++)l[A]._visited=!1;l.length=0;do{(n=k&&k.crossings.shift())||(k=s.pop())&&(l=k.visited,m=k.handleIn)}while(k&&!c(n));if(!n)break}var D=n.getNext();p.add(new C(n._point,m,D&&n._handleOut)),n._visited=!0,l.push(n),n=D||n._path.getFirstSegment(),m=D&&D._handleIn}q&&(r&&(p.firstSegment.setHandleIn(m),p.setClosed(r)),0!==p.getArea()&&h.push(p))}return h}var o=Math.min,p=Math.max,q=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(a,b,c){return l(a,this.getCurves(),b,c)},unite:function(a,b){return d(this,a,"unite",b)},intersect:function(a,b){return d(this,a,"intersect",b)},subtract:function(a){return d(this,a,"subtract")},exclude:function(a,b){return d(this,a,"exclude",b)},divide:function(a,b){return c(v,[this.subtract(a,b),this.intersect(a,b)],!0,this,a,b)},resolveCrossings:function(){function a(a){var b=a&&a._intersection;return b&&b._overlap}var b=this._children,c=b||[this],d=!1,f=!1,g=this.getIntersections(null,function(a){return a.hasOverlap()&&(d=!0)||a.isCrossing()&&(f=!0)}),i=d&&f&&[];if(g=F.expand(g),d)for(var j=k(g,function(a){return a.hasOverlap()},i),l=j.length-1;l>=0;l--){var m=j[l]._segment,o=m.getPrevious(),p=m.getNext();a(o)&&a(p)&&(m.remove(),o._handleOut._set(0,0),p._handleIn._set(0,0),o===m||o.getCurve().hasLength()||(p._handleIn.set(o._handleIn),o.remove()))}f&&(k(g,d&&function(a){var b=a.getCurve(),c=a.getSegment(),d=a._intersection,e=d._curve,f=d._segment;return!!(b&&e&&b._path&&e._path)||(c&&(c._intersection=null),void(f&&(f._intersection=null)))},i),i&&h(i),c=n(e.each(c,function(a){this.push.apply(this,a._segments)},[])));var q,r=c.length;return r>1&&b?(c!==b&&this.setChildren(c),q=this):1!==r||b||(c[0]!==this&&this.setSegments(c[0].removeSegments()),q=this),q||(q=new I(u.NO_INSERT),q.addChildren(c),q=q.reduce(),q.copyAttributes(this),this.replaceWith(q)),q},reorient:function(a,c){var d=this._children;return d&&d.length?this.setChildren(i(this.removeChildren(),function(b){return!!(a?b:1&b)},c)):c!==b&&this.setClockwise(c),this},getInteriorPoint:function(){var a=this.getBounds(),b=a.getCenter(!0);if(!this.contains(b)){for(var c=this.getCurves(),d=b.y,e=[],f=[],g=0,h=c.length;g<h;g++){var i=c[g].getValues(),j=i[1],k=i[3],l=i[5],m=i[7];if(d>=o(j,k,l,m)&&d<=p(j,k,l,m))for(var n=E.getMonoCurves(i),q=0,r=n.length;q<r;q++){var s=n[q],t=s[1],u=s[7];if(t!==u&&(d>=t&&d<=u||d>=u&&d<=t)){var v=d===t?s[0]:d===u?s[6]:1===E.solveCubic(s,1,d,f,0,1)?E.getPoint(s,f[0]).x:(s[0]+s[6])/2;e.push(v)}}}e.length>1&&(e.sort(function(a,b){return a-b}),b.x=(e[0]+e[1])/2)}return b}}});var J=e.extend({_class:"PathFlattener",initialize:function(a,b,c,d,e){function f(a,b){var c=E.getValues(a,b,e);i.push(c),g(c,a._index,0,1)}function g(a,c,e,f){if(!(f-e>l)||d&&E.isStraight(a)||E.isFlatEnough(a,b||.25)){var h=a[6]-a[0],i=a[7]-a[1],m=Math.sqrt(h*h+i*i);m>0&&(k+=m,j.push({offset:k,curve:a,index:c,time:f}))}else{var n=E.subdivide(a,.5),o=(e+f)/2;g(n[0],c,e,o),g(n[1],c,o,f)}}for(var h,i=[],j=[],k=0,l=1/(c||32),m=a._segments,n=m[0],o=1,p=m.length;o<p;o++)h=m[o],f(n,h),n=h;a._closed&&f(h,m[0]),this.curves=i,this.parts=j,this.length=k,this.index=0},_get:function(a){for(var b,c=this.parts,d=c.length,e=this.index;b=e,e&&!(c[--e].offset<a););for(;b<d;b++){var f=c[b];if(f.offset>=a){this.index=b;var g=c[b-1],h=g&&g.index===f.index?g.time:0,i=g?g.offset:0;return{index:f.index,time:h+(f.time-h)*(a-i)/(f.offset-i)}}}return{index:c[d-1].index,time:1}},drawPart:function(a,b,c){for(var d=this._get(b),e=this._get(c),f=d.index,g=e.index;f<=g;f++){var h=E.getPart(this.curves[f],f===d.index?d.time:0,f===e.index?e.time:1);f===d.index&&a.moveTo(h[0],h[1]),a.bezierCurveTo.apply(a,h.slice(2))}}},e.each(E._evaluateMethods,function(a){this[a+"At"]=function(b){var c=this._get(b);return E[a](this.curves[c.index],c.time)}},{})),K=e.extend({initialize:function(a){for(var b,c=this.points=[],d=a._segments,e=a._closed,f=0,g=d.length;f<g;f++){var h=d[f].point;b&&b.equals(h)||c.push(b=h.clone())}e&&(c.unshift(c[c.length-1]),c.push(c[1])),this.closed=e},fit:function(a){var b=this.points,c=b.length,d=null;return c>0&&(d=[new C(b[0])],c>1&&(this.fitCubic(d,a,0,c-1,b[1].subtract(b[0]),b[c-2].subtract(b[c-1])),this.closed&&(d.shift(),d.pop()))),d},fitCubic:function(a,b,c,d,e,f){var g=this.points;if(d-c==1){var h=g[c],i=g[d],j=h.getDistance(i)/3;return void this.addCurve(a,[h,h.add(e.normalize(j)),i.add(f.normalize(j)),i])}for(var k,l=this.chordLengthParameterize(c,d),m=Math.max(b,b*b),n=!0,o=0;o<=4;o++){var p=this.generateBezier(c,d,l,e,f),q=this.findMaxError(c,d,p,l);if(q.error<b&&n)return void this.addCurve(a,p);if(k=q.index,q.error>=m)break;n=this.reparameterize(c,d,l,p),m=q.error}var r=g[k-1].subtract(g[k+1]);this.fitCubic(a,b,c,k,e,r),this.fitCubic(a,b,k,d,r.negate(),f)},addCurve:function(a,b){a[a.length-1].setHandleOut(b[1].subtract(b[0])),a.push(new C(b[3],b[2].subtract(b[3])))},generateBezier:function(a,b,c,d,e){for(var f=1e-12,g=Math.abs,h=this.points,i=h[a],j=h[b],k=[[0,0],[0,0]],l=[0,0],m=0,n=b-a+1;m<n;m++){var o=c[m],p=1-o,q=3*o*p,r=p*p*p,s=q*p,t=q*o,u=o*o*o,v=d.normalize(s),w=e.normalize(t),x=h[a+m].subtract(i.multiply(r+s)).subtract(j.multiply(t+u));k[0][0]+=v.dot(v),k[0][1]+=v.dot(w),k[1][0]=k[0][1],k[1][1]+=w.dot(w),l[0]+=v.dot(x),l[1]+=w.dot(x)}var y,z,A=k[0][0]*k[1][1]-k[1][0]*k[0][1];if(g(A)>f){var B=k[0][0]*l[1]-k[1][0]*l[0];y=(l[0]*k[1][1]-l[1]*k[0][1])/A,z=B/A}else{var C=k[0][0]+k[0][1],D=k[1][0]+k[1][1];y=z=g(C)>f?l[0]/C:g(D)>f?l[1]/D:0}var E,F,G=j.getDistance(i),H=f*G;if(y<H||z<H)y=z=G/3;else{var I=j.subtract(i);E=d.normalize(y),F=e.normalize(z),E.dot(I)-F.dot(I)>G*G&&(y=z=G/3,E=F=null)}return[i,i.add(E||d.normalize(y)),j.add(F||e.normalize(z)),j]},reparameterize:function(a,b,c,d){for(var e=a;e<=b;e++)c[e-a]=this.findRoot(d,this.points[e],c[e-a]);for(var e=1,f=c.length;e<f;e++)if(c[e]<=c[e-1])return!1;return!0},findRoot:function(a,b,c){for(var d=[],e=[],f=0;f<=2;f++)d[f]=a[f+1].subtract(a[f]).multiply(3);for(var f=0;f<=1;f++)e[f]=d[f+1].subtract(d[f]).multiply(2);var g=this.evaluate(3,a,c),h=this.evaluate(2,d,c),i=this.evaluate(1,e,c),k=g.subtract(b),l=h.dot(h)+k.dot(i);return j.isZero(l)?c:c-k.dot(h)/l},evaluate:function(a,b,c){for(var d=b.slice(),e=1;e<=a;e++)for(var f=0;f<=a-e;f++)d[f]=d[f].multiply(1-c).add(d[f+1].multiply(c));return d[0]},chordLengthParameterize:function(a,b){for(var c=[0],d=a+1;d<=b;d++)c[d-a]=c[d-a-1]+this.points[d].getDistance(this.points[d-1]);for(var d=1,e=b-a;d<=e;d++)c[d]/=c[e];return c},findMaxError:function(a,b,c,d){for(var e=Math.floor((b-a+1)/2),f=0,g=a+1;g<b;g++){var h=this.evaluate(3,c,d[g-a]),i=h.subtract(this.points[g]),j=i.x*i.x+i.y*i.y;j>=f&&(f=j,e=g)}return{error:f,index:e}}}),L=u.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(a){this._content="",this._lines=[];var c=a&&e.isPlainObject(a)&&a.x===b&&a.y===b;this._initialize(c&&a,!c&&l.read(arguments))},_equals:function(a){return this._content===a._content},copyContent:function(a){this.setContent(a._content)},getContent:function(){return this._content},setContent:function(a){this._content=""+a,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),M=L.extend({_class:"PointText",initialize:function(){L.apply(this,arguments)},getPoint:function(){var a=this._matrix.getTranslation();return new m(a.x,a.y,this,"setPoint")},setPoint:function(){var a=l.read(arguments);this.translate(a.subtract(this._matrix.getTranslation()))},_draw:function(a,b,c){if(this._content){this._setStyles(a,b,c);var d=this._lines,e=this._style,f=e.hasFill(),g=e.hasStroke(),h=e.getLeading(),i=a.shadowColor;a.font=e.getFontStyle(),a.textAlign=e.getJustification();for(var j=0,k=d.length;j<k;j++){a.shadowColor=i;var l=d[j];f&&(a.fillText(l,0,0),a.shadowColor="rgba(0,0,0,0)"),g&&a.strokeText(l,0,0),a.translate(0,h)}}},_getBounds:function(a,b){var c=this._style,d=this._lines,e=d.length,f=c.getJustification(),g=c.getLeading(),h=this.getView().getTextWidth(c.getFontStyle(),d),i=0;"left"!==f&&(i-=h/("center"===f?2:1));var j=new p(i,e?-.75*g:0,h,e*g);return a?a._transformBounds(j,j):j}}),N=e.extend(new function(){function a(a){var d,e=a.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(e){d=[0,0,0];for(var f=0;f<3;f++){var h=e[f+1];d[f]=parseInt(1==h.length?h+h:h,16)/255}}else if(e=a.match(/^rgba?\((.*)\)$/)){d=e[1].split(",");for(var f=0,i=d.length;f<i;f++){var h=+d[f];d[f]=f<3?h/255:h}}else if(c){var j=g[a];if(!j){b||(b=aa.getContext(1,1),b.globalCompositeOperation="copy"),b.fillStyle="rgba(0,0,0,0)",b.fillStyle=a,b.fillRect(0,0,1,1);var k=b.getImageData(0,0,1,1).data;j=g[a]=[k[0]/255,k[1]/255,k[2]/255]}d=j.slice()}else d=[0,0,0];return d}var b,d={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},f={},g={},h=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],j={"rgb-hsb":function(a,b,c){var d=Math.max(a,b,c),e=Math.min(a,b,c),f=d-e;return[0===f?0:60*(d==a?(b-c)/f+(b<c?6:0):d==b?(c-a)/f+2:(a-b)/f+4),0===d?0:f/d,d]},"hsb-rgb":function(a,b,c){a=(a/60%6+6)%6;var d=Math.floor(a),e=a-d,d=h[d],f=[c,c*(1-b),c*(1-b*e),c*(1-b*(1-e))];return[f[d[0]],f[d[1]],f[d[2]]]},"rgb-hsl":function(a,b,c){var d=Math.max(a,b,c),e=Math.min(a,b,c),f=d-e,g=0===f,h=g?0:60*(d==a?(b-c)/f+(b<c?6:0):d==b?(c-a)/f+2:(a-b)/f+4),i=(d+e)/2;return[h,g?0:i<.5?f/(d+e):f/(2-d-e),i]},"hsl-rgb":function(a,b,c){if(a=(a/360%1+1)%1,0===b)return[c,c,c];for(var d=[a+1/3,a,a-1/3],e=c<.5?c*(1+b):c+b-c*b,f=2*c-e,g=[],h=0;h<3;h++){var i=d[h];i<0&&(i+=1),i>1&&(i-=1),g[h]=6*i<1?f+6*(e-f)*i:2*i<1?e:3*i<2?f+(e-f)*(2/3-i)*6:f}return g},"rgb-gray":function(a,b,c){return[.2989*a+.587*b+.114*c]},"gray-rgb":function(a){return[a,a,a]},"gray-hsb":function(a){return[0,0,a]},"gray-hsl":function(a){return[0,0,a]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return e.each(d,function(a,b){f[b]=[],e.each(a,function(a,c){var g=e.capitalize(a),h=/^(hue|saturation)$/.test(a),i=f[b][c]="gradient"===a?function(a){var b=this._components[0];return a=O.read(Array.isArray(a)?a:arguments,0,{readNull:!0}),b!==a&&(b&&b._removeOwner(this),a&&a._addOwner(this)),a}:"gradient"===b?function(){return l.read(arguments,0,{readNull:"highlight"===a,clone:!0})}:function(a){return null==a||isNaN(a)?0:a};this["get"+g]=function(){return this._type===b||h&&/^hs[bl]$/.test(this._type)?this._components[c]:this._convert(b)[c]},this["set"+g]=function(a){this._type===b||h&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(b),this._properties=d[b],this._type=b),this._components[c]=i.call(this,a),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function b(c){var g,h,i,j,k=arguments,l=this.__read,m=0;Array.isArray(c)&&(k=c,c=k[0]);var n=null!=c&&typeof c;if("string"===n&&c in d&&(g=c,c=k[1],Array.isArray(c)?(h=c,i=k[2]):(l&&(m=1),k=e.slice(k,1),n=typeof c)),!h){if(j="number"===n?k:"object"===n&&null!=c.length?c:null){g||(g=j.length>=3?"rgb":"gray");var o=d[g].length;i=j[o],l&&(m+=j===arguments?o+(null!=i?1:0):1),j.length>o&&(j=e.slice(j,0,o))}else if("string"===n)g="rgb",h=a(c),4===h.length&&(i=h[3],h.length--);else if("object"===n)if(c.constructor===b){if(g=c._type,h=c._components.slice(),i=c._alpha,"gradient"===g)for(var p=1,q=h.length;p<q;p++){var r=h[p];r&&(h[p]=r.clone())}}else if(c.constructor===O)g="gradient",j=k;else{g="hue"in c?"lightness"in c?"hsl":"hsb":"gradient"in c||"stops"in c||"radial"in c?"gradient":"gray"in c?"gray":"rgb";var s=d[g],t=f[g];this._components=h=[];for(var p=0,q=s.length;p<q;p++){var u=c[s[p]];null==u&&!p&&"gradient"===g&&"stops"in c&&(u={stops:c.stops,radial:c.radial}),null!=(u=t[p].call(this,u))&&(h[p]=u)}i=c.alpha}l&&g&&(m=1)}if(this._type=g||"rgb",!h){this._components=h=[];for(var t=f[this._type],p=0,q=t.length;p<q;p++){var u=t[p].call(this,j&&j[p]);null!=u&&(h[p]=u)}}return this._components=h,this._properties=d[this._type],this._alpha=i,l&&(this.__read=m),this},set:"#initialize",_serialize:function(a,b){var c=this.getComponents();return e.serialize(/^(gray|rgb)$/.test(this._type)?c:[this._type].concat(c),a,!0,b)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(a){var b;return this._type===a?this._components.slice():(b=j[this._type+"-"+a])?b.apply(this,this._components):j["rgb-"+a].apply(this,j[this._type+"-rgb"].apply(this,this._components))},convert:function(a){return new N(a,this._convert(a),this._alpha)},getType:function(){return this._type},setType:function(a){this._components=this._convert(a),this._properties=d[a],this._type=a},getComponents:function(){var a=this._components.slice();return null!=this._alpha&&a.push(this._alpha),a},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(a){this._alpha=null==a?null:Math.min(Math.max(a,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(a){var b=e.isPlainValue(a,!0)?N.read(arguments):a;return b===this||b&&this._class===b._class&&this._type===b._type&&this.getAlpha()===b.getAlpha()&&e.equals(this._components,b._components)||!1},toString:function(){for(var a=this._properties,b=[],c="gradient"===this._type,d=i.instance,e=0,f=a.length;e<f;e++){var g=this._components[e];null!=g&&b.push(a[e]+": "+(c?g:d.number(g)))}return null!=this._alpha&&b.push("alpha: "+d.number(this._alpha)),"{ "+b.join(", ")+" }"},toCSS:function(a){function b(a){return Math.round(255*(a<0?0:a>1?1:a))}var c=this._convert("rgb"),d=a||null==this._alpha?1:this._alpha;return c=[b(c[0]),b(c[1]),b(c[2])],d<1&&c.push(d<0?0:d),a?"#"+((1<<24)+(c[0]<<16)+(c[1]<<8)+c[2]).toString(16).slice(1):(4==c.length?"rgba(":"rgb(")+c.join(",")+")"},toCanvasStyle:function(a){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var b,c=this._components,d=c[0],e=d._stops,f=c[1],g=c[2];if(d._radial){var h=g.getDistance(f),i=c[3];if(i){var j=i.subtract(f);j.getLength()>h&&(i=f.add(j.normalize(h-.1)))}var k=i||f;b=a.createRadialGradient(k.x,k.y,0,f.x,f.y,h)}else b=a.createLinearGradient(f.x,f.y,g.x,g.y);for(var l=0,m=e.length;l<m;l++){var n=e[l],o=n._offset;b.addColorStop(null==o?l/(m-1):o,n._color.toCanvasStyle())}return this._canvasStyle=b},transform:function(a){if("gradient"===this._type){for(var b=this._components,c=1,d=b.length;c<d;c++){var e=b[c];a._transformPoint(e,e,!0)}this._changed()}},statics:{_types:d,random:function(){var a=Math.random;return new N(a(),a(),a())}}})},new function(){var a={add:function(a,b){return a+b},subtract:function(a,b){return a-b},multiply:function(a,b){return a*b},divide:function(a,b){return a/b}};return e.each(a,function(a,b){this[b]=function(b){b=N.read(arguments);for(var c=this._type,d=this._components,e=b._convert(c),f=0,g=d.length;f<g;f++)e[f]=a(d[f],e[f]);return new N(c,e,null!=this._alpha?a(this._alpha,b.getAlpha()):null)}},{})}),O=e.extend({_class:"Gradient",initialize:function(a,b){this._id=k.get(),a&&e.isPlainObject(a)&&(this.set(a),a=b=null),null==this._stops&&this.setStops(a||["white","black"]),null==this._radial&&this.setRadial("string"==typeof b&&"radial"===b||b||!1)},_serialize:function(a,b){return b.add(this,function(){return e.serialize([this._stops,this._radial],a,!0,b)})},_changed:function(){for(var a=0,b=this._owners&&this._owners.length;a<b;a++)this._owners[a]._changed()},_addOwner:function(a){this._owners||(this._owners=[]),this._owners.push(a)},_removeOwner:function(a){var c=this._owners?this._owners.indexOf(a):-1;-1!=c&&(this._owners.splice(c,1),this._owners.length||(this._owners=b))},clone:function(){for(var a=[],b=0,c=this._stops.length;b<c;b++)a[b]=this._stops[b].clone();return new O(a,this._radial)},getStops:function(){return this._stops},setStops:function(a){if(a.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var c=this._stops;if(c)for(var d=0,e=c.length;d<e;d++)c[d]._owner=b;c=this._stops=P.readList(a,0,{clone:!0});for(var d=0,e=c.length;d<e;d++)c[d]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(a){this._radial=a,this._changed()},equals:function(a){if(a===this)return!0;if(a&&this._class===a._class){var b=this._stops,c=a._stops,d=b.length;if(d===c.length){for(var e=0;e<d;e++)if(!b[e].equals(c[e]))return!1;return!0}}return!1}}),P=e.extend({_class:"GradientStop",initialize:function(a,c){var d=a,e=c;"object"==typeof a&&c===b&&(Array.isArray(a)&&"number"!=typeof a[0]?(d=a[0],e=a[1]):("color"in a||"offset"in a||"rampPoint"in a)&&(d=a.color,e=a.offset||a.rampPoint||0)),this.setColor(d),this.setOffset(e)},clone:function(){return new P(this._color.clone(),this._offset)},_serialize:function(a,b){var c=this._color,d=this._offset;return e.serialize(null==d?[c]:[c,d],a,!0,b)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(a){this._offset=a,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var a=N.read(arguments,0,{clone:!0});a&&(a._owner=this),this._color=a,this._changed()},equals:function(a){return a===this||a&&this._class===a._class&&this._color.equals(a._color)&&this._offset==a._offset||!1}}),Q=e.extend(new function(){var a={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new l,selectedColor:null},c=e.set({},a,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),d=e.set({},c,{fillColor:new N}),f={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},g={beans:!0},h={_class:"Style",beans:!0,initialize:function(b,e,f){this._values={},this._owner=e,this._project=e&&e._project||f||paper.project,this._defaults=!e||e instanceof v?c:e instanceof L?d:a,b&&this.set(b)}};return e.each(c,function(a,c){var d=/Color$/.test(c),i="shadowOffset"===c,j=e.capitalize(c),k=f[c],m="set"+j,n="get"+j;h[m]=function(a){var e=this._owner,f=e&&e._children;if(f&&f.length>0&&!(e instanceof I))for(var g=0,h=f.length;g<h;g++)f[g]._style[m](a);else if(c in this._defaults){var i=this._values[c];i!==a&&(d&&(i&&i._owner!==b&&(i._owner=b),a&&a.constructor===N&&(a._owner&&(a=a.clone()),a._owner=e)),this._values[c]=a,e&&e._changed(k||65))}},h[n]=function(a){var f,g=this._owner,h=g&&g._children;if(c in this._defaults&&(!h||!h.length||a||g instanceof I)){var f=this._values[c];if(f===b)(f=this._defaults[c])&&f.clone&&(f=f.clone());else{var j=d?N:i?l:null;!j||f&&f.constructor===j||(this._values[c]=f=j.read([f],0,{readNull:!0,clone:!0}),f&&d&&(f._owner=g))}}else if(h)for(var k=0,m=h.length;k<m;k++){var o=h[k]._style[n]();if(k){if(!e.equals(f,o))return b}else f=o}return f},g[n]=function(a){return this._style[n](a)},g[m]=function(a){this._style[m](a)}}),e.each({Font:"FontFamily",WindingRule:"FillRule"},function(a,b){var c="get"+b,d="set"+b;h[c]=g[c]="#get"+a,h[d]=g[d]="#set"+a}),u.inject(g),h},{set:function(a){this._values={};var b=a instanceof Q,c=b?a._values:a;if(c)for(var d in c)if(d in this._defaults){var e=c[d];this[d]=e&&b&&e.clone?e.clone():e}},equals:function(a){function c(a,c,d){var f=a._values,g=c._values,h=c._defaults;for(var i in f){var j=f[i],k=g[i];if(!(d&&i in g||e.equals(j,k===b?h[i]:k)))return!1}return!0}
return a===this||a&&this._class===a._class&&c(this,a)&&c(a,this,!0)||!1},hasFill:function(){var a=this.getFillColor();return!!a&&a.alpha>0},hasStroke:function(){var a=this.getStrokeColor();return!!a&&a.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var a=this.getShadowColor();return!!a&&a.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var a=this.getFontSize();return this.getFontWeight()+" "+a+(/[a-z]/i.test(a+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function a(){var b=a.base.call(this),c=this.getFontSize();return/pt|em|%|px/.test(c)&&(c=this.getView().getPixelSize(c)),null!=b?b:1.2*c}}),R=new function(){function a(a,b,c,d){for(var e=["","webkit","moz","Moz","ms","o"],f=b[0].toUpperCase()+b.substring(1),g=0;g<6;g++){var h=e[g],i=h?h+f:b;if(i in a){if(!c)return a[i];a[i]=d;break}}}return{getStyles:function(a){var b=a&&9!==a.nodeType?a.ownerDocument:a,c=b&&b.defaultView;return c&&c.getComputedStyle(a,"")},getBounds:function(a,b){var c,d=a.ownerDocument,e=d.body,f=d.documentElement;try{c=a.getBoundingClientRect()}catch(a){c={left:0,top:0,width:0,height:0}}var g=c.left-(f.clientLeft||e.clientLeft||0),h=c.top-(f.clientTop||e.clientTop||0);if(!b){var i=d.defaultView;g+=i.pageXOffset||f.scrollLeft||e.scrollLeft,h+=i.pageYOffset||f.scrollTop||e.scrollTop}return new p(g,h,c.width,c.height)},getViewportBounds:function(a){var b=a.ownerDocument,c=b.defaultView,d=b.documentElement;return new p(0,0,c.innerWidth||d.clientWidth,c.innerHeight||d.clientHeight)},getOffset:function(a,b){return R.getBounds(a,b).getPoint()},getSize:function(a){return R.getBounds(a,!0).getSize()},isInvisible:function(a){return R.getSize(a).equals(new n(0,0))},isInView:function(a){return!R.isInvisible(a)&&R.getViewportBounds(a).intersects(R.getBounds(a,!0))},isInserted:function(a){return d.body.contains(a)},getPrefixed:function(b,c){return b&&a(b,c)},setPrefixed:function(b,c,d){if("object"==typeof c)for(var e in c)a(b,e,!0,c[e]);else a(b,c,!0,d)}}},S={add:function(a,b){if(a)for(var c in b)for(var d=b[c],e=c.split(/[\s,]+/g),f=0,g=e.length;f<g;f++)a.addEventListener(e[f],d,!1)},remove:function(a,b){if(a)for(var c in b)for(var d=b[c],e=c.split(/[\s,]+/g),f=0,g=e.length;f<g;f++)a.removeEventListener(e[f],d,!1)},getPoint:function(a){var b=a.targetTouches?a.targetTouches.length?a.targetTouches[0]:a.changedTouches[0]:a;return new l(b.pageX||b.clientX+d.documentElement.scrollLeft,b.pageY||b.clientY+d.documentElement.scrollTop)},getTarget:function(a){return a.target||a.srcElement},getRelatedTarget:function(a){return a.relatedTarget||a.toElement},getOffset:function(a,b){return S.getPoint(a).subtract(R.getOffset(b||S.getTarget(a)))}};S.requestAnimationFrame=new function(){function a(){var b=f;f=[];for(var c=0,g=b.length;c<g;c++)b[c]();(e=d&&f.length)&&d(a)}var b,d=R.getPrefixed(c,"requestAnimationFrame"),e=!1,f=[];return function(c){f.push(c),d?e||(d(a),e=!0):b||(b=setInterval(a,1e3/60))}};var T=e.extend(f,{_class:"View",initialize:function a(b,e){function f(a){return e[a]||parseInt(e.getAttribute(a),10)}function h(){var a=R.getSize(e);return a.isNaN()||a.isZero()?new n(f("width"),f("height")):a}var i;if(c&&e){this._id=e.getAttribute("id"),null==this._id&&e.setAttribute("id",this._id="view-"+a._id++),S.add(e,this._viewEvents);var j="none";if(R.setPrefixed(e.style,{userDrag:j,userSelect:j,touchCallout:j,contentZooming:j,tapHighlightColor:"rgba(0,0,0,0)"}),g.hasAttribute(e,"resize")){var k=this;S.add(c,this._windowEvents={resize:function(){k.setViewSize(h())}})}if(i=h(),g.hasAttribute(e,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var l=this._stats.domElement,m=l.style,o=R.getOffset(e);m.position="absolute",m.left=o.x+"px",m.top=o.y+"px",d.body.appendChild(l)}}else i=new n(e),e=null;this._project=b,this._scope=b._scope,this._element=e,this._pixelRatio||(this._pixelRatio=c&&c.devicePixelRatio||1),this._setElementSize(i.width,i.height),this._viewSize=i,a._views.push(this),a._viewsById[this._id]=this,(this._matrix=new r)._owner=this,a._focused||(a._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!paper.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;T._focused===this&&(T._focused=null),T._views.splice(T._views.indexOf(this),1),delete T._viewsById[this._id];var a=this._project;return a._view===this&&(a._view=null),S.remove(this._element,this._viewEvents),S.remove(c,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:e.each(u._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(a){this[a]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(a){this._autoUpdate=a,a&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var a=this;S.requestAnimationFrame(function(){if(a._requested=!1,a._animate){a.requestUpdate();var b=a._element;R.getPrefixed(d,"hidden")&&"true"!==g.getAttribute(b,"keepalive")||!R.isInView(b)||a._handleFrame()}a._autoUpdate&&a.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){paper=this._scope;var a=Date.now()/1e3,b=this._last?a-this._last:0;this._last=a,this.emit("frame",new e({delta:b,time:this._time+=b,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(a,b){var c=this._frameItems;b?(c[a._id]={item:a,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete c[a._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(a){for(var b in this._frameItems){var c=this._frameItems[b];c.item.emit("frame",new e(a,{time:c.time+=a.delta,count:c.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=b},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var a=this._viewSize;return new o(a.width,a.height,this,"setViewSize")},setViewSize:function(){var a=n.read(arguments),b=a.subtract(this._viewSize);b.isZero()||(this._setElementSize(a.width,a.height),this._viewSize.set(a),this._changed(),this.emit("resize",{size:a,delta:b}),this._autoUpdate&&this.update())},_setElementSize:function(a,b){var c=this._element;c&&(c.width!==a&&(c.width=a),c.height!==b&&(c.height=b))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new p(new l,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return R.isInView(this._element)},isInserted:function(){return R.isInserted(this._element)},getPixelSize:function(a){var b,c=this._element;if(c){var e=c.parentNode,f=d.createElement("div");f.style.fontSize=a,e.appendChild(f),b=parseFloat(R.getStyles(f).fontSize),e.removeChild(f)}else b=parseFloat(b);return b},getTextWidth:function(a,b){return 0}},e.each(["rotate","scale","shear","skew"],function(a){var b="rotate"===a;this[a]=function(){var c=(b?e:l).read(arguments),d=l.read(arguments,0,{readNull:!0});return this.transform((new r)[a](c,d||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var a=new r;return this.transform(a.translate.apply(a,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var a=l.read(arguments);this.translate(this.getCenter().subtract(a))},getZoom:function(){var a=this._decompose(),b=a&&a.scaling;return b?(b.x+b.y)/2:0},setZoom:function(a){this.transform((new r).scale(a/this.getZoom(),this.getCenter()))},getRotation:function(){var a=this._decompose();return a&&a.rotation},setRotation:function(a){var b=this.getRotation();null!=b&&null!=a&&this.rotate(a-b)},getScaling:function(){var a=this._decompose(),c=a&&a.scaling;return c?new m(c.x,c.y,this,"setScaling"):b},setScaling:function(){var a=this.getScaling(),b=l.read(arguments,0,{clone:!0,readNull:!0});a&&b&&this.scale(b.x/a.x,b.y/a.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.initialize.apply(a,arguments)},transform:function(a){this._matrix.append(a)},scrollBy:function(){this.translate(l.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(l.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(l.read(arguments))},getEventPoint:function(a){return this.viewToProject(S.getOffset(a,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(a,b){return d&&"string"==typeof b&&(b=d.getElementById(b)),new(c?U:T)(a,b)}}},new function(){function a(a){var b=S.getTarget(a);return b.getAttribute&&T._viewsById[b.getAttribute("id")]}function b(){var a=T._focused;if(!a||!a.isVisible())for(var b=0,c=T._views.length;b<c;b++)if((a=T._views[b]).isVisible()){T._focused=i=a;break}}function e(a,b,c){a._handleMouseEvent("mousemove",b,c)}function f(a,b,c,d,e,f,g){function h(a,c){if(a.responds(c)){if(i||(i=new Y(c,d,e,b||a,f?e.subtract(f):null)),a.emit(c,i)&&(A=!0,i.prevented&&(B=!0),i.stopped))return j=!0}else{var g=C[c];if(g)return h(a,g)}}for(var i,j=!1;a&&a!==g&&!h(a,c);)a=a._parent;return j}function g(a,b,c,d,e,g){return a._project.removeOn(c),B=A=!1,w&&f(w,null,c,d,e,g)||b&&b!==w&&!b.isDescendant(w)&&f(b,null,C[c]||c,d,e,g,w)||f(a,w||b||a,c,d,e,g)}if(c){var h,i,j,k,l,m=!1,n=!1,o=c.navigator;o.pointerEnabled||o.msPointerEnabled?(j="pointerdown MSPointerDown",k="pointermove MSPointerMove",l="pointerup pointercancel MSPointerUp MSPointerCancel"):(j="touchstart",k="touchmove",l="touchend touchcancel","ontouchstart"in c&&o.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(j+=" mousedown",k+=" mousemove",l+=" mouseup"));var p={},q={mouseout:function(a){var b=T._focused,c=S.getRelatedTarget(a);if(b&&(!c||"HTML"===c.nodeName)){var d=S.getOffset(a,b._element),f=d.x,g=Math.abs,h=g(f),i=1<<25,j=h-i;d.x=g(j)<h?j*(f<0?-1:1):f,e(b,a,b.viewToProject(d))}},scroll:b};p[j]=function(b){var c=T._focused=a(b);m||(m=!0,c._handleMouseEvent("mousedown",b))},q[k]=function(c){var d=T._focused;if(!n){var f=a(c);f?d!==f&&(d&&e(d,c),h||(h=d),d=T._focused=i=f):i&&i===d&&(h&&!h.isInserted()&&(h=null),d=T._focused=h,h=null,b())}d&&e(d,c)},q[j]=function(){n=!0},q[l]=function(a){var b=T._focused;b&&m&&b._handleMouseEvent("mouseup",a),n=m=!1},S.add(d,q),S.add(c,{load:b});var r,s,t,u,v,w,x,y,z,A=!1,B=!1,C={doubleclick:"click",mousedrag:"mousemove"},D=!1,E={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:p,_handleMouseEvent:function(a,b,c){function d(a){return e.virtual[a]||k.responds(a)||j&&j.responds(a)}var e=this._itemEvents,h=e.native[a],i="mousemove"===a,j=this._scope.tool,k=this;i&&m&&d("mousedrag")&&(a="mousedrag"),c||(c=this.getEventPoint(b));var l=this.getBounds().contains(c),n=h&&l&&k._project.hitTest(c,{tolerance:0,fill:!0,stroke:!0}),o=n&&n.item||null,p=!1,q={};q[a.substr(5)]=!0,h&&o!==v&&(v&&f(v,null,"mouseleave",b,c),o&&f(o,null,"mouseenter",b,c),v=o),D^l&&(f(this,null,l?"mouseenter":"mouseleave",b,c),r=l?this:null,p=!0),!l&&!q.drag||c.equals(t)||(g(this,o,i?a:"mousemove",b,c,t),p=!0),D=l,(q.down&&l||q.up&&s)&&(g(this,o,a,b,c,s),q.down?(z=o===x&&Date.now()-y<300,u=x=o,w=!B&&o,s=c):q.up&&(B||o!==u||(y=Date.now(),g(this,o,z?"doubleclick":"click",b,c,s),z=!1),u=w=null),D=!1,p=!0),t=c,p&&j&&(A=j._handleMouseEvent(a,b,c,q)||A),(A&&!q.move||q.down&&d("mouseup"))&&b.preventDefault()},_handleKeyEvent:function(a,b,c,d){function e(e){e.responds(a)&&(paper=g,e.emit(a,f=f||new W(a,b,c,d)))}var f,g=this._scope,h=g.tool;this.isVisible()&&(e(this),h&&h.responds(a)&&e(h))},_countItemEvent:function(a,b){var c=this._itemEvents,d=c.native,e=c.virtual;for(var f in E)d[f]=(d[f]||0)+(E[f][a]||0)*b;e[a]=(e[a]||0)+b},statics:{updateFocus:b}}}}),U=T.extend({_class:"CanvasView",initialize:function(a,b){if(!(b instanceof c.HTMLCanvasElement)){var d=n.read(arguments,1);if(d.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+e.slice(arguments,1));b=aa.getCanvas(d)}var f=this._context=b.getContext("2d");if(f.save(),this._pixelRatio=1,!/^off|false$/.test(g.getAttribute(b,"hidpi"))){var h=c.devicePixelRatio||1,i=R.getPrefixed(f,"backingStorePixelRatio")||1;this._pixelRatio=h/i}T.call(this,a,b),this._needsUpdate=!0},remove:function a(){return this._context.restore(),a.base.call(this)},_setElementSize:function a(b,c){var d=this._pixelRatio;if(a.base.call(this,b*d,c*d),1!==d){var e=this._element,f=this._context;if(!g.hasAttribute(e,"resize")){var h=e.style;h.width=b+"px",h.height=c+"px"}f.restore(),f.save(),f.scale(d,d)}},getPixelSize:function a(b){var c,d=paper.agent;if(d&&d.firefox)c=a.base.call(this,b);else{var e=this._context,f=e.font;e.font=b+" serif",c=parseFloat(e.font),e.font=f}return c},getTextWidth:function(a,b){var c=this._context,d=c.font,e=0;c.font=a;for(var f=0,g=b.length;f<g;f++)e=Math.max(e,c.measureText(b[f]).width);return c.font=d,e},update:function(){if(!this._needsUpdate)return!1;var a=this._project,b=this._context,c=this._viewSize;return b.clearRect(0,0,c.width+1,c.height+1),a&&a.draw(b,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),V=e.extend({_class:"Event",initialize:function(a){this.event=a,this.type=a&&a.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return X.modifiers}}),W=V.extend({_class:"KeyEvent",initialize:function(a,b,c,d){this.type=a,this.event=b,this.key=c,this.character=d},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),X=new function(){function a(a){var b=a.key||a.keyIdentifier;return b=/^U\+/.test(b)?String.fromCharCode(parseInt(b.substr(2),16)):/^Arrow[A-Z]/.test(b)?b.substr(5):"Unidentified"===b?String.fromCharCode(a.keyCode):b,h[b]||(b.length>1?e.hyphenate(b):b.toLowerCase())}function b(a,c,d,g){var h,i=T._focused;if(j[c]=a,a?k[c]=d:delete k[c],c.length>1&&(h=e.camelize(c))in l){l[h]=a;var m=paper&&paper.agent;if("meta"===h&&m&&m.mac)if(a)f={};else{for(var n in f)n in k&&b(!1,n,f[n],g);f=null}}else a&&f&&(f[c]=d);i&&i._handleKeyEvent(a?"keydown":"keyup",g,c,d)}var f,g,h={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"\t",space:" ",enter:"\r"},j={},k={},l=new e({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var a=paper&&paper.agent;return a&&a.mac?this.meta:this.control}}});return S.add(d,{keydown:function(c){var d=a(c),e=paper&&paper.agent;d.length>1||e&&e.chrome&&(c.altKey||e.mac&&c.metaKey||!e.mac&&c.ctrlKey)?b(!0,d,i[d]||(d.length>1?"":d),c):g=d},keypress:function(c){if(g){var d=a(c),e=c.charCode,f=e>=32?String.fromCharCode(e):d.length>1?"":d;d!==g&&(d=f.toLowerCase()),b(!0,d,f,c),g=null}},keyup:function(c){var d=a(c);d in k&&b(!1,d,k[d],c)}}),S.add(c,{blur:function(a){for(var c in k)b(!1,c,k[c],a)}}),{modifiers:l,isDown:function(a){return!!j[a]}}},Y=V.extend({_class:"MouseEvent",initialize:function(a,b,c,d,e){this.type=a,this.event=b,this.point=c,this.target=d,this.delta=e},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Z=V.extend({_class:"ToolEvent",_item:null,initialize:function(a,b,c){this.tool=a,this.type=b,this.event=c},_choosePoint:function(a,b){return a||(b?b.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(a){this._point=a},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(a){this._lastPoint=a},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(a){this._downPoint=a},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(a){this._middlePoint=a},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(a){this._delta=a},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(a){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=a},getItem:function(){if(!this._item){var a=this.tool._scope.project.hitTest(this.getPoint());if(a){for(var b=a.item,c=b._parent;/^(Group|CompoundPath)$/.test(c._class);)b=c,c=c._parent;this._item=b}}return this._item},setItem:function(a){this._item=a},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),$=h.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(a){h.call(this),this._moveCount=-1,this._downCount=-1,this.set(a)},getMinDistance:function(){return this._minDistance},setMinDistance:function(a){this._minDistance=a,null!=a&&null!=this._maxDistance&&a>this._maxDistance&&(this._maxDistance=a)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(a){this._maxDistance=a,null!=this._minDistance&&null!=a&&a<this._minDistance&&(this._minDistance=a)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(a){this._minDistance=this._maxDistance=a},_handleMouseEvent:function(a,b,c,d){function e(a,b){var e=c,f=g?l._point:l._downPoint||e;if(g){if(l._moveCount&&e.equals(f))return!1;if(f&&(null!=a||null!=b)){var h=e.subtract(f),i=h.getLength();if(i<(a||0))return!1;b&&(e=f.add(h.normalize(Math.min(i,b))))}l._moveCount++}return l._point=e,l._lastPoint=f||e,d.down&&(l._moveCount=-1,l._downPoint=e,l._downCount++),!0}function f(){h&&(k=l.emit(a,new Z(l,a,b))||k)}paper=this._scope,d.drag&&!this.responds(a)&&(a="mousemove");var g=d.move||d.drag,h=this.responds(a),i=this.minDistance,j=this.maxDistance,k=!1,l=this;if(d.down)e(),f();else if(d.up)e(null,j),f();else if(h)for(;e(i,j);)f();return k}}),_={request:function(b){var c=new a.XMLHttpRequest;return c.open((b.method||"get").toUpperCase(),b.url,e.pick(b.async,!0)),b.mimeType&&c.overrideMimeType(b.mimeType),c.onload=function(){var a=c.status;0===a||200===a?b.onLoad&&b.onLoad.call(c,c.responseText):c.onerror()},c.onerror=function(){var a=c.status,d='Could not load "'+b.url+'" (Status: '+a+")";if(!b.onError)throw new Error(d);b.onError(d,a)},c.send(null)}},aa={canvases:[],getCanvas:function(a,b){if(!c)return null;var e,f=!0;"object"==typeof a&&(b=a.height,a=a.width),this.canvases.length?e=this.canvases.pop():(e=d.createElement("canvas"),f=!1);var g=e.getContext("2d");if(!g)throw new Error("Canvas "+e+" is unable to provide a 2D context.");return e.width===a&&e.height===b?f&&g.clearRect(0,0,a+1,b+1):(e.width=a,e.height=b),g.save(),e},getContext:function(a,b){var c=this.getCanvas(a,b);return c?c.getContext("2d"):null},release:function(a){var b=a&&a.canvas?a.canvas:a;b&&b.getContext&&(b.getContext("2d").restore(),this.canvases.push(b))}},ba=new function(){function a(a,b,c){return.2989*a+.587*b+.114*c}function b(b,c,d,e){var f=e-a(b,c,d);n=b+f,o=c+f,p=d+f;var e=a(n,o,p),g=q(n,o,p),h=r(n,o,p);if(g<0){var i=e-g;n=e+(n-e)*e/i,o=e+(o-e)*e/i,p=e+(p-e)*e/i}if(h>255){var j=255-e,k=h-e;n=e+(n-e)*j/k,o=e+(o-e)*j/k,p=e+(p-e)*j/k}}function c(a,b,c){return r(a,b,c)-q(a,b,c)}function d(a,b,c,d){var e,f=[a,b,c],g=r(a,b,c),h=q(a,b,c);h=h===a?0:h===b?1:2,g=g===a?0:g===b?1:2,e=0===q(h,g)?1===r(h,g)?2:1:0,f[g]>f[h]?(f[e]=(f[e]-f[h])*d/(f[g]-f[h]),f[g]=d):f[e]=f[g]=0,f[h]=0,n=f[0],o=f[1],p=f[2]}var f,g,h,i,j,k,l,m,n,o,p,q=Math.min,r=Math.max,s=Math.abs,t={multiply:function(){n=j*f/255,o=k*g/255,p=l*h/255},screen:function(){n=j+f-j*f/255,o=k+g-k*g/255,p=l+h-l*h/255},overlay:function(){n=j<128?2*j*f/255:255-2*(255-j)*(255-f)/255,o=k<128?2*k*g/255:255-2*(255-k)*(255-g)/255,p=l<128?2*l*h/255:255-2*(255-l)*(255-h)/255},"soft-light":function(){var a=f*j/255;n=a+j*(255-(255-j)*(255-f)/255-a)/255,a=g*k/255,o=a+k*(255-(255-k)*(255-g)/255-a)/255,a=h*l/255,p=a+l*(255-(255-l)*(255-h)/255-a)/255},"hard-light":function(){n=f<128?2*f*j/255:255-2*(255-f)*(255-j)/255,o=g<128?2*g*k/255:255-2*(255-g)*(255-k)/255,p=h<128?2*h*l/255:255-2*(255-h)*(255-l)/255},"color-dodge":function(){n=0===j?0:255===f?255:q(255,255*j/(255-f)),o=0===k?0:255===g?255:q(255,255*k/(255-g)),p=0===l?0:255===h?255:q(255,255*l/(255-h))},"color-burn":function(){n=255===j?255:0===f?0:r(0,255-255*(255-j)/f),o=255===k?255:0===g?0:r(0,255-255*(255-k)/g),p=255===l?255:0===h?0:r(0,255-255*(255-l)/h)},darken:function(){n=j<f?j:f,o=k<g?k:g,p=l<h?l:h},lighten:function(){n=j>f?j:f,o=k>g?k:g,p=l>h?l:h},difference:function(){n=j-f,n<0&&(n=-n),o=k-g,o<0&&(o=-o),(p=l-h)<0&&(p=-p)},exclusion:function(){n=j+f*(255-j-j)/255,o=k+g*(255-k-k)/255,p=l+h*(255-l-l)/255},hue:function(){d(f,g,h,c(j,k,l)),b(n,o,p,a(j,k,l))},saturation:function(){d(j,k,l,c(f,g,h)),b(n,o,p,a(j,k,l))},luminosity:function(){b(j,k,l,a(f,g,h))},color:function(){b(f,g,h,a(j,k,l))},add:function(){n=q(j+f,255),o=q(k+g,255),p=q(l+h,255)},subtract:function(){n=r(j-f,0),o=r(k-g,0),p=r(l-h,0)},average:function(){n=(j+f)/2,o=(k+g)/2,p=(l+h)/2},negation:function(){n=255-s(255-f-j),o=255-s(255-g-k),p=255-s(255-h-l)}},u=this.nativeModes=e.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(a){this[a]=!0},{}),v=aa.getContext(1,1);v&&(e.each(t,function(a,b){var c="darken"===b,d=!1;v.save();try{v.fillStyle=c?"#300":"#a00",v.fillRect(0,0,1,1),v.globalCompositeOperation=b,v.globalCompositeOperation===b&&(v.fillStyle=c?"#a00":"#300",v.fillRect(0,0,1,1),d=v.getImageData(0,0,1,1).data[0]!==c?170:51)}catch(a){}v.restore(),u[b]=d}),aa.release(v)),this.process=function(a,b,c,d,e){var q=b.canvas,r="normal"===a;if(r||u[a])c.save(),c.setTransform(1,0,0,1,0,0),c.globalAlpha=d,r||(c.globalCompositeOperation=a),c.drawImage(q,e.x,e.y),c.restore();else{var s=t[a];if(!s)return;for(var v=c.getImageData(e.x,e.y,q.width,q.height),w=v.data,x=b.getImageData(0,0,q.width,q.height).data,y=0,z=w.length;y<z;y+=4){f=x[y],j=w[y],g=x[y+1],k=w[y+1],h=x[y+2],l=w[y+2],i=x[y+3],m=w[y+3],s();var A=i*d/255,B=1-A;w[y]=A*n+B*j,w[y+1]=A*o+B*k,w[y+2]=A*p+B*l,w[y+3]=i*d+B*m}c.putImageData(v,e.x,e.y)}}},ca=new function(){function a(a,b,f){return c(d.createElementNS(e,a),b,f)}function b(a,b){var c=h[b],d=c?a.getAttributeNS(c,b):a.getAttribute(b);return"null"===d?null:d}function c(a,b,c){for(var d in b){var e=b[d],f=h[d];"number"==typeof e&&c&&(e=c.number(e)),f?a.setAttributeNS(f,d,e):a.setAttribute(d,e)}return a}var e="http://www.w3.org/2000/svg",f="http://www.w3.org/2000/xmlns",g="http://www.w3.org/1999/xlink",h={href:g,xlink:f,xmlns:f+"/","xmlns:xlink":f+"/"};return{svg:e,xmlns:f,xlink:g,create:a,get:b,set:c}},da=e.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(a,b){return!b&&(a instanceof G||a instanceof x||a instanceof L)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(a,b){var c=e.capitalize(b),d=a[2];this[b]={type:a[1],property:b,attribute:a[0],toSVG:d,fromSVG:d&&e.each(d,function(a,b){this[a]=b},{}),exportFilter:a[3],get:"get"+c,set:"set"+c}},{});return new function(){function b(a,b,c){var d=new e,f=a.getTranslation();if(b){a=a._shiftless();var g=a._inverseTransform(f);d[c?"cx":"x"]=g.x,d[c?"cy":"y"]=g.y,f=null}if(!a.isIdentity()){var h=a.decompose();if(h){var i=[],k=h.rotation,l=h.scaling,m=h.skewing;f&&!f.isZero()&&i.push("translate("+y.point(f)+")"),k&&i.push("rotate("+y.number(k)+")"),j.isZero(l.x-1)&&j.isZero(l.y-1)||i.push("scale("+y.point(l)+")"),m&&m.x&&i.push("skewX("+y.number(m.x)+")"),m&&m.y&&i.push("skewY("+y.number(m.y)+")"),d.transform=i.join(" ")}else d.transform="matrix("+a.getValues().join(",")+")"}return d}function c(a,c){for(var d=b(a._matrix),e=a._children,f=ca.create("g",d,y),g=0,h=e.length;g<h;g++){var i=e[g],j=w(i,c);if(j)if(i.isClipMask()){var k=ca.create("clipPath");k.appendChild(j),s(i,k,"clip"),ca.set(f,{"clip-path":"url(#"+k.id+")"})}else f.appendChild(j)}return f}function d(a,c){var d=b(a._matrix,!0),e=a.getSize(),f=a.getImage();return d.x-=e.width/2,d.y-=e.height/2,d.width=e.width,d.height=e.height,d.href=!1===c.embedImages&&f&&f.src||a.toDataURL(),ca.create("image",d,y)}function f(a,c){var d=c.matchShapes;if(d){var e=a.toShape(!1);if(e)return g(e,c)}var f,h=a._segments,i=h.length,j=b(a._matrix);if(d&&i>=2&&!a.hasHandles())if(i>2){f=a._closed?"polygon":"polyline";for(var k=[],l=0;l<i;l++)k.push(y.point(h[l]._point));j.points=k.join(" ")}else{f="line";var m=h[0]._point,n=h[1]._point;j.set({x1:m.x,y1:m.y,x2:n.x,y2:n.y})}else f="path",j.d=a.getPathData(null,c.precision);return ca.create(f,j,y)}function g(a){var c=a._type,d=a._radius,e=b(a._matrix,!0,"rectangle"!==c);if("rectangle"===c){c="rect";var f=a._size,g=f.width,h=f.height;e.x-=g/2,e.y-=h/2,e.width=g,e.height=h,d.isZero()&&(d=null)}return d&&("circle"===c?e.r=d:(e.rx=d.width,e.ry=d.height)),ca.create(c,e,y)}function h(a,c){var d=b(a._matrix),e=a.getPathData(null,c.precision);return e&&(d.d=e),ca.create("path",d,y)}function l(a,c){var d=b(a._matrix,!0),e=a._definition,f=q(e,"symbol"),g=e._item,h=g.getBounds();return f||(f=ca.create("symbol",{viewBox:y.rectangle(h)}),f.appendChild(w(g,c)),s(e,f,"symbol")),d.href="#"+f.id,d.x+=h.x,d.y+=h.y,d.width=h.width,d.height=h.height,d.overflow="visible",ca.create("use",d,y)}function m(a){var b=q(a,"color");if(!b){var c,d=a.getGradient(),e=d._radial,f=a.getOrigin(),g=a.getDestination();if(e){c={cx:f.x,cy:f.y,r:f.getDistance(g)};var h=a.getHighlight();h&&(c.fx=h.x,c.fy=h.y)}else c={x1:f.x,y1:f.y,x2:g.x,y2:g.y};c.gradientUnits="userSpaceOnUse",b=ca.create((e?"radial":"linear")+"Gradient",c,y);for(var i=d._stops,j=0,k=i.length;j<k;j++){var l=i[j],m=l._color,n=m.getAlpha(),o=l._offset;c={offset:null==o?j/(k-1):o},m&&(c["stop-color"]=m.toCSS(!0)),n<1&&(c["stop-opacity"]=n),b.appendChild(ca.create("stop",c,y))}s(a,b,"color")}return"url(#"+b.id+")"}function n(a){var c=ca.create("text",b(a._matrix,!0),y);return c.textContent=a._content,c}function o(a,b,c){var d={},f=!c&&a.getParent(),g=[];return null!=a._name&&(d.id=a._name),e.each(da,function(b){var c=b.get,h=b.type,i=a[c]();if(b.exportFilter?b.exportFilter(a,i):!f||!e.equals(f[c](),i)){if("color"===h&&null!=i){var j=i.getAlpha();j<1&&(d[b.attribute+"-opacity"]=j)}"style"===h?g.push(b.attribute+": "+i):d[b.attribute]=null==i?"none":"color"===h?i.gradient?m(i,a):i.toCSS(!0):"array"===h?i.join(","):"lookup"===h?b.toSVG[i]:i}}),g.length&&(d.style=g.join(";")),1===d.opacity&&delete d.opacity,a._visible||(d.visibility="hidden"),ca.set(b,d,y)}function q(a,b){return z||(z={ids:{},svgs:{}}),a&&z.svgs[b+"-"+(a._id||a.__id||(a.__id=k.get("svg")))]}function s(a,b,c){z||q();var d=z.ids[c]=(z.ids[c]||0)+1;b.id=c+"-"+d,z.svgs[c+"-"+(a._id||a.__id)]=b}function v(b,c){var d=b,e=null;if(z){d="svg"===b.nodeName.toLowerCase()&&b;for(var f in z.svgs)e||(d||(d=ca.create("svg"),d.appendChild(b)),e=d.insertBefore(ca.create("defs"),d.firstChild)),e.appendChild(z.svgs[f]);z=null}return c.asString?(new a.XMLSerializer).serializeToString(d):d}function w(a,b,c){var d=A[a._class],e=d&&d(a,b);if(e){var f=b.onExport;f&&(e=f(a,e,b)||e);var g=JSON.stringify(a._data);g&&"{}"!==g&&"null"!==g&&e.setAttribute("data-paper-data",g)}return e&&o(a,e,c)}function x(a){return a||(a={}),y=new i(a.precision),a}var y,z,A={Group:c,Layer:c,Raster:d,Path:f,Shape:g,CompoundPath:h,SymbolItem:l,PointText:n};u.inject({exportSVG:function(a){return a=x(a),v(w(this,a,!0),a)}}),t.inject({exportSVG:function(a){a=x(a);var c=this._children,d=this.getView(),f=e.pick(a.bounds,"view"),g=a.matrix||"view"===f&&d._matrix,h=g&&r.read([g]),i="view"===f?new p([0,0],d.getViewSize()):"content"===f?u._getBounds(c,h,{stroke:!0}):p.read([f],0,{readNull:!0}),j={version:"1.1",xmlns:ca.svg,"xmlns:xlink":ca.xlink};i&&(j.width=i.width,j.height=i.height,(i.x||i.y)&&(j.viewBox=y.rectangle(i)));var k=ca.create("svg",j,y),l=k;h&&!h.isIdentity()&&(l=k.appendChild(ca.create("g",b(h),y)));for(var m=0,n=c.length;m<n;m++)l.appendChild(w(c[m],a,!0));return v(k,a)}})},new function(){function f(a,b,c,d,e){var f=ca.get(a,b),g=null==f?d?null:c?"":0:c?f:parseFloat(f);return/%\s*$/.test(f)?g/100*(e?1:E[/x|^width/.test(b)?"width":"height"]):g}function g(a,b,c,d,e){return b=f(a,b||"x",!1,d,e),c=f(a,c||"y",!1,d,e),!d||null!=b&&null!=c?new l(b,c):null}function h(a,b,c,d,e){return b=f(a,b||"width",!1,d,e),c=f(a,c||"height",!1,d,e),!d||null!=b&&null!=c?new n(b,c):null}function i(a,b,c){return"none"===a?null:"number"===b?parseFloat(a):"array"===b?a?a.split(/[\s,]+/g).map(parseFloat):[]:"color"===b?B(a)||a:"lookup"===b?c[a]:a}function j(a,b,c,d){var e=a.childNodes,f="clippath"===b,g="defs"===b,h=new v,i=h._project,j=i._currentStyle,k=[];if(f||g||(h=z(h,a,d),i._currentStyle=h._style.clone()),d)for(var l=a.querySelectorAll("defs"),m=0,n=l.length;m<n;m++)C(l[m],c,!1);for(var m=0,n=e.length;m<n;m++){var o,p=e[m];1!==p.nodeType||/^defs$/i.test(p.nodeName)||!(o=C(p,c,!1))||o instanceof A||k.push(o)}return h.addChildren(k),f&&(h=z(h.reduce(),a,d)),i._currentStyle=j,(f||g)&&(h.remove(),h=null),h}function k(a,b){for(var c=a.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),d=[],e=0,f=c.length;e<f;e+=2)d.push(new l(parseFloat(c[e]),parseFloat(c[e+1])));var g=new H(d);return"polygon"===b&&g.closePath(),g}function m(a){return G.create(a.getAttribute("d"))}function o(a,b){var c,d=(f(a,"href",!0)||"").substring(1),e="radialgradient"===b;if(d)c=F[d].getGradient(),c._radial^e&&(c=c.clone(),c._radial=e);else{for(var h=a.childNodes,i=[],j=0,k=h.length;j<k;j++){var l=h[j];1===l.nodeType&&i.push(z(new P,l))}c=new O(i,e)}var m,n,o,p="userSpaceOnUse"!==f(a,"gradientUnits",!0);return e?(m=g(a,"cx","cy",!1,p),n=m.add(f(a,"r",!1,!1,p),0),o=g(a,"fx","fy",!0,p)):(m=g(a,"x1","y1",!1,p),n=g(a,"x2","y2",!1,p)),z(new N(c,m,n,o),a)._scaleToBounds=p,null}function q(a,b,c,d){if(a.transform){for(var e=(d.getAttribute(c)||"").split(/\)\s*/g),f=new r,g=0,h=e.length;g<h;g++){var i=e[g];if(!i)break;for(var j=i.split(/\(\s*/),k=j[0],l=j[1].split(/[\s,]+/g),m=0,n=l.length;m<n;m++)l[m]=parseFloat(l[m]);switch(k){case"matrix":f.append(new r(l[0],l[1],l[2],l[3],l[4],l[5]));break;case"rotate":f.rotate(l[0],l[1],l[2]);break;case"translate":f.translate(l[0],l[1]);break;case"scale":f.scale(l);break;case"skewX":f.skew(l[0],0);break;case"skewY":f.skew(0,l[0])}}a.transform(f)}}function s(a,b,c){
var d="fill-opacity"===c?"getFillColor":"getStrokeColor",e=a[d]&&a[d]();e&&e.setAlpha(parseFloat(b))}function w(a,c,d){var f=a.attributes[c],g=f&&f.value;if(!g){var h=e.camelize(c);(g=a.style[h])||d.node[h]===d.parent[h]||(g=d.node[h])}return g?"none"===g?null:g:b}function z(a,c,d){var f=c.parentNode,g={node:R.getStyles(c)||{},parent:!d&&!/^defs$/i.test(f.tagName)&&R.getStyles(f)||{}};return e.each(J,function(d,e){var f=w(c,e,g);a=f!==b&&d(a,f,e,c,g)||a}),a}function B(a){var b=a&&a.match(/\((?:["'#]*)([^"')]+)/),d=b&&b[1],e=d&&F[c?d.replace(c.location.href.split("#")[0]+"#",""):d];return e&&e._scaleToBounds&&(e=e.clone(),e._scaleToBounds=!0),e}function C(a,b,c){var f,g,i,j=a.nodeName.toLowerCase(),k="#document"!==j,l=d.body;c&&k&&(E=h(a,null,null,!0)||paper.getView().getSize(),f=ca.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),g=a.parentNode,i=a.nextSibling,f.appendChild(a),l.appendChild(f));var m=paper.settings,n=m.applyMatrix,o=m.insertItems;m.applyMatrix=!1,m.insertItems=!1;var p=I[j],q=p&&p(a,j,b,c)||null;if(m.insertItems=o,m.applyMatrix=n,q){!k||q instanceof v||(q=z(q,a,c));var r=b.onImport,s=k&&a.getAttribute("data-paper-data");r&&(q=r(a,q,b)||q),b.expandShapes&&q instanceof x&&(q.remove(),q=q.toPath()),s&&(q._data=JSON.parse(s))}return f&&(l.removeChild(f),g&&(i?g.insertBefore(a,i):g.appendChild(a))),c&&(F={},q&&e.pick(b.applyMatrix,n)&&q.matrix.apply(!0,!0)),q}function D(c,e,f){function g(d){try{var g="object"==typeof d?d:(new a.DOMParser).parseFromString(d,"image/svg+xml");if(!g.nodeName)throw g=null,new Error("Unsupported SVG source: "+c);paper=i,j=C(g,e,!0),e&&!1===e.insert||f._insertItem(b,j);var k=e.onLoad;k&&k(j,d)}catch(a){h(a)}}function h(a,b){var c=e.onError;if(!c)throw new Error(a);c(a,b)}if(!c)return null;e="function"==typeof e?{onLoad:e}:e||{};var i=paper,j=null;if("string"!=typeof c||/^.*</.test(c)){if("undefined"!=typeof File&&c instanceof File){var k=new FileReader;return k.onload=function(){g(k.result)},k.onerror=function(){h(k.error)},k.readAsText(c)}g(c)}else{var l=d.getElementById(c);l?g(l):_.request({url:c,async:!0,onLoad:g,onError:h})}return j}var E,F={},I={"#document":function(a,b,c,d){for(var e=a.childNodes,f=0,g=e.length;f<g;f++){var h=e[f];if(1===h.nodeType)return C(h,c,d)}},g:j,svg:j,clippath:j,polygon:k,polyline:k,path:m,lineargradient:o,radialgradient:o,image:function(a){var b=new y(f(a,"href",!0));return b.on("load",function(){var b=h(a);this.setSize(b);var c=this._matrix._transformPoint(g(a).add(b.divide(2)));this.translate(c)}),b},symbol:function(a,b,c,d){return new A(j(a,b,c,d),!0)},defs:j,use:function(a){var b=(f(a,"href",!0)||"").substring(1),c=F[b],d=g(a);return c?c instanceof A?c.place(d):c.clone().translate(d):null},circle:function(a){return new x.Circle(g(a,"cx","cy"),f(a,"r"))},ellipse:function(a){return new x.Ellipse({center:g(a,"cx","cy"),radius:h(a,"rx","ry")})},rect:function(a){return new x.Rectangle(new p(g(a),h(a)),h(a,"rx","ry"))},line:function(a){return new H.Line(g(a,"x1","y1"),g(a,"x2","y2"))},text:function(a){var b=new M(g(a).add(g(a,"dx","dy")));return b.setContent(a.textContent.trim()||""),b}},J=e.set(e.each(da,function(a){this[a.attribute]=function(b,c){if(b[a.set]&&(b[a.set](i(c,a.type,a.fromSVG)),"color"===a.type)){var d=b[a.get]();if(d){if(d._scaleToBounds){var e=b.getBounds();d.transform((new r).translate(e.getPoint()).scale(e.getSize()))}b instanceof x&&d.transform((new r).translate(b.getPosition(!0).negate()))}}}},{}),{id:function(a,b){F[b]=a,a.setName&&a.setName(b)},"clip-path":function(a,b){var c=B(b);if(c){if(c=c.clone(),c.setClipMask(!0),!(a instanceof v))return new v(c,a);a.insertChild(0,c)}},gradientTransform:q,transform:q,"fill-opacity":s,"stroke-opacity":s,visibility:function(a,b){a.setVisible&&a.setVisible("visible"===b)},display:function(a,b){a.setVisible&&a.setVisible(null!==b)},"stop-color":function(a,b){a.setColor&&a.setColor(b)},"stop-opacity":function(a,b){a._color&&a._color.setAlpha(parseFloat(b))},offset:function(a,b){if(a.setOffset){var c=b.match(/(.*)%$/);a.setOffset(c?c[1]/100:parseFloat(b))}},viewBox:function(a,b,c,d,e){var f,g,j=new p(i(b,"array")),k=h(d,null,null,!0);if(a instanceof v){var l=k?k.divide(j.getSize()):1,g=(new r).scale(l).translate(j.getPoint().negate());f=a}else a instanceof A&&(k&&j.setSize(k),f=a._item);if(f){if("visible"!==w(d,"overflow",e)){var m=new x.Rectangle(j);m.setClipMask(!0),f.addChild(m)}g&&f.transform(g)}}});u.inject({importSVG:function(a,b){return D(a,b,this)}}),t.inject({importSVG:function(a,b){return this.activate(),D(a,b,this)}})},e.exports.PaperScript=function(){function b(a,b,c){var d=s[b];if(a&&a[d]){var e=a[d](c);return"!="===b?!e:e}switch(b){case"+":return a+c;case"-":return a-c;case"*":return a*c;case"/":return a/c;case"%":return a%c;case"==":return a==c;case"!=":return a!=c}}function f(a,b){var c=t[a];if(c&&b&&b[c])return b[c]();switch(a){case"+":return+b;case"-":return-b}}function h(a,b){return r.acorn.parse(a,b)}function i(b,e){function f(a){for(var b=0,c=n.length;b<c;b++){var d=n[b];if(d[0]>=a)break;a+=d[1]}return a}function g(a){return b.substring(f(a.range[0]),f(a.range[1]))}function i(a,c){return b.substring(f(a.range[1]),f(c.range[0]))}function j(a,c){for(var d=f(a.range[0]),e=f(a.range[1]),g=0,h=n.length-1;h>=0;h--)if(d>n[h][0]){g=h+1;break}n.splice(g,0,[d,c.length-e+d]),b=b.substring(0,d)+c+b.substring(e)}function k(a,b){if(a){for(var c in a)if("range"!==c&&"loc"!==c){var d=a[c];if(Array.isArray(d))for(var e=0,f=d.length;e<f;e++)k(d[e],a);else d&&"object"==typeof d&&k(d,a)}switch(a.type){case"UnaryExpression":if(a.operator in t&&"Literal"!==a.argument.type){var h=g(a.argument);j(a,'$__("'+a.operator+'", '+h+")")}break;case"BinaryExpression":if(a.operator in s&&"Literal"!==a.left.type){var l=g(a.left),m=g(a.right),n=i(a.left,a.right),o=a.operator;j(a,"__$__("+l+","+n.replace(new RegExp("\\"+o),'"'+o+'"')+", "+m+")")}break;case"UpdateExpression":case"AssignmentExpression":var p=b&&b.type;if(!("ForStatement"===p||"BinaryExpression"===p&&/^[=!<>]/.test(b.operator)||"MemberExpression"===p&&b.computed))if("UpdateExpression"===a.type){var h=g(a.argument),q="__$__("+h+', "'+a.operator[0]+'", 1)',r=h+" = "+q;a.prefix||"AssignmentExpression"!==p&&"VariableDeclarator"!==p||(g(b.left||b.id)===h&&(r=q),r=h+"; "+r),j(a,r)}else if(/^.=$/.test(a.operator)&&"Literal"!==a.left.type){var l=g(a.left),m=g(a.right),q=l+" = __$__("+l+', "'+a.operator[0]+'", '+m+")";j(a,/^\(.*\)$/.test(g(a))?"("+q+")":q)}}}}function l(a){var b="";for(a=(Math.abs(a)<<1)+(a<0?1:0);a||!b;){var c=31&a;a>>=5,a&&(c|=32),b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c]}return b}if(!b)return"";e=e||{};var m,n=[],o=e.url||"",p=paper.agent,q=p.versionNumber,r=!1,u=e.sourceMaps,v=e.source||b,w=/\r\n|\n|\r/gm,x=e.offset||0;if(u&&(p.chrome&&q>=30||p.webkit&&q>=537.76||p.firefox&&q>=23||p.node)){if(p.node)x-=2;else if(c&&o&&!c.location.href.indexOf(o)){var y=d.getElementsByTagName("html")[0].innerHTML;x=y.substr(0,y.indexOf(b)+1).match(w).length+1}r=x>0&&!(p.chrome&&q>=36||p.safari&&q>=600||p.firefox&&q>=40||p.node);var z=["AA"+l(r?0:x)+"A"];z.length=(b.match(w)||[]).length+1+(r?x:0),m={version:3,file:o,names:[],mappings:z.join(";AACA"),sourceRoot:"",sources:[o],sourcesContent:[v]}}return k(h(b,{ranges:!0})),m&&(r&&(b=new Array(x+1).join("\n")+b),/^(inline|both)$/.test(u)&&(b+="\n//# sourceMappingURL=data:application/json;base64,"+a.btoa(unescape(encodeURIComponent(JSON.stringify(m))))),b+="\n//# sourceURL="+(o||"paperscript")),{url:o,source:v,code:b,map:m}}function j(a,c,g){function h(b,c){for(var d in b)!c&&/^_/.test(d)||!new RegExp("([\\b\\s\\W]|^)"+d.replace(/\$/g,"\\$")+"\\b").test(a)||(p.push(d),q.push(b[d]))}paper=c;var j,k=c.getView(),m=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(a)&&!/\bnew\s+Tool\b/.test(a)?new $:null,n=m?m._events:[],o=["onFrame","onResize"].concat(n),p=[],q=[],r="object"==typeof a?a:i(a,g);a=r.code,h({__$__:b,$__:f,paper:c,view:k,tool:m},!0),h(c),(o=e.each(o,function(b){new RegExp("\\s+"+b+"\\b").test(a)&&(p.push(b),this.push(b+": "+b))},[]).join(", "))&&(a+="\nreturn { "+o+" };");var s=paper.agent;if(d&&(s.chrome||s.firefox&&s.versionNumber<40)){var t=d.createElement("script"),u=d.head||d.getElementsByTagName("head")[0];s.firefox&&(a="\n"+a),t.appendChild(d.createTextNode("paper._execute = function("+p+") {"+a+"\n}")),u.appendChild(t),j=paper._execute,delete paper._execute,u.removeChild(t)}else j=Function(p,a);var v=j.apply(c,q)||{};return e.each(n,function(a){var b=v[a];b&&(m[a]=b)}),k&&(v.onResize&&k.setOnResize(v.onResize),k.emit("resize",{size:k.size,delta:new l}),v.onFrame&&k.setOnFrame(v.onFrame),k.requestUpdate()),r}function k(a){if(/^text\/(?:x-|)paperscript$/.test(a.type)&&"true"!==g.getAttribute(a,"ignore")){var b=g.getAttribute(a,"canvas"),c=d.getElementById(b),e=a.src||a.getAttribute("data-src"),f=g.hasAttribute(a,"async"),h="data-paper-scope";if(!c)throw new Error('Unable to find canvas with id "'+b+'"');var i=g.get(c.getAttribute(h))||(new g).setup(c);return c.setAttribute(h,i._id),e?_.request({url:e,async:f,mimeType:"text/plain",onLoad:function(a){j(a,i,e)}}):j(a.innerHTML,i,a.baseURI),a.setAttribute("data-paper-ignore","true"),i}}function m(){e.each(d&&d.getElementsByTagName("script"),k)}function o(a){return a?k(a):m()}var p,q,r=this;!function(a,b){"object"==typeof p&&"object"==typeof module?b(p):"function"==typeof q&&q.amd?q(["exports"],b):b(a.acorn||(a.acorn={}))}(this,function(a){"use strict";function b(a){la=a||{};for(var b in pa)Object.prototype.hasOwnProperty.call(la,b)||(la[b]=pa[b]);oa=la.sourceFile||null}function c(a,b){var c=qa(ma,a);b+=" ("+c.line+":"+c.column+")";var d=new SyntaxError(b);throw d.pos=a,d.loc=c,d.raisedAt=ra,d}function d(a){function b(a){if(1==a.length)return c+="return str === "+JSON.stringify(a[0])+";";c+="switch(str){";for(var b=0;b<a.length;++b)c+="case "+JSON.stringify(a[b])+":";c+="return true}return false;"}a=a.split(" ");var c="",d=[];a:for(var e=0;e<a.length;++e){for(var f=0;f<d.length;++f)if(d[f][0].length==a[e].length){d[f].push(a[e]);continue a}d.push([a[e]])}if(d.length>3){d.sort(function(a,b){return b.length-a.length}),c+="switch(str.length){";for(var e=0;e<d.length;++e){var g=d[e];c+="case "+g[0].length+":",b(g)}c+="}"}else b(a);return new Function("str",c)}function e(){this.line=za,this.column=ra-Aa}function f(){za=1,ra=Aa=0,ya=!0,j()}function g(a,b){ta=ra,la.locations&&(va=new e),wa=a,j(),xa=b,ya=a.beforeExpr}function h(){var a=la.onComment&&la.locations&&new e,b=ra,d=ma.indexOf("*/",ra+=2);if(-1===d&&c(ra-2,"Unterminated comment"),ra=d+2,la.locations){Yb.lastIndex=b;for(var f;(f=Yb.exec(ma))&&f.index<ra;)++za,Aa=f.index+f[0].length}la.onComment&&la.onComment(!0,ma.slice(b+2,d),b,ra,a,la.locations&&new e)}function i(){for(var a=ra,b=la.onComment&&la.locations&&new e,c=ma.charCodeAt(ra+=2);ra<na&&10!==c&&13!==c&&8232!==c&&8233!==c;)++ra,c=ma.charCodeAt(ra);la.onComment&&la.onComment(!1,ma.slice(a+2,ra),a,ra,b,la.locations&&new e)}function j(){for(;ra<na;){var a=ma.charCodeAt(ra);if(32===a)++ra;else if(13===a){++ra;var b=ma.charCodeAt(ra);10===b&&++ra,la.locations&&(++za,Aa=ra)}else if(10===a||8232===a||8233===a)++ra,la.locations&&(++za,Aa=ra);else if(a>8&&a<14)++ra;else if(47===a){var b=ma.charCodeAt(ra+1);if(42===b)h();else{if(47!==b)break;i()}}else if(160===a)++ra;else{if(!(a>=5760&&Sb.test(String.fromCharCode(a))))break;++ra}}}function k(){var a=ma.charCodeAt(ra+1);return a>=48&&a<=57?y(!0):(++ra,g(ub))}function l(){var a=ma.charCodeAt(ra+1);return ya?(++ra,v()):61===a?u(yb,2):u(wb,1)}function m(){return 61===ma.charCodeAt(ra+1)?u(yb,2):u(Kb,1)}function n(a){var b=ma.charCodeAt(ra+1);return b===a?u(124===a?Bb:Cb,2):61===b?u(yb,2):u(124===a?Db:Fb,1)}function o(){return 61===ma.charCodeAt(ra+1)?u(yb,2):u(Eb,1)}function p(a){var b=ma.charCodeAt(ra+1);return b===a?45==b&&62==ma.charCodeAt(ra+2)&&Xb.test(ma.slice(Ca,ra))?(ra+=3,i(),j(),t()):u(zb,2):61===b?u(yb,2):u(Jb,1)}function q(a){var b=ma.charCodeAt(ra+1),c=1;return b===a?(c=62===a&&62===ma.charCodeAt(ra+2)?3:2,61===ma.charCodeAt(ra+c)?u(yb,c+1):u(Ib,c)):33==b&&60==a&&45==ma.charCodeAt(ra+2)&&45==ma.charCodeAt(ra+3)?(ra+=4,i(),j(),t()):(61===b&&(c=61===ma.charCodeAt(ra+2)?3:2),u(Hb,c))}function r(a){return 61===ma.charCodeAt(ra+1)?u(Gb,61===ma.charCodeAt(ra+2)?3:2):u(61===a?xb:Ab,1)}function s(a){switch(a){case 46:return k();case 40:return++ra,g(pb);case 41:return++ra,g(qb);case 59:return++ra,g(sb);case 44:return++ra,g(rb);case 91:return++ra,g(lb);case 93:return++ra,g(mb);case 123:return++ra,g(nb);case 125:return++ra,g(ob);case 58:return++ra,g(tb);case 63:return++ra,g(vb);case 48:var b=ma.charCodeAt(ra+1);if(120===b||88===b)return x();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return y(!1);case 34:case 39:return z(a);case 47:return l(a);case 37:case 42:return m();case 124:case 38:return n(a);case 94:return o();case 43:case 45:return p(a);case 60:case 62:return q(a);case 61:case 33:return r(a);case 126:return u(Ab,1)}return!1}function t(a){if(a?ra=sa+1:sa=ra,la.locations&&(ua=new e),a)return v();if(ra>=na)return g(Ma);var b=ma.charCodeAt(ra);if(Zb(b)||92===b)return C();var d=s(b);if(!1===d){var f=String.fromCharCode(b);if("\\"===f||Vb.test(f))return C();c(ra,"Unexpected character '"+f+"'")}return d}function u(a,b){var c=ma.slice(ra,ra+b);ra+=b,g(a,c)}function v(){for(var a,b,d="",e=ra;;){ra>=na&&c(e,"Unterminated regular expression");var f=ma.charAt(ra);if(Xb.test(f)&&c(e,"Unterminated regular expression"),a)a=!1;else{if("["===f)b=!0;else if("]"===f&&b)b=!1;else if("/"===f&&!b)break;a="\\"===f}++ra}var d=ma.slice(e,ra);++ra;var h=B();h&&!/^[gmsiy]*$/.test(h)&&c(e,"Invalid regexp flag");try{var i=new RegExp(d,h)}catch(a){a instanceof SyntaxError&&c(e,a.message),c(a)}return g(Ja,i)}function w(a,b){for(var c=ra,d=0,e=0,f=null==b?1/0:b;e<f;++e){var g,h=ma.charCodeAt(ra);if((g=h>=97?h-97+10:h>=65?h-65+10:h>=48&&h<=57?h-48:1/0)>=a)break;++ra,d=d*a+g}return ra===c||null!=b&&ra-c!==b?null:d}function x(){ra+=2;var a=w(16);return null==a&&c(sa+2,"Expected hexadecimal number"),Zb(ma.charCodeAt(ra))&&c(ra,"Identifier directly after number"),g(Ia,a)}function y(a){var b=ra,d=!1,e=48===ma.charCodeAt(ra);a||null!==w(10)||c(b,"Invalid number"),46===ma.charCodeAt(ra)&&(++ra,w(10),d=!0);var f=ma.charCodeAt(ra);69!==f&&101!==f||(f=ma.charCodeAt(++ra),43!==f&&45!==f||++ra,null===w(10)&&c(b,"Invalid number"),d=!0),Zb(ma.charCodeAt(ra))&&c(ra,"Identifier directly after number");var h,i=ma.slice(b,ra);return d?h=parseFloat(i):e&&1!==i.length?/[89]/.test(i)||Ga?c(b,"Invalid number"):h=parseInt(i,8):h=parseInt(i,10),g(Ia,h)}function z(a){ra++;for(var b="";;){ra>=na&&c(sa,"Unterminated string constant");var d=ma.charCodeAt(ra);if(d===a)return++ra,g(Ka,b);if(92===d){d=ma.charCodeAt(++ra);var e=/^[0-7]+/.exec(ma.slice(ra,ra+3));for(e&&(e=e[0]);e&&parseInt(e,8)>255;)e=e.slice(0,-1);if("0"===e&&(e=null),++ra,e)Ga&&c(ra-2,"Octal literal in strict mode"),b+=String.fromCharCode(parseInt(e,8)),ra+=e.length-1;else switch(d){case 110:b+="\n";break;case 114:b+="\r";break;case 120:b+=String.fromCharCode(A(2));break;case 117:b+=String.fromCharCode(A(4));break;case 85:b+=String.fromCharCode(A(8));break;case 116:b+="\t";break;case 98:b+="\b";break;case 118:b+="\v";break;case 102:b+="\f";break;case 48:b+="\0";break;case 13:10===ma.charCodeAt(ra)&&++ra;case 10:la.locations&&(Aa=ra,++za);break;default:b+=String.fromCharCode(d)}}else 13!==d&&10!==d&&8232!==d&&8233!==d||c(sa,"Unterminated string constant"),b+=String.fromCharCode(d),++ra}}function A(a){var b=w(16,a);return null===b&&c(sa,"Bad character escape sequence"),b}function B(){Mb=!1;for(var a,b=!0,d=ra;;){var e=ma.charCodeAt(ra);if($b(e))Mb&&(a+=ma.charAt(ra)),++ra;else{if(92!==e)break;Mb||(a=ma.slice(d,ra)),Mb=!0,117!=ma.charCodeAt(++ra)&&c(ra,"Expecting Unicode escape sequence \\uXXXX"),++ra;var f=A(4),g=String.fromCharCode(f);g||c(ra-1,"Invalid Unicode escape"),(b?Zb(f):$b(f))||c(ra-4,"Invalid Unicode escape"),a+=g}b=!1}return Mb?a:ma.slice(d,ra)}function C(){var a=B(),b=La;return!Mb&&Rb(a)&&(b=kb[a]),g(b,a)}function D(){Ba=sa,Ca=ta,Da=va,t()}function E(a){if(Ga=a,ra=sa,la.locations)for(;ra<Aa;)Aa=ma.lastIndexOf("\n",Aa-2)+1,--za;j(),t()}function F(){this.type=null,this.start=sa,this.end=null}function G(){this.start=ua,this.end=null,null!==oa&&(this.source=oa)}function H(){var a=new F;return la.locations&&(a.loc=new G),la.directSourceFile&&(a.sourceFile=la.directSourceFile),la.ranges&&(a.range=[sa,0]),a}function I(a){var b=new F;return b.start=a.start,la.locations&&(b.loc=new G,b.loc.start=a.loc.start),la.ranges&&(b.range=[a.range[0],0]),b}function J(a,b){return a.type=b,a.end=Ca,la.locations&&(a.loc.end=Da),la.ranges&&(a.range[1]=Ca),a}function K(a){return la.ecmaVersion>=5&&"ExpressionStatement"===a.type&&"Literal"===a.expression.type&&"use strict"===a.expression.value}function L(a){if(wa===a)return D(),!0}function M(){return!la.strictSemicolons&&(wa===Ma||wa===ob||Xb.test(ma.slice(Ca,sa)))}function N(){L(sb)||M()||P()}function O(a){wa===a?D():P()}function P(){c(sa,"Unexpected token")}function Q(a){"Identifier"!==a.type&&"MemberExpression"!==a.type&&c(a.start,"Assigning to rvalue"),Ga&&"Identifier"===a.type&&Qb(a.name)&&c(a.start,"Assigning to "+a.name+" in strict mode")}function R(a){Ba=Ca=ra,la.locations&&(Da=new e),Ea=Ga=null,Fa=[],t();var b=a||H(),c=!0;for(a||(b.body=[]);wa!==Ma;){var d=S();b.body.push(d),c&&K(d)&&E(!0),c=!1}return J(b,"Program")}function S(){(wa===wb||wa===yb&&"/="==xa)&&t(!0);var a=wa,b=H();switch(a){case Na:case Qa:D();var d=a===Na;L(sb)||M()?b.label=null:wa!==La?P():(b.label=ka(),N());for(var e=0;e<Fa.length;++e){var f=Fa[e];if(null==b.label||f.name===b.label.name){if(null!=f.kind&&(d||"loop"===f.kind))break;if(b.label&&d)break}}return e===Fa.length&&c(b.start,"Unsyntactic "+a.keyword),J(b,d?"BreakStatement":"ContinueStatement");case Ra:return D(),N(),J(b,"DebuggerStatement");case Ta:return D(),Fa.push(_b),b.body=S(),Fa.pop(),O(cb),b.test=T(),N(),J(b,"DoWhileStatement");case Wa:if(D(),Fa.push(_b),O(pb),wa===sb)return V(b,null);if(wa===bb){var g=H();return D(),X(g,!0),J(g,"VariableDeclaration"),1===g.declarations.length&&L(jb)?W(b,g):V(b,g)}var g=Y(!1,!0);return L(jb)?(Q(g),W(b,g)):V(b,g);case Xa:return D(),ia(b,!0);case Ya:return D(),b.test=T(),b.consequent=S(),b.alternate=L(Ua)?S():null,J(b,"IfStatement");case Za:return Ea||la.allowReturnOutsideFunction||c(sa,"'return' outside of function"),D(),L(sb)||M()?b.argument=null:(b.argument=Y(),N()),J(b,"ReturnStatement");case $a:D(),b.discriminant=T(),b.cases=[],O(nb),Fa.push(ac);for(var h,i;wa!=ob;)if(wa===Oa||wa===Sa){var j=wa===Oa;h&&J(h,"SwitchCase"),b.cases.push(h=H()),h.consequent=[],D(),j?h.test=Y():(i&&c(Ba,"Multiple default clauses"),i=!0,h.test=null),O(tb)}else h||P(),h.consequent.push(S());return h&&J(h,"SwitchCase"),D(),Fa.pop(),J(b,"SwitchStatement");case _a:return D(),Xb.test(ma.slice(Ca,sa))&&c(Ca,"Illegal newline after throw"),b.argument=Y(),N(),J(b,"ThrowStatement");case ab:if(D(),b.block=U(),b.handler=null,wa===Pa){var k=H();D(),O(pb),k.param=ka(),Ga&&Qb(k.param.name)&&c(k.param.start,"Binding "+k.param.name+" in strict mode"),O(qb),k.guard=null,k.body=U(),b.handler=J(k,"CatchClause")}return b.guardedHandlers=Ha,b.finalizer=L(Va)?U():null,b.handler||b.finalizer||c(b.start,"Missing catch or finally clause"),J(b,"TryStatement");case bb:return D(),X(b),N(),J(b,"VariableDeclaration");case cb:return D(),b.test=T(),Fa.push(_b),b.body=S(),Fa.pop(),J(b,"WhileStatement");case db:return Ga&&c(sa,"'with' in strict mode"),D(),b.object=T(),b.body=S(),J(b,"WithStatement");case nb:return U();case sb:return D(),J(b,"EmptyStatement");default:var l=xa,m=Y();if(a===La&&"Identifier"===m.type&&L(tb)){for(var e=0;e<Fa.length;++e)Fa[e].name===l&&c(m.start,"Label '"+l+"' is already declared");var n=wa.isLoop?"loop":wa===$a?"switch":null;return Fa.push({name:l,kind:n}),b.body=S(),Fa.pop(),b.label=m,J(b,"LabeledStatement")}return b.expression=m,N(),J(b,"ExpressionStatement")}}function T(){O(pb);var a=Y();return O(qb),a}function U(a){var b,c=H(),d=!0,e=!1;for(c.body=[],O(nb);!L(ob);){var f=S();c.body.push(f),d&&a&&K(f)&&(b=e,E(e=!0)),d=!1}return e&&!b&&E(!1),J(c,"BlockStatement")}function V(a,b){return a.init=b,O(sb),a.test=wa===sb?null:Y(),O(sb),a.update=wa===qb?null:Y(),O(qb),a.body=S(),Fa.pop(),J(a,"ForStatement")}function W(a,b){return a.left=b,a.right=Y(),O(qb),a.body=S(),Fa.pop(),J(a,"ForInStatement")}function X(a,b){for(a.declarations=[],a.kind="var";;){var d=H();if(d.id=ka(),Ga&&Qb(d.id.name)&&c(d.id.start,"Binding "+d.id.name+" in strict mode"),d.init=L(xb)?Y(!0,b):null,a.declarations.push(J(d,"VariableDeclarator")),!L(rb))break}return a}function Y(a,b){var c=Z(b);if(!a&&wa===rb){var d=I(c);for(d.expressions=[c];L(rb);)d.expressions.push(Z(b));return J(d,"SequenceExpression")}return c}function Z(a){var b=$(a);if(wa.isAssign){var c=I(b);return c.operator=xa,c.left=b,D(),c.right=Z(a),Q(b),J(c,"AssignmentExpression")}return b}function $(a){var b=_(a);if(L(vb)){var c=I(b);return c.test=b,c.consequent=Y(!0),O(tb),c.alternate=Y(!0,a),J(c,"ConditionalExpression")}return b}function _(a){return aa(ba(),-1,a)}function aa(a,b,c){var d=wa.binop;if(null!=d&&(!c||wa!==jb)&&d>b){var e=I(a);e.left=a,e.operator=xa;var f=wa;D(),e.right=aa(ba(),d,c);return aa(J(e,f===Bb||f===Cb?"LogicalExpression":"BinaryExpression"),b,c)}return a}function ba(){if(wa.prefix){var a=H(),b=wa.isUpdate;return a.operator=xa,a.prefix=!0,ya=!0,D(),a.argument=ba(),b?Q(a.argument):Ga&&"delete"===a.operator&&"Identifier"===a.argument.type&&c(a.start,"Deleting local variable in strict mode"),J(a,b?"UpdateExpression":"UnaryExpression")}for(var d=ca();wa.postfix&&!M();){var a=I(d);a.operator=xa,a.prefix=!1,a.argument=d,Q(d),D(),d=J(a,"UpdateExpression")}return d}function ca(){return da(ea())}function da(a,b){if(L(ub)){var c=I(a);return c.object=a,c.property=ka(!0),c.computed=!1,da(J(c,"MemberExpression"),b)}if(L(lb)){var c=I(a);return c.object=a,c.property=Y(),c.computed=!0,O(mb),da(J(c,"MemberExpression"),b)}if(!b&&L(pb)){var c=I(a);return c.callee=a,c.arguments=ja(qb,!1),da(J(c,"CallExpression"),b)}return a}function ea(){switch(wa){case fb:var a=H();return D(),J(a,"ThisExpression");case La:return ka();case Ia:case Ka:case Ja:var a=H();return a.value=xa,a.raw=ma.slice(sa,ta),D(),J(a,"Literal");case gb:case hb:case ib:var a=H();return a.value=wa.atomValue,a.raw=wa.keyword,D(),J(a,"Literal");case pb:var b=ua,c=sa;D();var d=Y();return d.start=c,d.end=ta,la.locations&&(d.loc.start=b,d.loc.end=va),la.ranges&&(d.range=[c,ta]),O(qb),d;case lb:var a=H();return D(),a.elements=ja(mb,!0,!0),J(a,"ArrayExpression");case nb:return ga();case Xa:var a=H();return D(),ia(a,!1);case eb:return fa();default:P()}}function fa(){var a=H();return D(),a.callee=da(ea(),!0),L(pb)?a.arguments=ja(qb,!1):a.arguments=Ha,J(a,"NewExpression")}function ga(){var a=H(),b=!0,d=!1;for(a.properties=[],D();!L(ob);){if(b)b=!1;else if(O(rb),la.allowTrailingCommas&&L(ob))break;var e,f={key:ha()},g=!1;if(L(tb)?(f.value=Y(!0),e=f.kind="init"):la.ecmaVersion>=5&&"Identifier"===f.key.type&&("get"===f.key.name||"set"===f.key.name)?(g=d=!0,e=f.kind=f.key.name,f.key=ha(),wa!==pb&&P(),f.value=ia(H(),!1)):P(),"Identifier"===f.key.type&&(Ga||d))for(var h=0;h<a.properties.length;++h){var i=a.properties[h];if(i.key.name===f.key.name){var j=e==i.kind||g&&"init"===i.kind||"init"===e&&("get"===i.kind||"set"===i.kind);j&&!Ga&&"init"===e&&"init"===i.kind&&(j=!1),j&&c(f.key.start,"Redefinition of property")}}a.properties.push(f)}return J(a,"ObjectExpression")}function ha(){return wa===Ia||wa===Ka?ea():ka(!0)}function ia(a,b){wa===La?a.id=ka():b?P():a.id=null,a.params=[];var d=!0;for(O(pb);!L(qb);)d?d=!1:O(rb),a.params.push(ka());var e=Ea,f=Fa;if(Ea=!0,Fa=[],a.body=U(!0),Ea=e,Fa=f,Ga||a.body.body.length&&K(a.body.body[0]))for(var g=a.id?-1:0;g<a.params.length;++g){var h=g<0?a.id:a.params[g];if((Pb(h.name)||Qb(h.name))&&c(h.start,"Defining '"+h.name+"' in strict mode"),g>=0)for(var i=0;i<g;++i)h.name===a.params[i].name&&c(h.start,"Argument name clash in strict mode")}return J(a,b?"FunctionDeclaration":"FunctionExpression")}function ja(a,b,c){for(var d=[],e=!0;!L(a);){if(e)e=!1;else if(O(rb),b&&la.allowTrailingCommas&&L(a))break;c&&wa===rb?d.push(null):d.push(Y(!0))}return d}function ka(a){var b=H();return a&&"everywhere"==la.forbidReserved&&(a=!1),wa===La?(!a&&(la.forbidReserved&&(3===la.ecmaVersion?Nb:Ob)(xa)||Ga&&Pb(xa))&&-1==ma.slice(sa,ta).indexOf("\\")&&c(sa,"The keyword '"+xa+"' is reserved"),b.name=xa):a&&wa.keyword?b.name=wa.keyword:P(),ya=!1,D(),J(b,"Identifier")}a.version="0.5.0";var la,ma,na,oa;a.parse=function(a,c){return ma=String(a),na=ma.length,b(c),f(),R(la.program)};var pa=a.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},qa=a.getLineInfo=function(a,b){for(var c=1,d=0;;){Yb.lastIndex=d;var e=Yb.exec(a);if(!(e&&e.index<b))break;++c,d=e.index+e[0].length}return{line:c,column:b-d}};a.tokenize=function(a,c){function d(a){return Ca=ta,t(a),e.start=sa,e.end=ta,e.startLoc=ua,e.endLoc=va,e.type=wa,e.value=xa,e}ma=String(a),na=ma.length,b(c),f();var e={};return d.jumpTo=function(a,b){if(ra=a,la.locations){za=1,Aa=Yb.lastIndex=0;for(var c;(c=Yb.exec(ma))&&c.index<a;)++za,Aa=c.index+c[0].length}ya=b,j()},d};var ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha=[],Ia={type:"num"},Ja={type:"regexp"},Ka={type:"string"},La={type:"name"},Ma={type:"eof"},Na={keyword:"break"},Oa={keyword:"case",beforeExpr:!0},Pa={keyword:"catch"},Qa={keyword:"continue"},Ra={keyword:"debugger"},Sa={keyword:"default"},Ta={keyword:"do",isLoop:!0},Ua={keyword:"else",beforeExpr:!0},Va={keyword:"finally"},Wa={keyword:"for",isLoop:!0},Xa={keyword:"function"},Ya={keyword:"if"},Za={keyword:"return",beforeExpr:!0},$a={keyword:"switch"},_a={keyword:"throw",beforeExpr:!0},ab={keyword:"try"},bb={keyword:"var"},cb={keyword:"while",isLoop:!0},db={keyword:"with"},eb={keyword:"new",beforeExpr:!0},fb={keyword:"this"},gb={keyword:"null",atomValue:null},hb={keyword:"true",atomValue:!0},ib={keyword:"false",atomValue:!1},jb={keyword:"in",binop:7,beforeExpr:!0},kb={break:Na,case:Oa,catch:Pa,continue:Qa,debugger:Ra,default:Sa,do:Ta,else:Ua,finally:Va,for:Wa,function:Xa,if:Ya,return:Za,switch:$a,throw:_a,try:ab,var:bb,while:cb,with:db,null:gb,true:hb,false:ib,new:eb,in:jb,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:fb,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},lb={type:"[",beforeExpr:!0},mb={type:"]"},nb={type:"{",beforeExpr:!0},ob={type:"}"},pb={type:"(",beforeExpr:!0},qb={type:")"},rb={type:",",beforeExpr:!0},sb={type:";",beforeExpr:!0},tb={type:":",beforeExpr:!0},ub={type:"."},vb={type:"?",beforeExpr:!0},wb={binop:10,beforeExpr:!0},xb={isAssign:!0,beforeExpr:!0},yb={isAssign:!0,beforeExpr:!0},zb={postfix:!0,prefix:!0,isUpdate:!0},Ab={prefix:!0,beforeExpr:!0},Bb={binop:1,beforeExpr:!0},Cb={binop:2,beforeExpr:!0},Db={binop:3,beforeExpr:!0},Eb={binop:4,beforeExpr:!0},Fb={binop:5,beforeExpr:!0},Gb={binop:6,beforeExpr:!0},Hb={binop:7,beforeExpr:!0},Ib={binop:8,beforeExpr:!0},Jb={binop:9,prefix:!0,beforeExpr:!0},Kb={binop:10,beforeExpr:!0};a.tokTypes={bracketL:lb,bracketR:mb,braceL:nb,braceR:ob,parenL:pb,parenR:qb,comma:rb,semi:sb,colon:tb,dot:ub,question:vb,slash:wb,eq:xb,name:La,eof:Ma,num:Ia,regexp:Ja,string:Ka};for(var Lb in kb)a.tokTypes["_"+Lb]=kb[Lb];var Mb,Nb=d("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ob=d("class enum extends super const export import"),Pb=d("implements interface let package private protected public static yield"),Qb=d("eval arguments"),Rb=d("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Sb=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Tb="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ub="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Vb=new RegExp("["+Tb+"]"),Wb=new RegExp("["+Tb+Ub+"]"),Xb=/[\n\r\u2028\u2029]/,Yb=/\r\n|[\n\r\u2028\u2029]/g,Zb=a.isIdentifierStart=function(a){return a<65?36===a:a<91||(a<97?95===a:a<123||a>=170&&Vb.test(String.fromCharCode(a)))},$b=a.isIdentifierChar=function(a){return a<48?36===a:a<58||!(a<65)&&(a<91||(a<97?95===a:a<123||a>=170&&Wb.test(String.fromCharCode(a))))},_b={kind:"loop"},ac={kind:"switch"}});var s={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},t={"-":"__negate","+":null},u=e.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(a){this["__"+a]="#"+a},{});return l.inject(u),n.inject(u),N.inject(u),c&&("complete"===d.readyState?setTimeout(m):S.add(c,{load:m})),{compile:i,execute:j,load:o,parse:h}}.call(this),paper=new(g.inject(e.exports,{enumerable:!0,Base:e,Numerical:j,Key:X,DomEvent:S,DomElement:R,document:d,window:c,Symbol:A,PlacedSymbol:z})),paper.agent.node&&require("./node/extend.js")(paper),"function"==typeof define&&define.amd?define("paper",paper):"object"==typeof module&&module&&(module.exports=paper),paper}.call(this,"object"==typeof self?self:null),missing;try{missing="lodash",_.VERSION,missing="jQuery",jQuery()}catch(a){throw new ReferenceError(missing+" required!")}var animations=[];this.Danimator||(Danimator=function a(){return a.animate.apply(a,arguments)}),Danimator._time=0,Object.defineProperty(Danimator,"time",{get:function(){return Danimator._time},set:function(a){return Danimator._time=Math.max(a,0),Danimator.onTimeChanged&&Danimator.onTimeChanged(Danimator._time),Danimator}}),Danimator.sceneElement=function(a){return a.$element?a:a instanceof jQuery?a.data("sceneElement"):a instanceof HTMLElement?$(a).data("sceneElement"):_.get(a,"data.sceneElement")},Danimator.limit=function(a,b,c){if(b>c){var d=b+0;b=c+0,c=d+0,delete d}return Math.max(Math.min(a,c),b)},Danimator.init=function(a){a.data.sceneRoot=!0,a.name="scene",paper.scene=_createDanimatorScene(a),Object.defineProperty(paper.scene,"symbols",{enumerable:!1,value:[]}),Danimator.removeClip&&a.firstChild.clipMask&&a.firstChild.remove(),_.each(paper.project.symbolDefinitions,function(a){a.item.name&&(paper.scene.symbols[a.item.name]=a)})},Danimator.import=function(a,b){var c,d={};"object"==typeof b?(d=b,c=b.onLoad):c=b,d.onLoad=function(a,b){paper.$dom=$(b),Danimator.init(a),c&&c.call(paper.scene)},paper.project.importSVG.call(paper.project,a,d)},
Danimator.load=function(a){var b=a+".ani.json";$.getJSON(b,null,function(a,c){"success"===c?_.each(a,function(a,b){isNaN(Number(b))||(b=Number(b));var c=paper.project.getItem({id:b});c&&_.each(a.properties,function(a,b){_.each(a,function(a){Danimator.animate(c,b,a.from,a.to,a.duration,a.options)})})}):console.warn('Animations "'+b+"\" couldn't be loaded :(")}).fail(function(a,b,c){console.error(c)})},Danimator.step=function(a,b){var c=_.get(a.item,a.property);void 0==a.from&&(a.from=c),"string"==typeof a.to&&(isNaN(a.to)||(a.to=a.from+Number(a.to)));var d,e=a.to>a.from,f=a.to-a.from,g=e?c>=a.to:c<=a.to;if(Danimator.interactive&&(g=!1),g)"frame"===a.property&&(a.item.data._playing=!1);else{if(a.options.easing)try{var h="string"==typeof a.options.easing?Ease[a.options.easing]:a.options.easing;h&&(b=h(b))}catch(a){console.warn("Easing helpers not loaded!")}"string"==typeof a.from?b>=1?(d=a.to,g=Danimator.interactive):d=a.from:d=Danimator.limit(a.from+f*b,a.from,a.to),a.options.onStep&&(d=a.options.onStep(d,b,a)),_.set(a.item,a.property,d),a.property.match(/^state\.?/g)&&(a.item.state=a.item.state),paper.project.view.requestUpdate()}return Danimator.onStep&&Danimator.onStep(a,d),{done:g,value:d}},Danimator.animate=function(a,b,c,d,e,f){function g(a){var b=this;_.each(b.data._animate,function(a){if(a){var c=((new Date).getTime()-(a.startTime||0))/(1e3*a.duration),d=Danimator.step(a,c),e=Math.abs(a.to-a.from);if(d.done&&(_.pull(b.data._animate,a),b.data._animate.length||(b.off("frame",g),delete b.data._animate),a.options.onDone))if("string"==typeof a.options.onDone)switch("frame"===a.property&&(a.item.data._playing=!0,a.options.delay=1===a.to?0:a.duration/e),a.options.onDone){case"reverse":delete a.options.onDone;case"pingpong":var f=_.clone(a.to);a.to=_.clone(a.from),a.from=f;default:return a.item.data._loops||(a.item.data._loops=0),a.options.onLoop&&a.options.onLoop(a,a.item.data._loops++),Danimator.animate(a.item,a.property,a.from,a.to,a.duration,a.options)}else a.options.onDone&&a.options.onDone(a)}})}var h=animations[a.id]=setTimeout(function(){a.data._animate||(a.data._animate=[],a.on("frame",g));var h="frame"===b?null:"cubicOut",i={item:a,property:b||"opacity",duration:e||1,from:c,to:void 0!==d?d:1,startTime:(new Date).getTime(),options:_.defaults(f,{delay:0,easing:h})};null!==c&&_.set(a,i.property,c),a.data._animate.push(i)},1e3*(f&&f.delay||0));return Danimator.onAnimate&&Danimator.onAnimate(),{options:f,then:Danimator.then,stop:function(){clearTimeout(h)}}},Danimator.play=function(a,b){var c=a.frames,d=c-a.frame,e=d/(b&&b.fps||12);return a.data._playing=!0,b.frameDuration=e/d,Danimator(a,"frame",a.frame,c,e,b)},Danimator.stop=function(a){a.data._playing=!1},Danimator.stopAll=function(a){_.each(animations[a.id],function(a,b){clearTimeout(a),delete animations[b]}),a.data._playing=!1,delete a.data._animate},Danimator.then=function(){var a=_.toArray(arguments),b=a.shift(),c=_.last(a);return c.delay=_.get(c,"delay",0)+(this.options&&this.options.delay||0),Danimator[b].apply(this,a)},Danimator.fadeIn=function(a,b,c){var d=c&&c.from;return void 0!==d?(a.opacity=d,delete c.from):d=null,a.visible=!0,Danimator(a,"opacity",d,_.get(c,"to",1),b,c)},Danimator.fadeOut=function(a,b,c){var d=c&&c.from;return void 0!==d?(a.opacity=d,delete c.from):d=null,a.visible=!0,Danimator(a,"opacity",d,_.get(c,"to",0),b,c)},Danimator.morph=function(a,b,c,d){var e=[a],f=[b],g=a.clone(),h=[g];"Path"!==a.className&&(e=a.getItems({class:paper.Path}),f=b.getItems({class:paper.Path}),h=g.getItems({class:paper.Path})),a.visible=b.visible=!1,g.name='morph "'+a.name.replace(/(^_|\-\d+$)/g,"")+'" to "'+b.name.replace(/(^_|\-\d+$)/g,"")+'"',g.insertAbove(a),g.data.morphing=0,Danimator.onMorph&&Danimator.onMorph(g,d),Danimator(g,"data.morphing",0,1,c,{onStep:function(c){0===c||1===c?([a,b][c].visible=!0,g.visible=!1):(a.visible=b.visible=!1,g.visible=!0,_.each(e,function(a,b){var d=f[b],e=h[b];_.each(e.segments,function(b,e){var f=a.segments[e],g=d.segments[e];b&&g&&(b.point=f.point.add(g.point.subtract(f.point).multiply(c)),b.handleIn=f.handleIn.add(g.handleIn.subtract(f.handleIn).multiply(c)),b.handleOut=f.handleOut.add(g.handleOut.subtract(f.handleOut).multiply(c)))})}))}})},Danimator.sound=function a(b,c){var d=_.extend({name:b,src:["audio/"+b]},c),e=_.get(Danimator.sounds,b),f=0,g=0;return d.src=_.map(d.src,function(a){return a.match(/^\/?audio\/.+$/g)||(a="audio/"+a),a.match(/.*\.[^\.]+$/g)?a:(b+=".m4a",a+".m4a")}),d.fadeIn&&(f=d.fadeIn,delete d.fadeIn),d.fadeOut&&(g=d.fadeOut,delete d.fadeOut),e||(e=Danimator.sounds[b]={source:new Howl(d),get:function(a){return this.source["_"+a]},set:function(a,b){this.source[a](b,this.instance)},play:function(){return this.stopped=!1,Danimator._activeSound=this,this.instance=this.source.play()},stop:function(){this.source.stop(this.instance),this.stopped=!0,Danimator.onSoundStop&&Danimator.onSoundStop(this)},fadeIn:function(a){var b=this.source.volume(null,this.instance);return this.source.fade(0,b,a,this.instance),b},fadeOut:function(a){var b=this.source.volume(null,this.instance);return this.source.fade(b,0,a,this.instance),b}}),e.options=c,e.caller=a.caller.name,setTimeout(function(){Danimator.interactive?Danimator._activeSound=e:(e.play(),f&&e.fadeIn(f),g&&e.fadeOut(g)),Danimator.onSound&&Danimator.onSound(b,e)},_.get(c,"delay",0)),e};var _createDanimatorScene=function(a){var b={className:"sceneElement"};return Object.defineProperty(b,"item",{enumerable:!1,writable:!1,configurable:!1,value:a}),Object.defineProperty(b,"data",{enumerable:!1,value:{}}),Object.defineProperty(b,"find",{enumerable:!1,writable:!1,configurable:!1,value:function(a){return this.$element.find('[data-name="'+a+'"],#'+a).map(function(){var b=$(this).data("sceneElement");if(!b){var c=paper.project.getItem({name:a});b=c.data.sceneElement=_createDanimatorScene(c),$(this).data("sceneElement",b)}return b}).get()}}),Object.defineProperty(b,"ordered",{enumerable:!1,get:function(){return _.values(this)}}),a.name&&Object.defineProperty(b,"$element",{enumerable:!1,writable:!1,configurable:!1,value:a.data.sceneRoot?paper.$dom:paper.$dom.find("#"+a.name)}),a.children&&_.each(a.children,function(c,d){c.name||(c.name="element_"+c.id,b.$element.children(":eq("+d+")").attr("id",c.name));var e,f=paper.$dom.find("#"+c.name),g=_createDanimatorScene(c),h=String(f.data("name")||c.name);if("#"===h[0])a.data._states||(a.data._states={}),h=h.slice(1),a.data._states[h]=c,_.size(a.data._states)>1?c.visible=!1:a.data._state=a.data._state||h;else if(e=h.match(/^f(\d+)/)){var i=parseInt(Number(e[1]));a.data._frames=Math.max(a.data._frames||1,i),i>1&&(c.visible=!1)}f.data("sceneElement",g),b[h]=g,c.data.sceneElement=g}),b};paper.Item.inject({getFrame:function(){return this.data._frame||(this.data._frame=1),this.data._frame},setFrame:function(a){var b=parseInt(a),c=Danimator.sceneElement(this),d=c["f"+this.getFrame()]||this.data._frameLayer,e=c["f"+Danimator.limit(b,0,this.frames)]||this.data._frameLayer;d&&(this.data._frameLayer=d,d.item.visible=!1),e&&(e.item.visible=!0),this.data._frame=b,_.isEmpty(this.state)||(this.state=this.state),this.data.onFrameChanged&&this.data.onFrameChanged(b)},getFrames:function(){return this.data._frames||1},getState:function(){return"string"==typeof arguments[0]?_.get(this.data,"_state."+arguments[0],!1):this.data._state||{}},setState:function(a){var b,c=this;if("object"==typeof a)return _.each(a,function(a,b){c.setState(b+"."+a)});if(a.indexOf(".")>-1&&(a=a.split("."),b=a[0]+"",a=a.slice(1).join(".")),b){c.data._state=c.data._state||{},c.data._state[b]=a;var d,e=Danimator.sceneElement(c);return d=1===c.frames?e:e["f"+c.frame],_.each(d.find(b),function(b){b.item.setState(a)})}var f=c.getStates();return void 0===c.data._state&&(c.data._state=_.keys(f)[0]),f[c.data._state].visible=!1,f[a].visible=!0,c.data._state=a,c.data.onStateChanged&&c.data.onStateChanged(a,b),c},getStates:function(){return _.get(this.data,"_states",{})}}),Danimator.sounds={},Danimator.interactive=!1,Danimator.startTime=(new Date).getTime(),Danimator.removeClip=!0;var _scriptQuery=_.last(document.getElementsByTagName("script")).src.replace(/^[^\?]+\??/,"");paper.Path.inject({getGrowth:function(){var a=this.data._growth;return void 0===a&&(a=1,this.dashArray&&2==this.dashArray.length&&this.dashArray[1]==this.length&&(a=this.dashArray[0]/this.length),this.data._growth=a),a},setGrowth:function(a){this.data._growth=a;var b=a*this.length;_.has(this.data,"_oldVisible")||(this.data._oldVisible=!!this.visible),a<=0?this.visible=!1:this.visible!=this.data._oldVisible&&(this.visible=_.get(this.data,"_oldVisible",1)),this.dashArray=[b,this.length]}}),paper.Item.inject({getRotation:function(){return _.get(this.data,"_rotation",0)},setRotation:function(a,b){this.rotate(a-_.get(this.data,"_rotation",0),b),this.data._rotation=a},attachToPath:function(a,b){this.detachFromPath(a),this.data._master=a,a.data._slaves||(a.data._slaves=[]),a.data._slaves.push(this),this.offsetOnPath=b||0},detachFromPath:function(a){this.data._master&&(this.data._master.data._slaves=_.without(this.data._master.data._slaves,this))},getOffsetOnPath:function(){return this.data._offsetOnPath||0},setOffsetOnPath:function(a){a||(a=0);var b=this.data._master,c=a*b.length;this.position=b.getPointAt(c),this.rotation=b.getNormalAt(c).angle-90,this.data._offsetOnPath=a},flip:function(a){this.scale(-1,1,a)},flop:function(a){this.scale(1,-1,a)}});
//# sourceMappingURL=Danimator.min.js.map